
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>服务器性能瓶颈 · Run</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Jin">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="服务器高可用.html" />
    
    
    <link rel="prev" href="微服务与RPC.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../C++.html">
            
                <a href="../../C++.html">
            
                    
                    C++
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../C++/基本语法.html">
            
                <a href="../../C++/基本语法.html">
            
                    
                    基本语法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../C++/基本语法/static.html">
            
                <a href="../../C++/基本语法/static.html">
            
                    
                    static
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="../../C++/基本语法/const.html">
            
                <a href="../../C++/基本语法/const.html">
            
                    
                    const
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="../../C++/基本语法/inline.html">
            
                <a href="../../C++/基本语法/inline.html">
            
                    
                    inline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../../C++/基本语法/四种cast转换.html">
            
                <a href="../../C++/基本语法/四种cast转换.html">
            
                    
                    四种cast转换
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../C++/指针和引用.html">
            
                <a href="../../C++/指针和引用.html">
            
                    
                    指针和引用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../C++/指针和引用/指针和引用的区别.html">
            
                <a href="../../C++/指针和引用/指针和引用的区别.html">
            
                    
                    指针和引用的区别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../../C++/指针和引用/this指针.html">
            
                <a href="../../C++/指针和引用/this指针.html">
            
                    
                    this指针
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../../C++/指针和引用/野指针.html">
            
                <a href="../../C++/指针和引用/野指针.html">
            
                    
                    野指针
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../C++/类与对象.html">
            
                <a href="../../C++/类与对象.html">
            
                    
                    类与对象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../../C++/类与对象/面向对象三大特性.html">
            
                <a href="../../C++/类与对象/面向对象三大特性.html">
            
                    
                    面向对象三大特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../../C++/类与对象/RTTI.html">
            
                <a href="../../C++/类与对象/RTTI.html">
            
                    
                    RTTI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../../C++/类与对象/重载重写隐藏.html">
            
                <a href="../../C++/类与对象/重载重写隐藏.html">
            
                    
                    重载重写隐藏
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="../../C++/类与对象/虚函数机制.html">
            
                <a href="../../C++/类与对象/虚函数机制.html">
            
                    
                    虚函数机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.5" data-path="../../C++/类与对象/虚函数常见问题.html">
            
                <a href="../../C++/类与对象/虚函数常见问题.html">
            
                    
                    虚函数常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.6" data-path="../../C++/类与对象/纯虚函数.html">
            
                <a href="../../C++/类与对象/纯虚函数.html">
            
                    
                    纯虚函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.7" data-path="../../C++/类与对象/虚基类.html">
            
                <a href="../../C++/类与对象/虚基类.html">
            
                    
                    虚基类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.8" data-path="../../C++/类与对象/友元.html">
            
                <a href="../../C++/类与对象/友元.html">
            
                    
                    友元
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../C++/构造与析构.html">
            
                <a href="../../C++/构造与析构.html">
            
                    
                    构造与析构
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../../C++/构造与析构/对象构造过程.html">
            
                <a href="../../C++/构造与析构/对象构造过程.html">
            
                    
                    对象构造过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../../C++/构造与析构/生成默认构造函数.html">
            
                <a href="../../C++/构造与析构/生成默认构造函数.html">
            
                    
                    生成默认构造函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../../C++/构造与析构/拷贝构造函数.html">
            
                <a href="../../C++/构造与析构/拷贝构造函数.html">
            
                    
                    拷贝构造函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../../C++/构造与析构/禁止拷贝.html">
            
                <a href="../../C++/构造与析构/禁止拷贝.html">
            
                    
                    禁止拷贝
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="../../C++/构造与析构/对象析构过程.html">
            
                <a href="../../C++/构造与析构/对象析构过程.html">
            
                    
                    对象析构过程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../C++/内存管理.html">
            
                <a href="../../C++/内存管理.html">
            
                    
                    内存管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../../C++/内存管理/内存对齐.html">
            
                <a href="../../C++/内存管理/内存对齐.html">
            
                    
                    内存对齐
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../../C++/内存管理/内存分配方式.html">
            
                <a href="../../C++/内存管理/内存分配方式.html">
            
                    
                    内存分配方式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../../C++/内存管理/简单对象.html">
            
                <a href="../../C++/内存管理/简单对象.html">
            
                    
                    简单对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.4" data-path="../../C++/内存管理/常见的内存错误.html">
            
                <a href="../../C++/内存管理/常见的内存错误.html">
            
                    
                    常见的内存错误
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.5" data-path="../../C++/内存管理/内存泄漏.html">
            
                <a href="../../C++/内存管理/内存泄漏.html">
            
                    
                    内存泄漏
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.6" data-path="../../C++/内存管理/深拷贝与浅拷贝.html">
            
                <a href="../../C++/内存管理/深拷贝与浅拷贝.html">
            
                    
                    深拷贝和浅拷贝
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.7" data-path="../../C++/内存管理/程序编译过程.html">
            
                <a href="../../C++/内存管理/程序编译过程.html">
            
                    
                    程序编译过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.8" data-path="../../C++/内存管理/函数调用过程.html">
            
                <a href="../../C++/内存管理/函数调用过程.html">
            
                    
                    函数调用过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.9" data-path="../../C++/内存管理/new的三种方式.html">
            
                <a href="../../C++/内存管理/new的三种方式.html">
            
                    
                    new的三种方式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.10" data-path="../../C++/内存管理/new和malloc.html">
            
                <a href="../../C++/内存管理/new和malloc.html">
            
                    
                    new和malloc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.11" data-path="../../C++/内存管理/Linux内存.html">
            
                <a href="../../C++/内存管理/Linux内存.html">
            
                    
                    Linux内存
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../../C++/C++11.html">
            
                <a href="../../C++/C++11.html">
            
                    
                    C++11
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1" data-path="../../C++/C++11/auto&decltype.html">
            
                <a href="../../C++/C++11/auto&decltype.html">
            
                    
                    auto/decltype
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.2" data-path="../../C++/C++11/overrride&final.html">
            
                <a href="../../C++/C++11/overrride&final.html">
            
                    
                    overrride&final
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.3" data-path="../../C++/C++11/default&delete.html">
            
                <a href="../../C++/C++11/default&delete.html">
            
                    
                    default&delete
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.4" data-path="../../C++/C++11/explicit.html">
            
                <a href="../../C++/C++11/explicit.html">
            
                    
                    explicit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.5" data-path="../../C++/C++11/委托构造函数.html">
            
                <a href="../../C++/C++11/委托构造函数.html">
            
                    
                    委托构造函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.6" data-path="../../C++/C++11/成员初始化列表.html">
            
                <a href="../../C++/C++11/成员初始化列表.html">
            
                    
                    成员初始化列表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.7" data-path="../../C++/C++11/lambda.html">
            
                <a href="../../C++/C++11/lambda.html">
            
                    
                    lambda
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.8" data-path="../../C++/C++11/智能指针.html">
            
                <a href="../../C++/C++11/智能指针.html">
            
                    
                    智能指针
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.9" data-path="../../C++/C++11/nullptr.html">
            
                <a href="../../C++/C++11/nullptr.html">
            
                    
                    nullptr
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../../C++/右值.html">
            
                <a href="../../C++/右值.html">
            
                    
                    右值
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../../C++/右值/左值与右值.html">
            
                <a href="../../C++/右值/左值与右值.html">
            
                    
                    左值与右值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.2" data-path="../../C++/右值/右值引用.html">
            
                <a href="../../C++/右值/右值引用.html">
            
                    
                    右值引用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.3" data-path="../../C++/右值/移动语义.html">
            
                <a href="../../C++/右值/移动语义.html">
            
                    
                    移动语义
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.4" data-path="../../C++/右值/完美转发.html">
            
                <a href="../../C++/右值/完美转发.html">
            
                    
                    完美转发
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../../C++/模板.html">
            
                <a href="../../C++/模板.html">
            
                    
                    模板
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../../C++/STL.html">
            
                <a href="../../C++/STL.html">
            
                    
                    STL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.9.1" data-path="../../C++/STL/容器的底层实现及特点.html">
            
                <a href="../../C++/STL/容器的底层实现及特点.html">
            
                    
                    容器的底层实现及特点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9.2" data-path="../../C++/STL/如何解决hash冲突.html">
            
                <a href="../../C++/STL/如何解决hash冲突.html">
            
                    
                    如何解决hash冲突
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9.3" data-path="../../C++/STL/空间配置器.html">
            
                <a href="../../C++/STL/空间配置器.html">
            
                    
                    空间配置器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9.4" data-path="../../C++/STL/萃取机制.html">
            
                <a href="../../C++/STL/萃取机制.html">
            
                    
                    萃取机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9.5" data-path="../../C++/STL/迭代器失效.html">
            
                <a href="../../C++/STL/迭代器失效.html">
            
                    
                    迭代器失效
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9.6" data-path="../../C++/STL/push_back的整个过程.html">
            
                <a href="../../C++/STL/push_back的整个过程.html">
            
                    
                    push_back的整个过程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="../../C++/C++多线程.html">
            
                <a href="../../C++/C++多线程.html">
            
                    
                    C++多线程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.10.1" data-path="../../C++/C++多线程/读写锁的实现.html">
            
                <a href="../../C++/C++多线程/读写锁的实现.html">
            
                    
                    读写锁的实现
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10.2" data-path="../../C++/C++多线程/四种锁.html">
            
                <a href="../../C++/C++多线程/四种锁.html">
            
                    
                    四种锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10.3" data-path="../../C++/C++多线程/线程池.html">
            
                <a href="../../C++/C++多线程/线程池.html">
            
                    
                    线程池
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../操作系统.html">
            
                <a href="../../操作系统.html">
            
                    
                    操作系统
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../操作系统/大小端.html">
            
                <a href="../../操作系统/大小端.html">
            
                    
                    大小端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../操作系统/内核态和用户态.html">
            
                <a href="../../操作系统/内核态和用户态.html">
            
                    
                    内核态和用户态
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../操作系统/进程的基本操作.html">
            
                <a href="../../操作系统/进程的基本操作.html">
            
                    
                    进程的基本操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../操作系统/孤儿进程，僵尸进程，守护进程.html">
            
                <a href="../../操作系统/孤儿进程，僵尸进程，守护进程.html">
            
                    
                    孤儿进程，僵尸进程，守护进程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../../操作系统/进程的状态，切换，调度.html">
            
                <a href="../../操作系统/进程的状态，切换，调度.html">
            
                    
                    进程的状态，切换，调度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../../操作系统/进程间通信方式.html">
            
                <a href="../../操作系统/进程间通信方式.html">
            
                    
                    进程间通信方式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../../操作系统/进程和线程的区别.html">
            
                <a href="../../操作系统/进程和线程的区别.html">
            
                    
                    进程和线程的区别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../../操作系统/多线程模型.html">
            
                <a href="../../操作系统/多线程模型.html">
            
                    
                    多线程模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../../操作系统/进程与线程的同步.html">
            
                <a href="../../操作系统/进程与线程的同步.html">
            
                    
                    进程与线程的同步
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../../操作系统/虚拟内存.html">
            
                <a href="../../操作系统/虚拟内存.html">
            
                    
                    虚拟内存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="../../操作系统/页面置换算法.html">
            
                <a href="../../操作系统/页面置换算法.html">
            
                    
                    页面置换算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="../../操作系统/死锁的产生和避免.html">
            
                <a href="../../操作系统/死锁的产生和避免.html">
            
                    
                    死锁的产生和避免
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="../../操作系统/协程.html">
            
                <a href="../../操作系统/协程.html">
            
                    
                    协程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="../../操作系统/写时复制.html">
            
                <a href="../../操作系统/写时复制.html">
            
                    
                    写时复制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="../../操作系统/进程调度算法.html">
            
                <a href="../../操作系统/进程调度算法.html">
            
                    
                    进程调度算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="../../操作系统/Linux下线程模型.html">
            
                <a href="../../操作系统/Linux下线程模型.html">
            
                    
                    Linux下线程模型
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../网络.html">
            
                <a href="../../网络.html">
            
                    
                    网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../网络/OSI七层协议.html">
            
                <a href="../../网络/OSI七层协议.html">
            
                    
                    OSI七层协议
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../网络/TCP.html">
            
                <a href="../../网络/TCP.html">
            
                    
                    TCP
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../../网络/TCP/TCP报文信息.html">
            
                <a href="../../网络/TCP/TCP报文信息.html">
            
                    
                    TCP报文信息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../../网络/TCP/连接建立.html">
            
                <a href="../../网络/TCP/连接建立.html">
            
                    
                    连接建立
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../../网络/TCP/连接断开.html">
            
                <a href="../../网络/TCP/连接断开.html">
            
                    
                    连接断开
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../../网络/TCP/TCP如何保证可靠性.html">
            
                <a href="../../网络/TCP/TCP如何保证可靠性.html">
            
                    
                    TCP如何保证可靠性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../../网络/TCP/TCP粘包问题.html">
            
                <a href="../../网络/TCP/TCP粘包问题.html">
            
                    
                    TCP粘包问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.6" data-path="../../网络/TCP/TCP中的定时器.html">
            
                <a href="../../网络/TCP/TCP中的定时器.html">
            
                    
                    TCP中的定时器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.7" data-path="../../网络/TCP/TCP的缺陷.html">
            
                <a href="../../网络/TCP/TCP的缺陷.html">
            
                    
                    TCP的缺陷
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../网络/TCP和UDP区别.html">
            
                <a href="../../网络/TCP和UDP区别.html">
            
                    
                    TCP和UDP区别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../网络/KCP.html">
            
                <a href="../../网络/KCP.html">
            
                    
                    KCP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../网络/HTTP.html">
            
                <a href="../../网络/HTTP.html">
            
                    
                    HTTP
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.5.1" data-path="../../网络/HTTP/请你来说一说HTTP协议.html">
            
                <a href="../../网络/HTTP/请你来说一说HTTP协议.html">
            
                    
                    请你来说一说HTTP协议
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.2" data-path="../../网络/HTTP/GET和POST的区别.html">
            
                <a href="../../网络/HTTP/GET和POST的区别.html">
            
                    
                    GET和POST的区别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.3" data-path="../../网络/HTTP/HTTP各版本的区别.html">
            
                <a href="../../网络/HTTP/HTTP各版本的区别.html">
            
                    
                    HTTP各版本的区别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.4" data-path="../../网络/HTTP/HTTP如何保存用户的状态.html">
            
                <a href="../../网络/HTTP/HTTP如何保存用户的状态.html">
            
                    
                    HTTP如何保存用户的状态
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.5" data-path="../../网络/HTTP/输入一个网站到显示页面的过程.html">
            
                <a href="../../网络/HTTP/输入一个网站到显示页面的过程.html">
            
                    
                    输入一个网站到显示页面的过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5.6" data-path="../../网络/HTTP/HTTP和HTTPS的区别.html">
            
                <a href="../../网络/HTTP/HTTP和HTTPS的区别.html">
            
                    
                    HTTP和HTTPS的区别
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../../网络/socket编程.html">
            
                <a href="../../网络/socket编程.html">
            
                    
                    socket编程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.6.1" data-path="../../网络/socket编程/socket基本API.html">
            
                <a href="../../网络/socket编程/socket基本API.html">
            
                    
                    socket基本API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.2" data-path="../../网络/socket编程/阻塞，非阻塞，同步，异步.html">
            
                <a href="../../网络/socket编程/阻塞，非阻塞，同步，异步.html">
            
                    
                    阻塞，非阻塞，同步，异步
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.3" data-path="../../网络/socket编程/select,poll,epoll.html">
            
                <a href="../../网络/socket编程/select,poll,epoll.html">
            
                    
                    select,poll,epoll
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../数据库.html">
            
                <a href="../../数据库.html">
            
                    
                    数据库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../理论知识.html">
            
                <a href="../../理论知识.html">
            
                    
                    理论知识
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../../数据库/理论知识/关系型与非关系型数据库.html">
            
                <a href="../../数据库/理论知识/关系型与非关系型数据库.html">
            
                    
                    关系型与非关系型数据库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="../../数据库/理论知识/事务.html">
            
                <a href="../../数据库/理论知识/事务.html">
            
                    
                    事务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="../../数据库/理论知识/数据结构优化手段.html">
            
                <a href="../../数据库/理论知识/数据结构优化手段.html">
            
                    
                    数据结构优化手段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.4" data-path="../../数据库/理论知识/分库分表.html">
            
                <a href="../../数据库/理论知识/分库分表.html">
            
                    
                    分库分表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.5" data-path="../../数据库/理论知识/悲观锁与乐观锁.html">
            
                <a href="../../数据库/理论知识/悲观锁与乐观锁.html">
            
                    
                    乐观锁与悲观锁
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../数据库/mysql.html">
            
                <a href="../../数据库/mysql.html">
            
                    
                    mysql
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../../数据库/mysql/索引.html">
            
                <a href="../../数据库/mysql/索引.html">
            
                    
                    索引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="../../数据库/mysql/为什么使用B+树.html">
            
                <a href="../../数据库/mysql/为什么使用B+树.html">
            
                    
                    为什么使用B+树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="../../数据库/mysql/主从复制.html">
            
                <a href="../../数据库/mysql/主从复制.html">
            
                    
                    主从复制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.4" data-path="../../数据库/mysql/mysql的引擎和区别.html">
            
                <a href="../../数据库/mysql/mysql的引擎和区别.html">
            
                    
                    mysql的引擎和区别
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../数据库/redis.html">
            
                <a href="../../数据库/redis.html">
            
                    
                    redis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="../../数据库/redis/redis底层数据结构.html">
            
                <a href="../../数据库/redis/redis底层数据结构.html">
            
                    
                    redis底层数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.2" data-path="../../数据库/redis/单线程.html">
            
                <a href="../../数据库/redis/单线程.html">
            
                    
                    单线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.3" data-path="../../数据库/redis/过期时间方案.html">
            
                <a href="../../数据库/redis/过期时间方案.html">
            
                    
                    过期时间方案
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.4" data-path="../../数据库/redis/缓存问题.html">
            
                <a href="../../数据库/redis/缓存问题.html">
            
                    
                    缓存问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.5" data-path="../../数据库/redis/持久化机制.html">
            
                <a href="../../数据库/redis/持久化机制.html">
            
                    
                    持久化机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.6" data-path="../../数据库/redis/集群.html">
            
                <a href="../../数据库/redis/集群.html">
            
                    
                    集群
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.7" data-path="../../数据库/redis/保证双写时数据一致.html">
            
                <a href="../../数据库/redis/保证双写时数据一致.html">
            
                    
                    保证双写时数据一致
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.8" data-path="../../数据库/redis/定时机制.html">
            
                <a href="../../数据库/redis/定时机制.html">
            
                    
                    定时机制
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../设计模式.html">
            
                <a href="../../设计模式.html">
            
                    
                    设计模式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../设计模式/单例模式.html">
            
                <a href="../../设计模式/单例模式.html">
            
                    
                    单例模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../设计模式/观察者模式.html">
            
                <a href="../../设计模式/观察者模式.html">
            
                    
                    观察者模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../设计模式/工厂模式.html">
            
                <a href="../../设计模式/工厂模式.html">
            
                    
                    工厂模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../Linux.html">
            
                <a href="../../Linux.html">
            
                    
                    Linux
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../Linux/Linux常用命令.html">
            
                <a href="../../Linux/Linux常用命令.html">
            
                    
                    Linux常用命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../Linux/GDB断点调试.html">
            
                <a href="../../Linux/GDB断点调试.html">
            
                    
                    GDB断点调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../../Linux/CMake.html">
            
                <a href="../../Linux/CMake.html">
            
                    
                    CMake
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../../Linux/Timer.html">
            
                <a href="../../Linux/Timer.html">
            
                    
                    Timer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../数据结构和算法.html">
            
                <a href="../../数据结构和算法.html">
            
                    
                    数据结构和算法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../数据结构和算法/时间复杂度与空间复杂度.html">
            
                <a href="../../数据结构和算法/时间复杂度与空间复杂度.html">
            
                    
                    时间复杂度与空间复杂度
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../../数据结构和算法/数据结构总结.html">
            
                <a href="../../数据结构和算法/数据结构总结.html">
            
                    
                    数据结构总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../../数据结构和算法/红黑树和平衡二叉树.html">
            
                <a href="../../数据结构和算法/红黑树和平衡二叉树.html">
            
                    
                    红黑树和平衡二叉树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../../数据结构和算法/排序.html">
            
                <a href="../../数据结构和算法/排序.html">
            
                    
                    排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../../数据结构和算法/一致性hash.html">
            
                <a href="../../数据结构和算法/一致性hash.html">
            
                    
                    一致性hash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../../数据结构和算法/海量数据处理.html">
            
                <a href="../../数据结构和算法/海量数据处理.html">
            
                    
                    海量数据处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="../../数据结构和算法/刷题技巧及常见题型.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型.html">
            
                    
                    刷题技巧及常见题型
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.7.1" data-path="../../数据结构和算法/刷题技巧及常见题型/二分法.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型/二分法.html">
            
                    
                    二分法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7.2" data-path="../../数据结构和算法/刷题技巧及常见题型/双指针.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型/双指针.html">
            
                    
                    双指针
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7.3" data-path="../../数据结构和算法/刷题技巧及常见题型/链表.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型/链表.html">
            
                    
                    链表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7.4" data-path="../../数据结构和算法/刷题技巧及常见题型/树.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型/树.html">
            
                    
                    树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7.5" data-path="../../数据结构和算法/刷题技巧及常见题型/栈.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型/栈.html">
            
                    
                    栈
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7.6" data-path="../../数据结构和算法/刷题技巧及常见题型/动态规划.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型/动态规划.html">
            
                    
                    动态规划
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7.7" data-path="../../数据结构和算法/刷题技巧及常见题型/bfs&dfs.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型/bfs&dfs.html">
            
                    
                    bfs&dfs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7.8" data-path="../../数据结构和算法/刷题技巧及常见题型/回溯.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型/回溯.html">
            
                    
                    回溯
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7.9" data-path="../../数据结构和算法/刷题技巧及常见题型/贪心.html">
            
                <a href="../../数据结构和算法/刷题技巧及常见题型/贪心.html">
            
                    
                    贪心
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../游戏服务器.html">
            
                <a href="../../游戏服务器.html">
            
                    
                    游戏服务器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../业务.html">
            
                <a href="../业务.html">
            
                    
                    业务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1.1" data-path="../业务/邮件.html">
            
                <a href="../业务/邮件.html">
            
                    
                    邮件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.2" data-path="../业务/聊天.html">
            
                <a href="../业务/聊天.html">
            
                    
                    聊天
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.3" data-path="../业务/充值.html">
            
                <a href="../业务/充值.html">
            
                    
                    充值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.4" data-path="../业务/雪花算法.html">
            
                <a href="../业务/雪花算法.html">
            
                    
                    雪花算法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../技术.html">
            
                <a href="../技术.html">
            
                    
                    技术
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.2.1" data-path="帧同步和状态同步.html">
            
                <a href="帧同步和状态同步.html">
            
                    
                    帧同步和状态同步
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.2" data-path="排行榜.html">
            
                <a href="排行榜.html">
            
                    
                    排行榜
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.3" data-path="敏感词过滤.html">
            
                <a href="敏感词过滤.html">
            
                    
                    敏感词过滤
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.4" data-path="洗牌算法.html">
            
                <a href="洗牌算法.html">
            
                    
                    洗牌算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.5" data-path="AOI.html">
            
                <a href="AOI.html">
            
                    
                    AOI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.6" data-path="自动寻路.html">
            
                <a href="自动寻路.html">
            
                    
                    自动寻路
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.7" data-path="分布式架构.html">
            
                <a href="分布式架构.html">
            
                    
                    分布式架构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.8" data-path="交互通信协议的设计.html">
            
                <a href="交互通信协议的设计.html">
            
                    
                    交互通信协议的设计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.9" data-path="场景管理.html">
            
                <a href="场景管理.html">
            
                    
                    场景管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.10" data-path="负载均衡.html">
            
                <a href="负载均衡.html">
            
                    
                    负载均衡
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.11" data-path="问题的定位分析.html">
            
                <a href="问题的定位分析.html">
            
                    
                    问题的定位分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.12" data-path="定时器.html">
            
                <a href="定时器.html">
            
                    
                    定时器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.13" data-path="消息队列.html">
            
                <a href="消息队列.html">
            
                    
                    消息队列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.14" data-path="微服务与RPC.html">
            
                <a href="微服务与RPC.html">
            
                    
                    微服务与RPC
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9.2.15" data-path="服务器性能瓶颈.html">
            
                <a href="服务器性能瓶颈.html">
            
                    
                    服务器性能瓶颈
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.16" data-path="服务器高可用.html">
            
                <a href="服务器高可用.html">
            
                    
                    服务器高可用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.17" data-path="全区全服下的分布式解决方案.html">
            
                <a href="全区全服下的分布式解决方案.html">
            
                    
                    全区全服下的分布式解决方案
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.18" data-path="服务器通信.html">
            
                <a href="服务器通信.html">
            
                    
                    服务器通信
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../python.html">
            
                <a href="../../python.html">
            
                    
                    python
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >服务器性能瓶颈</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="&#x6A21;&#x5757;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x7684;&#x4F30;&#x7B97;">&#x6A21;&#x5757;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x7684;&#x4F30;&#x7B97;</h3>
<ul>
<li><strong>&#x5185;&#x5B58;</strong><ul>
<li>&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5927;&#x5C0F;</li>
<li>&#x8FD0;&#x884C;&#x65F6;&#x5BF9;&#x8C61;&#x7684;&#x6570;&#x91CF;</li>
<li>&#x7A0B;&#x5E8F;&#x5185;&#x5B58;&#x4E0A;&#x9650;</li>
</ul>
</li>
<li><strong>IO&#x901F;&#x5EA6;</strong><ul>
<li>&#x5355;&#x4E2A;&#x5BF9;&#x8C61;IO&#x8BBF;&#x95EE;&#x7684;&#x9891;&#x7387;</li>
<li>&#x6BCF;&#x6B21;IO&#x8BBF;&#x95EE;&#x7684;&#x6D88;&#x8017;</li>
<li>IO&#x8BBF;&#x95EE;&#x7684;&#x4E0A;&#x9650;</li>
</ul>
</li>
<li><strong>&#x8FD0;&#x884C;&#x6548;&#x7387;</strong><ul>
<li>&#x590D;&#x6742;&#x5EA6;&#x9AD8;&#x7684;&#x4EE3;&#x7801;&#x7684;&#x8FD0;&#x884C;&#x6D88;&#x8017;</li>
<li>&#x8BE5;&#x590D;&#x6742;&#x5EA6;&#x9AD8;&#x7684;&#x4EE3;&#x7801;&#x7684;&#x8FD0;&#x884C;&#x9891;&#x7387;  </li>
</ul>
</li>
</ul>
<h3 id="&#x6A21;&#x5757;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x7684;&#x4F18;&#x5316;">&#x6A21;&#x5757;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x7684;&#x4F18;&#x5316;</h3>
<ul>
<li><strong>&#x5185;&#x5B58;</strong><ul>
<li>&#x7ED3;&#x6784;&#x8C03;&#x6574;&#xFF0C;strcut&#x7684;&#x5B57;&#x8282;&#x5BF9;&#x9F50;</li>
<li>&#x90E8;&#x5206;&#x52A0;&#x8F7D;&#xFF0C;&#x63A7;&#x5236;&#x4E0A;&#x9650;</li>
</ul>
</li>
<li><strong>&#x6570;&#x636E;&#x5E93;IO</strong><ul>
<li>&#x8BED;&#x53E5;&#x5408;&#x5E76;</li>
<li>&#x9884;&#x52A0;&#x8F7D;</li>
<li>&#x964D;&#x4F4E;&#x64CD;&#x4F5C;&#x9891;&#x7387;</li>
<li>&#x52A0;&#x5927;&#x6570;&#x636E;&#x5E93;&#x8BBF;&#x95EE;&#x8FDE;&#x63A5;&#x6570;</li>
</ul>
</li>
<li><strong>&#x7F51;&#x7EDC;IO</strong><ul>
<li>&#x5927;&#x7684;&#x6570;&#x636E;&#x5305;&#x538B;&#x7F29;&#xFF0C;&#x5C0F;&#x5305;&#x79EF;&#x5305;&#x53D1;&#x9001;</li>
<li>&#x964D;&#x4F4E;&#x5E7F;&#x64AD;&#x4EBA;&#x7FA4;</li>
<li>&#x964D;&#x4F4E;&#x53D1;&#x9001;&#x9891;&#x7387;</li>
</ul>
</li>
<li><strong>&#x8FD0;&#x884C;&#x6548;&#x7387;</strong><ul>
<li>&#x7B97;&#x6CD5;&#x4F18;&#x5316;</li>
<li>&#x964D;&#x4F4E;&#x8C03;&#x7528;&#x9891;&#x7387;</li>
</ul>
</li>
<li><strong>&#x4E07;&#x4E0D;&#x5F97;&#x5DF2;&#x7684;&#x65B9;&#x6CD5;</strong><ul>
<li>&#x52A0;&#x5927;&#x5185;&#x5B58;&#x548C;&#x7F51;&#x7EDC;&#x5E26;&#x5BBD;</li>
<li>&#x4FEE;&#x6539;&#x7B56;&#x5212;&#x6848;  </li>
</ul>
</li>
</ul>
<h3 id="&#x5177;&#x4F53;&#x64CD;&#x4F5C;">&#x5177;&#x4F53;&#x64CD;&#x4F5C;</h3>
<ul>
<li>&#x5185;&#x5B58;,&#x4E00;&#x822C;&#x670D;&#x52A1;&#x5668;32G,&#x5355;&#x8FDB;&#x7A0B;&#x5C3D;&#x91CF;&#x63A7;&#x5236;&#x5728;4G&#x4EE5;&#x4E0B;</li>
<li>cpu,&#x5355;&#x7EBF;&#x7A0B;cpu&#x4E0D;&#x8D85;&#x8FC7;70%</li>
<li>&#x7F51;&#x7EDC;&#x6D41;&#x91CF;,&#x6BCF;&#x4EBA;&#x6BCF;&#x79D2;&#x4E0D;&#x8D85;&#x8FC7;5 K&#x5B57;&#x8282;,&#x53D1;&#x9001;&#x5BA2;&#x6237;&#x7AEF;&#x5355;&#x5305;&#x4E0D;&#x8D85;&#x8FC7;10K     </li>
<li>&#x5F02;&#x6B65;db,&#x76EE;&#x524D;&#x4E91;db&#x5355;&#x8FDE;&#x63A5;&#x5927;&#x7EA6;200qps,&#x5355;&#x6A21;&#x5757;&#x5C3D;&#x91CF;&#x63A7;&#x5236;&#x5728;50 qps&#x4EE5;&#x4E0B;</li>
<li>&#x5F02;&#x6B65;redis,&#x76EE;&#x524D;&#x4E91;redis&#x5355;&#x8FDE;&#x63A5;&#x5927;&#x7EA6;1000qps,&#x8BBF;&#x95EE;&#x5355;&#x6A21;&#x5757;&#x5C3D;&#x91CF;&#x63A7;&#x5236;&#x5728;100 qps&#x4EE5;&#x4E0B;</li>
<li>&#x5F02;&#x6B65;web&#x8BBF;&#x95EE;,&#x770B;&#x5B9E;&#x73B0;&#x963B;&#x585E;&#x6A21;&#x5F0F;&#x4E00;&#x822C;&#x5355;&#x7EBF;&#x7A0B;50 qps</li>
</ul>
<p>&#x200B;    </p>
<p>&#x9884;&#x4F30;&#x8D1F;&#x8F7D;&#x7684;&#x8BA1;&#x7B97;&#x5F88;&#x7B80;&#x5355;,&#x5185;&#x5B58;,&#x7F51;&#x7EDC;&#x6D41;&#x91CF;&#x662F;(&#x5355;&#x4E2A;&#x8D1F;&#x8F7D;<em>&#x9884;&#x4F30;&#x6570;&#x91CF;),cpu&#x548C;&#x5404;&#x79CD;&#x5F02;&#x6B65;io(&#x5355;&#x6B21;&#x8D1F;&#x8F7D;</em>&#x9884;&#x4F30;&#x9891;&#x7387;), . &#x5982;&#x8BA1;&#x7B97;&#x4E00;&#x4E2A;&#x4EBA;&#x80CC;&#x5305;&#x5185;&#x5B58;&#x6D88;&#x8017;:&#x80CC;&#x5305;&#x6700;&#x591A;&#x653E;100&#x4E2A;&#x9053;&#x5177;,&#x6BCF;&#x4E2A;&#x9053;&#x5177;&#x6D88;&#x8017;1k&#x5185;&#x5B58;,&#x90A3;&#x4E48;&#x80CC;&#x5305;&#x6EE1;&#x9053;&#x5177;&#x6D88;&#x8017;&#x7684;&#x603B;&#x5185;&#x5B58;&#x5C31;&#x662F;3000(&#x5728;&#x7EBF;&#x4EBA;&#x6570;)<em>100</em>1k = 300m</p>
<p>&#x5BF9;&#x4E8E;&#x9884;&#x4F30;&#x6570;&#x91CF;&#x548C;&#x9884;&#x4F30;&#x9891;&#x7387;&#x4E00;&#x4E9B;&#x57FA;&#x672C;&#x53C2;&#x8003;&#x6570;&#x636E;:&#x5728;&#x7EBF;&#x4EBA;&#x6570;&#x4E00;&#x822C;&#x5206;&#x670D;&#x6A21;&#x5F0F;,&#x5355;&#x670D;3000&#x4EBA;&#x5230;6000&#x4EBA;,&#x770B;&#x9879;&#x76EE;&#x7EC4;&#x8BBE;&#x8BA1;,&#x901A;&#x670D;10w&#x4EBA;.&#x6BCF;&#x65E5;&#x767B;&#x5F55;&#x7528;&#x6237;&#x4E3A;&#x5728;&#x7EBF;&#x4EBA;&#x6570;&#x7684;10&#x500D;.&#x670D;&#x52A1;&#x5668;&#x521B;&#x89D2;&#x6570;&#x91CF;&#x4E00;&#x822C;&#x662F;&#x5728;&#x7EBF;&#x4EBA;&#x6570;&#x7684;20&#x500D;,&#x89D2;&#x8272;&#x767B;&#x5F55;&#x901F;&#x5EA6;&#x4E3A;&#x5206;&#x670D;&#x6A21;&#x5F0F;100&#x4EBA;/s,&#x901A;&#x670D;&#x6A21;&#x5F0F;1000&#x4EBA;/s.</p>
<p>&#x200B;    &#x5982;&#x679C;&#x9884;&#x4F30;&#x8D1F;&#x8F7D;&#x652F;&#x6301;&#x4E0D;&#x4F4F;,&#x5C31;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x4F18;&#x5316;,&#x8FD9;&#x91CC;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x4F18;&#x5316;&#x7684;&#x601D;&#x8DEF;:</p>
<ul>
<li>&#x5185;&#x5B58;,&#x964D;&#x4F4E;&#x6570;&#x91CF;.&#x4E5F;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x65F6;&#x521B;&#x5EFA;.&#x4E3E;&#x4E2A;&#x4F18;&#x5316;&#x8FC7;&#x7684;&#x4F8B;&#x5B50;.&#x67D0;&#x6E38;&#x620F;&#x5730;&#x56FE;&#x5BF9;&#x8C61;&#x7BA1;&#x7406;&#x662F;&#x91C7;&#x7528;&#x753B;&#x683C;&#x5B50;&#x7684;&#x65B9;&#x5F0F;,&#x538B;&#x6D4B;&#x65F6;&#x5185;&#x5B58;&#x538B;&#x529B;&#x5DE8;&#x5927;.&#x4ED4;&#x7EC6;&#x5206;&#x6790;&#x53D1;&#x73B0;&#x4E00;&#x5F20;&#x5927;&#x5730;&#x56FE;&#x53EA;&#x7528;&#x4E86;&#x4E00;&#x5C0F;&#x90E8;&#x5206;,&#x5176;&#x4ED6;&#x7684;&#x683C;&#x5B50;&#x751F;&#x6210;&#x5360;&#x7528;&#x7684;&#x5185;&#x5B58;&#x90FD;&#x662F;&#x6D6A;&#x8D39;&#x7684;,&#x540E;&#x6765;&#x4FEE;&#x6539;&#x6210;&#x8BE5;&#x683C;&#x5B50;&#x6709;&#x5BF9;&#x8C61;&#x8FDB;&#x5165;&#x518D;&#x751F;&#x6210;.&#x4F18;&#x5316;&#x540E;&#x5185;&#x5B58;&#x8FB9;&#x4E3A;&#x4E86;&#x539F;&#x6765;&#x7684;1/10</li>
<li>Cpu&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x964D;&#x4F4E;&#x9891;&#x7387;&#x6216;&#x6027;&#x80FD;&#x5206;&#x6790;&#x4F18;&#x5316;&#x4EE3;&#x7801;</li>
<li>&#x7F51;&#x7EDC;&#x6D41;&#x91CF;,&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x964D;&#x4F4E;&#x9891;&#x7387;&#x6216;&#x79EF;&#x5305;&#x538B;&#x7F29;&#x53D1;&#x9001;</li>
<li>&#x5F02;&#x6B65;db, redis, web&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x964D;&#x4F4E;&#x9891;&#x7387;&#x6216;&#x591A;&#x7EBF;&#x7A0B;&#x63D0;&#x9AD8;qps. &#x5F02;&#x6B65;db&#x4E5F;&#x53EF;&#x4EE5;&#x5408;&#x6279;&#x64CD;&#x4F5C;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x964D;&#x4F4E;sql&#x8BED;&#x53E5;&#x6267;&#x884C;&#x6570;&#x91CF;</li>
</ul>
<p>&#x4F5C;&#x597D;&#x8D1F;&#x8F7D;&#x9884;&#x4F30;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x51CF;&#x5C11;&#x670D;&#x52A1;&#x5668;&#x540E;&#x671F;&#x538B;&#x6D4B;&#x53D1;&#x73B0;&#x7684;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x95EE;&#x9898;&#xFF0C;&#x51CF;&#x5C11;&#x5927;&#x91CF;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x8FD4;&#x5DE5;&#x5DE5;&#x4F5C;</p>
<p>  1.0 &#x6027;&#x80FD;&#x76D1;&#x63A7;&#x4ECB;&#x7ECD;</p>
<p>&#x6027;&#x80FD;&#x4F18;&#x5316;&#x5C31;&#x662F;&#x627E;&#x5230;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x4E2D;&#x7684;&#x74F6;&#x9888;&#x4EE5;&#x53CA;&#x53BB;&#x9664;&#x8FD9;&#x4E9B;&#x7684;&#x8FC7;&#x7A0B;,&#x591A;&#x6570;&#x7BA1;&#x7406;&#x5458;&#x76F8;&#x4FE1;&#x770B;&#x4E00;&#x4E9B;&#x76F8;&#x5173;&#x7684;&quot;cook book&quot;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6027;&#x80FD;&#x4F18;&#x5316;,&#x901A;&#x5E38;&#x901A;&#x8FC7;&#x5BF9;&#x5185;&#x6838;&#x7684;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x662F;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x89E3;&#x51B3;&#x95EE;&#x9898;,&#x4F46;&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x6BCF;&#x4E2A;&#x73AF;&#x5883;,&#x6027;&#x80FD;&#x4F18;&#x5316;&#x5176;&#x5B9E;&#x662F;&#x5BF9;OS &#x5404;&#x5B50;&#x7CFB;&#x7EDF;&#x8FBE;&#x5230;&#x4E00;&#x79CD;&#x5E73;&#x8861;&#x7684;&#x5B9A;&#x4E49;,&#x8FD9;&#x4E9B;&#x5B50;&#x7CFB;&#x7EDF;&#x5305;&#x62EC;&#x4E86;:</p>
<ul>
<li>CPU</li>
<li>Memory</li>
<li>IO</li>
<li>Network</li>
</ul>
<p>&#x8FD9;&#x4E9B;&#x5B50;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x5173;&#x7CFB;&#x662F;&#x76F8;&#x4E92;&#x5F7C;&#x6B64;&#x4F9D;&#x8D56;&#x7684;,&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x9AD8;&#x8D1F;&#x8F7D;&#x90FD;&#x4F1A;&#x5BFC;&#x81F4;&#x5176;&#x4ED6;&#x5B50;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x95EE;&#x9898;.&#x6BD4;&#x5982;:</p>
<ul>
<li>&#x5927;&#x91CF;&#x7684;&#x9875;&#x8C03;&#x5165;&#x8BF7;&#x6C42;&#x5BFC;&#x81F4;&#x5185;&#x5B58;&#x961F;&#x5217;&#x7684;&#x62E5;&#x585E;</li>
<li>&#x7F51;&#x5361;&#x7684;&#x5927;&#x541E;&#x5410;&#x91CF;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x66F4;&#x591A;&#x7684; CPU &#x5F00;&#x9500;</li>
<li>&#x5927;&#x91CF;&#x7684;CPU &#x5F00;&#x9500;&#x53C8;&#x4F1A;&#x5C1D;&#x8BD5;&#x66F4;&#x591A;&#x7684;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x8BF7;&#x6C42;</li>
<li>&#x5927;&#x91CF;&#x6765;&#x81EA;&#x5185;&#x5B58;&#x7684;&#x78C1;&#x76D8;&#x5199;&#x8BF7;&#x6C42;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x66F4;&#x591A;&#x7684; CPU &#x4EE5;&#x53CA; IO &#x95EE;&#x9898;</li>
</ul>
<p>&#x6240;&#x4EE5;&#x8981;&#x5BF9;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x4F18;&#x5316;,&#x67E5;&#x627E;&#x74F6;&#x9888;&#x6765;&#x81EA;&#x54EA;&#x4E2A;&#x65B9;&#x9762;&#x662F;&#x5173;&#x952E;,&#x867D;&#x7136;&#x770B;&#x4F3C;&#x662F;&#x67D0;&#x4E00;&#x4E2A;&#x5B50;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x95EE;&#x9898;,&#x5176;&#x5B9E;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x522B;&#x7684;&#x5B50;&#x7CFB;&#x7EDF;&#x5BFC;&#x81F4;&#x7684;.</p>
<h2 id="11-&#x786E;&#x5B9A;&#x5E94;&#x7528;&#x7C7B;&#x578B;">1.1 &#x786E;&#x5B9A;&#x5E94;&#x7528;&#x7C7B;&#x578B;</h2>
<p>&#x57FA;&#x4E8E;&#x9700;&#x8981;&#x7406;&#x89E3;&#x8BE5;&#x4ECE;&#x4EC0;&#x4E48;&#x5730;&#x65B9;&#x6765;&#x5165;&#x624B;&#x4F18;&#x5316;&#x74F6;&#x9888;,&#x9996;&#x5148;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;,&#x5C31;&#x662F;&#x7406;&#x89E3;&#x5E76;&#x5206;&#x6790;&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x7684;&#x7279;&#x70B9;,&#x591A;&#x6570;&#x7CFB;&#x7EDF;&#x6240;&#x8DD1;&#x7684;&#x5E94;&#x7528;&#x7C7B;&#x578B;,&#x4E3B;&#x8981;&#x4E3A;2&#x79CD;:</p>
<ul>
<li>IO Bound(IO &#x8303;&#x7574;): &#x5728;&#x8FD9;&#x4E2A;&#x8303;&#x7574;&#x4E2D;&#x7684;&#x5E94;&#x7528;,&#x4E00;&#x822C;&#x90FD;&#x662F;&#x9AD8;&#x8D1F;&#x8377;&#x7684;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x4EE5;&#x53CA;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;,&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x8868;&#x793A;IO &#x8303;&#x7574;&#x7684;&#x5E94;&#x7528;,&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5927;&#x91CF;&#x6570;&#x636E;&#x5904;&#x7406;&#x7684;&#x8FC7;&#x7A0B;.IO &#x8303;&#x7574;&#x7684;&#x5E94;&#x7528;&#x4E0D;&#x5BF9;CPU&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x53D1;&#x8D77;&#x66F4;&#x591A;&#x8BF7;&#x6C42;(&#x9664;&#x975E;&#x7C7B;&#x4F3C;NAS&#x8FD9;&#x6837;&#x7684;&#x7F51;&#x7EDC;&#x5B58;&#x50A8;&#x786C;&#x4EF6;).IO &#x8303;&#x7574;&#x7684;&#x5E94;&#x7528;&#x901A;&#x5E38;&#x4F7F;&#x7528;CPU &#x8D44;&#x6E90;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x4EA7;&#x751F;IO &#x8BF7;&#x6C42;&#x4EE5;&#x53CA;&#x8FDB;&#x5165;&#x5230;&#x5185;&#x6838;&#x8C03;&#x5EA6;&#x7684;sleep &#x72B6;&#x6001;.&#x901A;&#x5E38;&#x6570;&#x636E;&#x5E93;&#x8F6F;&#x4EF6;(&#x4F8B;&#x5982;mysql,oracle&#x7B49;)&#x88AB;&#x8BA4;&#x4E3A;&#x662F;IO &#x8303;&#x7574;&#x7684;&#x5E94;&#x7528;&#x7C7B;&#x578B;.</li>
<li>CPU Bound(CPU &#x8303;&#x7574;): &#x5728;&#x8FD9;&#x4E2A;&#x8303;&#x7574;&#x4E2D;&#x7684;&#x5E94;&#x7528;,&#x4E00;&#x822C;&#x90FD;&#x662F;&#x9AD8;&#x8D1F;&#x8377;&#x7684;CPU &#x5360;&#x7528;. CPU &#x8303;&#x7574;&#x7684;&#x5E94;&#x7528;,&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6279;&#x91CF;&#x5904;&#x7406;CPU &#x8BF7;&#x6C42;&#x4EE5;&#x53CA;&#x6570;&#x5B66;&#x8BA1;&#x7B97;&#x7684;&#x8FC7;&#x7A0B;.&#x901A;&#x5E38;web server,mail server,&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x7C7B;&#x578B;&#x670D;&#x52A1;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;CPU&#x8303;&#x7574;&#x7684;&#x5E94;&#x7528;&#x7C7B;&#x578B;.</li>
</ul>
<h2 id="12-&#x786E;&#x5B9A;&#x57FA;&#x51C6;&#x7EBF;&#x7EDF;&#x8BA1;">1.2 &#x786E;&#x5B9A;&#x57FA;&#x51C6;&#x7EBF;&#x7EDF;&#x8BA1;</h2>
<p>&#x7CFB;&#x7EDF;&#x5229;&#x7528;&#x7387;&#x60C5;&#x51B5;,&#x4E00;&#x822C;&#x968F;&#x7BA1;&#x7406;&#x5458;&#x7ECF;&#x9A8C;&#x4EE5;&#x53CA;&#x7CFB;&#x7EDF;&#x672C;&#x8EAB;&#x7528;&#x9014;&#x6765;&#x51B3;&#x5B9A;.&#x552F;&#x4E00;&#x8981;&#x6E05;&#x695A;&#x7684;&#x5C31;&#x662F;,&#x7CFB;&#x7EDF;&#x4F18;&#x5316;&#x5E0C;&#x671B;&#x8FBE;&#x6210;&#x4EC0;&#x4E48;&#x6548;&#x679C;,&#x4EE5;&#x53CA;&#x54EA;&#x4E9B;&#x65B9;&#x9762;&#x662F;&#x9700;&#x8981;&#x4F18;&#x5316;,&#x8FD8;&#x6709;&#x53C2;&#x8003;&#x503C;&#x662F;&#x4EC0;&#x4E48;?&#x56E0;&#x6B64;&#x5C31;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x57FA;&#x51C6;&#x7EBF;,&#x8FD9;&#x4E2A;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x5FC5;&#x987B;&#x662F;&#x7CFB;&#x7EDF;&#x53EF;&#x7528;&#x6027;&#x80FD;&#x72B6;&#x6001;&#x503C;,&#x7528;&#x6765;&#x6BD4;&#x8F83;&#x4E0D;&#x53EF;&#x7528;&#x6027;&#x80FD;&#x72B6;&#x6001;&#x503C;.</p>
<p>&#x5728;&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x4E2D;,1&#x4E2A;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x7684;&#x57FA;&#x51C6;&#x7EBF;&#x5FEB;&#x7167;,&#x7528;&#x6765;&#x6BD4;&#x8F83;&#x5F53;&#x9AD8;&#x8D1F;&#x8377;&#x65F6;&#x7684;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x5FEB;&#x7167;.</p>
<blockquote>
<p># vmstat 1</p>
<p>procs memory swap io system cpu</p>
</blockquote>
<table>
<thead>
<tr>
<th>r</th>
<th>b</th>
<th>swpd</th>
<th>free</th>
<th>buff</th>
<th>cache</th>
<th>si</th>
<th>so</th>
<th>bi</th>
<th>bo</th>
<th>in</th>
<th>cs</th>
<th>us</th>
<th>sy</th>
<th>wa</th>
<th>id</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>138592</td>
<td>17932</td>
<td>126272</td>
<td>214244</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>18</td>
<td>109</td>
<td>19</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>96</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>138592</td>
<td>17932</td>
<td>126272</td>
<td>214244</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>105</td>
<td>46</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>99</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>138592</td>
<td>17932</td>
<td>126272</td>
<td>214244</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>198</td>
<td>62</td>
<td>40</td>
<td>14</td>
<td>0</td>
<td>45</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>138592</td>
<td>17932</td>
<td>126272</td>
<td>214244</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>117</td>
<td>49</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>100</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>138592</td>
<td>17924</td>
<td>126272</td>
<td>214244</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>176</td>
<td>220</td>
<td>938</td>
<td>3</td>
<td>4</td>
<td>13</td>
<td>80</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>138592</td>
<td>17924</td>
<td>126272</td>
<td>214244</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>358</td>
<td>1522</td>
<td>8</td>
<td>17</td>
<td>0</td>
<td>75</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>138592</td>
<td>17924</td>
<td>126272</td>
<td>214244</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>368</td>
<td>1447</td>
<td>4</td>
<td>24</td>
<td>0</td>
<td>72</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>138592</td>
<td>17924</td>
<td>126272</td>
<td>214244</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>352</td>
<td>1277</td>
<td>9</td>
<td>12</td>
<td>0</td>
<td>79</td>
</tr>
</tbody>
</table>
<blockquote>
<p># vmstat 1</p>
<p>procs memory swap io system cpu</p>
</blockquote>
<table>
<thead>
<tr>
<th>r</th>
<th>b</th>
<th>swpd</th>
<th>free</th>
<th>buff</th>
<th>cache</th>
<th>si</th>
<th>so</th>
<th>bi</th>
<th>bo</th>
<th>in</th>
<th>cs</th>
<th>us</th>
<th>sy</th>
<th>wa</th>
<th>id</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>0</td>
<td>145940</td>
<td>17752</td>
<td>118600</td>
<td>215592</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>18</td>
<td>109</td>
<td>19</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>96</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>145940</td>
<td>15856</td>
<td>118604</td>
<td>215652</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>468</td>
<td>789</td>
<td>108</td>
<td>86</td>
<td>14</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>146208</td>
<td>13884</td>
<td>118600</td>
<td>214640</td>
<td>0</td>
<td>360</td>
<td>0</td>
<td>360</td>
<td>498</td>
<td>71</td>
<td>91</td>
<td>9</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>146388</td>
<td>13764</td>
<td>118600</td>
<td>213788</td>
<td>0</td>
<td>340</td>
<td>0</td>
<td>340</td>
<td>672</td>
<td>41</td>
<td>87</td>
<td>13</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>147092</td>
<td>13788</td>
<td>118600</td>
<td>212452</td>
<td>0</td>
<td>740</td>
<td>0</td>
<td>1324</td>
<td>620</td>
<td>61</td>
<td>92</td>
<td>8</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>147360</td>
<td>13848</td>
<td>118600</td>
<td>211580</td>
<td>0</td>
<td>720</td>
<td>0</td>
<td>720</td>
<td>690</td>
<td>41</td>
<td>96</td>
<td>4</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>147912</td>
<td>13744</td>
<td>118192</td>
<td>210592</td>
<td>0</td>
<td>720</td>
<td>0</td>
<td>720</td>
<td>605</td>
<td>44</td>
<td>95</td>
<td>5</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>148452</td>
<td>13900</td>
<td>118192</td>
<td>209260</td>
<td>0</td>
<td>372</td>
<td>0</td>
<td>372</td>
<td>639</td>
<td>45</td>
<td>81</td>
<td>19</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>149132</td>
<td>13692</td>
<td>117824</td>
<td>208412</td>
<td>0</td>
<td>372</td>
<td>0</td>
<td>372</td>
<td>457</td>
<td>47</td>
<td>90</td>
<td>10</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x679C;&#x53EF;&#x770B;&#x5230;,&#x6700;&#x540E;&#x4E00;&#x5217;(id) &#x8868;&#x793A;&#x7684;&#x662F;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;,&#x5728;&#x57FA;&#x51C6;&#x7EBF;&#x7EDF;&#x8BA1;&#x65F6;,CPU &#x7684;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x5728;79% 100%.</p>
<p>&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x7ED3;&#x679C;&#x53EF;&#x770B;&#x5230;,&#x7CFB;&#x7EDF;&#x5904;&#x4E8E;100%&#x7684;&#x5360;&#x7528;&#x7387;&#x4EE5;&#x53CA;&#x6CA1;&#x6709;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;.&#x4ECE;&#x8FD9;&#x4E2A;&#x6BD4;&#x8F83;&#x4E2D;,&#x6211;&#x4EEC;&#x5C31;</p>
<p>&#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x662F;&#x5426;&#x662F;CPU &#x4F7F;&#x7528;&#x7387;&#x5E94;&#x8BE5;&#x88AB;&#x4F18;&#x5316;.</p>
<h1 id="20-&#x5B89;&#x88C5;&#x76D1;&#x63A7;&#x5DE5;&#x5177;">2.0 &#x5B89;&#x88C5;&#x76D1;&#x63A7;&#x5DE5;&#x5177;</h1>
<p>&#x591A;&#x6570; unix&#x7CFB;&#x7EDF;&#x90FD;&#x6709;&#x4E00;&#x5806;&#x6807;&#x51C6;&#x7684;&#x76D1;&#x63A7;&#x547D;&#x4EE4;.&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x4ECE;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x662F;unix &#x7684;&#x4E00;&#x90E8;&#x5206;.Linux &#x5219;&#x901A;&#x8FC7;&#x57FA;&#x672C;&#x5B89;&#x88C5;&#x5305;&#x4EE5;&#x53CA;&#x989D;&#x5916;&#x5305;&#x63D0;&#x4F9B;&#x4E86;&#x5176;&#x4ED6;&#x76D1;&#x63A7;&#x5DE5;&#x5177;,&#x8FD9;&#x4E9B;&#x5B89;&#x88C5;&#x5305;&#x591A;&#x6570;&#x90FD;&#x5B58;&#x5728;&#x5404;&#x4E2A;Linux &#x53D1;&#x5E03;&#x7248;&#x672C;&#x4E2D;.&#x5C3D;&#x7BA1;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x66F4;&#x591A;&#x7684;&#x5F00;&#x6E90;&#x4EE5;&#x53CA;&#x7B2C;&#x4E09;&#x65B9;&#x76D1;&#x63A7;&#x8F6F;&#x4EF6;,&#x4F46;&#x672C;&#x6587;&#x6863;&#x53EA;&#x8BA8;&#x8BBA;&#x57FA;&#x4E8E;Linux &#x53D1;&#x5E03;&#x7248;&#x672C;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x5177;.&#x672C;&#x7AE0;&#x5C06;&#x8BA8;&#x8BBA;&#x54EA;&#x4E9B;&#x5DE5;&#x5177;&#x600E;&#x6837;&#x6765;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;.</p>
<h1 id="30-cpu-&#x4ECB;&#x7ECD;">3.0 CPU &#x4ECB;&#x7ECD;</h1>
<p>CPU &#x5229;&#x7528;&#x7387;&#x4E3B;&#x8981;&#x4F9D;&#x8D56;&#x4E8E;&#x662F;&#x4EC0;&#x4E48;&#x8D44;&#x6E90;&#x5728;&#x8BD5;&#x56FE;&#x5B58;&#x53D6;.&#x5185;&#x6838;&#x8C03;&#x5EA6;&#x5668;&#x5C06;&#x8D1F;&#x8D23;&#x8C03;&#x5EA6;2&#x79CD;&#x8D44;&#x6E90;&#x79CD;&#x7C7B;:&#x7EBF;&#x7A0B;(&#x5355;&#x4E00;&#x6216;&#x8005;&#x591A;&#x8DEF;)&#x548C;&#x4E2D;&#x65AD;.&#x8C03;&#x5EA6;&#x5668;&#x53BB;&#x5B9A;&#x4E49;&#x4E0D;&#x540C;&#x8D44;&#x6E90;&#x7684;&#x4E0D;&#x540C;&#x4F18;&#x5148;&#x6743;.&#x4EE5;&#x4E0B;&#x5217;&#x8868;&#x4ECE;&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x5230;&#x4F4E;&#x6392;&#x5217;:</p>
<ul>
<li>Interrupts(&#x4E2D;&#x65AD;) &#x8BBE;&#x5907;&#x901A;&#x77E5;&#x5185;&#x6838;,&#x4ED6;&#x4EEC;&#x5B8C;&#x6210;&#x4E00;&#x6B21;&#x6570;&#x636E;&#x5904;&#x7406;&#x7684;&#x8FC7;&#x7A0B;.&#x4F8B;&#x5B50;,&#x5F53;&#x4E00;&#x5757;&#x7F51;&#x5361;&#x8BBE;&#x5907;&#x9012;&#x9001;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x5305;&#x6216;&#x8005;&#x4E00;&#x5757;&#x786C;&#x4EF6;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x6B21;IO &#x8BF7;&#x6C42;.</li>
<li>Kernel(System) Processes(&#x5185;&#x6838;&#x5904;&#x7406;&#x8FC7;&#x7A0B;) &#x6240;&#x6709;&#x5185;&#x6838;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x5C31;&#x662F;&#x63A7;&#x5236;&#x4F18;&#x5148;&#x7EA7;&#x522B;.</li>
<li>User Processes(&#x7528;&#x6237;&#x8FDB;&#x7A0B;) &#x8FD9;&#x5757;&#x6D89;&#x53CA;&quot;userland&quot;.&#x6240;&#x6709;&#x8F6F;&#x4EF6;&#x7A0B;&#x5E8F;&#x90FD;&#x8FD0;&#x884C;&#x5728;&#x8FD9;&#x4E2A;user space.&#x8FD9;&#x5757;&#x5728;&#x5185;&#x6838;&#x8C03;&#x5EA6;&#x673A;&#x5236;&#x4E2D;&#x5904;&#x4E8E;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;.</li>
</ul>
<p>&#x4ECE;&#x4E0A;&#x9762;,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5185;&#x6838;&#x662F;&#x600E;&#x6837;&#x7BA1;&#x7406;&#x4E0D;&#x540C;&#x8D44;&#x6E90;&#x7684;.&#x8FD8;&#x6709;&#x51E0;&#x4E2A;&#x5173;&#x952E;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x4ECB;&#x7ECD;,&#x4EE5;&#x4E0B;&#x90E8;&#x5206;&#x5C31;&#x5C06;&#x4ECB;&#x7ECD;context(&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;),run queues(&#x8FD0;&#x884C;&#x961F;&#x5217;)&#x4EE5;&#x53CA;utilization(&#x5229;&#x7528;&#x7387;).</p>
<h2 id="31-&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;">3.1 &#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;</h2>
<p>&#x591A;&#x6570;&#x73B0;&#x4EE3;&#x5904;&#x7406;&#x5668;&#x90FD;&#x80FD;&#x591F;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;(&#x5355;&#x4E00;&#x7EBF;&#x7A0B;)&#x6216;&#x8005;&#x7EBF;&#x7A0B;.&#x591A;&#x8DEF;&#x8D85;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#x5668;&#x6709;&#x80FD;&#x529B;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;.&#x7136;&#x800C;,Linux &#x5185;&#x6838;&#x8FD8;&#x662F;&#x628A;&#x6BCF;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x6838;&#x5FC3;&#x7684;&#x53CC;&#x6838;&#x5FC3;&#x82AF;&#x7247;&#x4F5C;&#x4E3A;&#x72EC;&#x7ACB;&#x7684;&#x5904;&#x7406;&#x5668;.&#x6BD4;&#x5982;,&#x4EE5;Linux &#x5185;&#x6838;&#x7684;&#x7CFB;&#x7EDF;&#x5728;&#x4E00;&#x4E2A;&#x53CC;&#x6838;&#x5FC3;&#x5904;&#x7406;&#x5668;&#x4E0A;,&#x662F;&#x62A5;&#x544A;&#x663E;&#x793A;&#x4E3A;&#x4E24;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x5904;&#x7406;&#x5668;.</p>
<p>&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684;Linux &#x5185;&#x6838;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;50 &#x81F3; 50,000 &#x7684;&#x5904;&#x7406;&#x7EBF;&#x7A0B;.&#x5728;&#x53EA;&#x6709;&#x4E00;&#x4E2A;CPU&#x65F6;,&#x5185;&#x6838;&#x5C06;&#x8C03;&#x5EA6;&#x5E76;&#x5747;&#x8861;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x7EBF;&#x7A0B;.&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x5728;&#x5904;&#x7406;&#x5668;&#x4E2D;&#x88AB;&#x5F00;&#x9500;&#x7684;&#x65F6;&#x95F4;&#x989D;&#x5EA6;.&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8981;&#x4E48;&#x5C31;&#x662F;&#x83B7;&#x5F97;&#x65F6;&#x95F4;&#x989D;&#x5EA6;&#x6216;&#x5DF2;&#x62A2;&#x5148;&#x83B7;&#x5F97;&#x4E00;&#x4E9B;&#x5177;&#x6709;&#x8F83;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;(&#x6BD4;&#x5982;&#x786C;&#x4EF6;&#x4E2D;&#x65AD;),&#x5176;&#x4E2D;&#x8F83;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x7EBF;&#x7A0B;&#x5C06;&#x4ECE;&#x533A;&#x57DF;&#x91CD;&#x65B0;&#x653E;&#x7F6E;&#x56DE;&#x5904;&#x7406;&#x5668;&#x7684;&#x961F;&#x5217;&#x4E2D;.&#x8FD9;&#x79CD;&#x7EBF;&#x7A0B;&#x7684;&#x8F6C;&#x6362;&#x5173;&#x7CFB;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x63D0;&#x5230;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;.&#x6BCF;&#x6B21;&#x5185;&#x6838;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;,&#x8D44;&#x6E90;&#x88AB;&#x7528;&#x4E8E;&#x5173;&#x95ED;&#x5728;CPU&#x5BC4;&#x5B58;&#x5668;&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;&#x548C;&#x653E;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E2D;.&#x7CFB;&#x7EDF;&#x4E2D;&#x8D8A;&#x591A;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;,&#x5728;&#x5904;&#x7406;&#x5668;&#x7684;&#x8C03;&#x5EA6;&#x7BA1;&#x7406;&#x4E0B;,&#x5185;&#x6838;&#x5C06;&#x5F97;&#x5230;&#x66F4;&#x591A;&#x7684;&#x5DE5;&#x4F5C;.</p>
<h2 id="32-&#x8FD0;&#x884C;&#x961F;&#x5217;">3.2 &#x8FD0;&#x884C;&#x961F;&#x5217;</h2>
<p>&#x6BCF;&#x4E2A;CPU &#x90FD;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x8FD0;&#x884C;&#x961F;&#x5217;.&#x7406;&#x8BBA;&#x4E0A;,&#x8C03;&#x5EA6;&#x5668;&#x5E94;&#x8BE5;&#x4E0D;&#x65AD;&#x7684;&#x8FD0;&#x884C;&#x548C;&#x6267;&#x884C;&#x7EBF;&#x7A0B;.&#x8FDB;&#x7A0B;&#x7EBF;&#x7A0B;&#x4E0D;&#x662F;&#x5728;sleep&#x72B6;&#x6001;&#x4E2D;(&#x963B;&#x585E;&#x4E2D;&#x548C;&#x7B49;&#x5F85;IO&#x4E2D;)&#x6216;&#x5C31;&#x662F;&#x5728;&#x53EF;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x4E2D;.&#x5982;&#x679C;CPU &#x5B50;&#x7CFB;&#x7EDF;&#x5904;&#x4E8E;&#x9AD8;&#x8D1F;&#x8377;&#x4E0B;,&#x90A3;&#x5C31;&#x610F;&#x5473;&#x7740;&#x5185;&#x6838;&#x8C03;&#x5EA6;&#x5C06;&#x65E0;&#x6CD5;&#x53CA;&#x65F6;&#x54CD;&#x5E94;&#x7CFB;&#x7EDF;&#x8BF7;&#x6C42;.&#x5BFC;&#x81F4;&#x7ED3;&#x679C;,&#x53EF;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x8FDB;&#x7A0B;&#x62E5;&#x585E;&#x5728;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x91CC;.&#x5F53;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x8D8A;&#x6765;&#x8D8A;&#x5DE8;&#x5927;,&#x8FDB;&#x7A0B;&#x7EBF;&#x7A0B;&#x5C06;&#x82B1;&#x8D39;&#x66F4;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x83B7;&#x53D6;&#x88AB;&#x6267;&#x884C;.</p>
<p>&#x6BD4;&#x8F83;&#x6D41;&#x884C;&#x7684;&#x672F;&#x8BED;&#x5C31;&#x662F;&quot;load&quot;,&#x5B83;&#x63D0;&#x4F9B;&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x7684;&#x8BE6;&#x7EC6;&#x72B6;&#x6001;.&#x7CFB;&#x7EDF; load &#x5C31;&#x662F;&#x6307;&#x5728;CPU &#x961F;&#x5217;&#x4E2D;&#x6709;&#x591A;&#x5C11;&#x6570;&#x76EE;&#x7684;&#x7EBF;&#x7A0B;,&#x4EE5;&#x53CA;&#x5176;&#x4E2D;&#x5F53;&#x524D;&#x6709;&#x591A;&#x5C11;&#x8FDB;&#x7A0B;&#x7EBF;&#x7A0B;&#x6570;&#x76EE;&#x88AB;&#x6267;&#x884C;&#x7684;&#x7EC4;&#x5408;.&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x53CC;&#x6838;&#x7CFB;&#x7EDF;&#x6267;&#x884C;&#x4E86;2&#x4E2A;&#x7EBF;&#x7A0B;,&#x8FD8;&#x6709;4&#x4E2A;&#x5728;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x4E2D;,&#x5219; load &#x5E94;&#x8BE5;&#x4E3A; 6. top &#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#x91CC;&#x663E;&#x793A;&#x7684;load averages &#x662F;&#x6307;1,5,15 &#x5206;&#x949F;&#x4EE5;&#x5185;&#x7684;load &#x60C5;&#x51B5;.</p>
<h2 id="33-cpu-&#x5229;&#x7528;&#x7387;">3.3 CPU &#x5229;&#x7528;&#x7387;</h2>
<p>CPU &#x5229;&#x7528;&#x7387;&#x5C31;&#x662F;&#x5B9A;&#x4E49;CPU &#x4F7F;&#x7528;&#x7684;&#x767E;&#x5206;&#x6BD4;.&#x8BC4;&#x4F30;&#x7CFB;&#x7EDF;&#x6700;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x4E2A;&#x5EA6;&#x91CF;&#x65B9;&#x5F0F;&#x5C31;&#x662F;CPU &#x7684;&#x5229;&#x7528;&#x7387;.&#x591A;&#x6570;&#x6027;&#x80FD;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x5173;&#x4E8E;CPU &#x5229;&#x7528;&#x7387;&#x7684;&#x5206;&#x7C7B;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;:</p>
<ul>
<li>User Time(&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x65F6;&#x95F4;) &#x5173;&#x4E8E;&#x5728;user space&#x4E2D;&#x88AB;&#x6267;&#x884C;&#x8FDB;&#x7A0B;&#x5728;CPU &#x5F00;&#x9500;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;.</li>
<li>System Time(&#x5185;&#x6838;&#x7EBF;&#x7A0B;&#x4EE5;&#x53CA;&#x4E2D;&#x65AD;&#x65F6;&#x95F4;) &#x5173;&#x4E8E;&#x5728;kernel space&#x4E2D;&#x7EBF;&#x7A0B;&#x548C;&#x4E2D;&#x65AD;&#x5728;CPU &#x5F00;&#x9500;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;.</li>
<li>Wait IO(IO &#x8BF7;&#x6C42;&#x7B49;&#x5F85;&#x65F6;&#x95F4;) &#x6240;&#x6709;&#x8FDB;&#x7A0B;&#x7EBF;&#x7A0B;&#x88AB;&#x963B;&#x585E;&#x7B49;&#x5F85;&#x5B8C;&#x6210;&#x4E00;&#x6B21;IO &#x8BF7;&#x6C42;&#x6240;&#x5360;CPU &#x5F00;&#x9500;idle&#x7684;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;.</li>
<li>Idle(&#x7A7A;&#x95F2;) &#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7A7A;&#x95F2;&#x72B6;&#x6001;&#x7684;&#x8FDB;&#x7A0B;&#x5728;CPU &#x5904;&#x7406;&#x5668;&#x4E2D;&#x5F00;&#x9500;&#x7684;&#x65F6;&#x95F4;&#x767E;&#x5206;&#x6BD4;.</li>
</ul>
<h1 id="40-cpu-&#x6027;&#x80FD;&#x76D1;&#x63A7;">4.0 CPU &#x6027;&#x80FD;&#x76D1;&#x63A7;</h1>
<p>&#x7406;&#x89E3;&#x8FD0;&#x884C;&#x961F;&#x5217;,&#x5229;&#x7528;&#x7387;,&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x5BF9;&#x600E;&#x6837;CPU &#x6027;&#x80FD;&#x6700;&#x4F18;&#x5316;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;.&#x65E9;&#x671F;&#x63D0;&#x53CA;&#x5230;,&#x6027;&#x80FD;&#x662F;&#x76F8;&#x5BF9;&#x4E8E;&#x57FA;&#x51C6;&#x7EBF;&#x6570;&#x636E;&#x7684;.&#x5728;&#x4E00;&#x4E9B;&#x7CFB;&#x7EDF;&#x4E2D;,&#x901A;&#x5E38;&#x9884;&#x671F;&#x6240;&#x8FBE;&#x5230;&#x7684;&#x6027;&#x80FD;&#x5305;&#x62EC;:</p>
<ul>
<li>Run Queues &#x6BCF;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x5E94;&#x8BE5;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x4E0D;&#x8D85;&#x8FC7;13&#x4E2A;&#x7EBF;&#x7A0B;.&#x4F8B;&#x5B50;,&#x4E00;&#x4E2A;&#x53CC;&#x6838;&#x5904;&#x7406;&#x5668;&#x5E94;&#x8BE5;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x4E0D;&#x8981;&#x8D85;&#x8FC7;6 &#x4E2A;&#x7EBF;&#x7A0B;.</li>
<li>CPU Utiliation &#x5982;&#x679C;&#x4E00;&#x4E2A;CPU &#x88AB;&#x5145;&#x5206;&#x4F7F;&#x7528;,&#x5229;&#x7528;&#x7387;&#x5206;&#x7C7B;&#x4E4B;&#x95F4;&#x5747;&#x8861;&#x7684;&#x6BD4;&#x4F8B;&#x5E94;&#x8BE5;&#x662F;<ul>
<li>65% 70% User Time</li>
<li>30% 35% System Time</li>
<li>0% 5% Idle Time</li>
</ul>
</li>
<li>Context Switches &#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x7684;&#x6570;&#x76EE;&#x76F4;&#x63A5;&#x5173;&#x7CFB;&#x5230;CPU &#x7684;&#x4F7F;&#x7528;&#x7387;,&#x5982;&#x679C;CPU &#x5229;&#x7528;&#x7387;&#x4FDD;&#x6301;&#x5728;&#x4E0A;&#x8FF0;&#x5747;&#x8861;&#x72B6;&#x6001;&#x65F6;,&#x5927;&#x91CF;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x662F;&#x6B63;&#x5E38;&#x7684;.&#x5F88;&#x591A;Linux &#x4E0A;&#x7684;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x8FD9;&#x4E9B;&#x72B6;&#x6001;&#x503C;,&#x9996;&#x5148;&#x5C31;&#x662F; vmstat &#x548C; top &#x8FD9;2&#x4E2A;&#x5DE5;&#x5177;.</li>
</ul>
<h2 id="41-vmstat-&#x5DE5;&#x5177;&#x7684;&#x4F7F;&#x7528;">4.1 vmstat &#x5DE5;&#x5177;&#x7684;&#x4F7F;&#x7528;</h2>
<p>vmstat &#x5DE5;&#x5177;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x4F4E;&#x5F00;&#x9500;&#x7684;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x89C2;&#x5BDF;&#x65B9;&#x5F0F;.&#x56E0;&#x4E3A; vmstat &#x672C;&#x8EAB;&#x5C31;&#x662F;&#x4F4E;&#x5F00;&#x9500;&#x5DE5;&#x5177;,&#x5728;&#x975E;&#x5E38;&#x9AD8;&#x8D1F;&#x8377;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;,&#x4F60;&#x9700;&#x8981;&#x67E5;&#x770B;&#x5E76;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x7684;&#x5065;&#x5EB7;&#x60C5;&#x51B5;,&#x5728;&#x63A7;&#x5236;&#x7A97;&#x53E3;&#x8FD8;&#x662F;&#x80FD;&#x591F;&#x4F7F;&#x7528;vmstat &#x8F93;&#x51FA;&#x7ED3;&#x679C;.&#x8FD9;&#x4E2A;&#x5DE5;&#x5177;&#x8FD0;&#x884C;&#x5728;2&#x79CD;&#x6A21;&#x5F0F;&#x4E0B;:average &#x548C; sample &#x6A21;&#x5F0F;.sample &#x6A21;&#x5F0F;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#x6D4B;&#x91CF;&#x72B6;&#x6001;&#x503C;.&#x8FD9;&#x4E2A;&#x6A21;&#x5F0F;&#x5BF9;&#x4E8E;&#x7406;&#x89E3;&#x5728;&#x6301;&#x7EED;&#x8D1F;&#x8377;&#x4E0B;&#x7684;&#x6027;&#x80FD;&#x8868;&#x73B0;,&#x5F88;&#x6709;&#x5E2E;&#x52A9;.&#x4E0B;&#x9762;&#x5C31;&#x662F;vmstat &#x8FD0;&#x884C;1&#x79D2;&#x95F4;&#x9694;&#x7684;&#x793A;&#x4F8B;:</p>
<blockquote>
<p># vmstat 1</p>
<p>procs memory swap io system cpu</p>
</blockquote>
<table>
<thead>
<tr>
<th>r</th>
<th>b</th>
<th>swpd</th>
<th>free</th>
<th>buff</th>
<th>cache</th>
<th>si</th>
<th>so</th>
<th>bi</th>
<th>bo</th>
<th>in</th>
<th>cs</th>
<th>us</th>
<th>sy</th>
<th>id</th>
<th>wa</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>104300</td>
<td>16800</td>
<td>95328</td>
<td>72200</td>
<td>0</td>
<td>0</td>
<td>5</td>
<td>26</td>
<td>7</td>
<td>14</td>
<td>4</td>
<td>1</td>
<td>95</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>104300</td>
<td>16800</td>
<td>95328</td>
<td>72200</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>24</td>
<td>1021</td>
<td>64</td>
<td>1</td>
<td>1</td>
<td>98</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>104300</td>
<td>16800</td>
<td>95328</td>
<td>72200</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1009</td>
<td>59</td>
<td>1</td>
<td>1</td>
<td>98</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>The vmstat CPU statistics Field Description</p>
<ul>
<li>r The amount of threads in the run queue. These are threads that are runnable, but the CPU is notavailable to execute them.&#x5F53;&#x524D;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x4E2D;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x76EE;.&#x4EE3;&#x8868;&#x7EBF;&#x7A0B;&#x5904;&#x4E8E;&#x53EF;&#x8FD0;&#x884C;&#x72B6;&#x6001;,&#x4F46;CPU &#x8FD8;&#x672A;&#x80FD;&#x6267;&#x884C;.</li>
<li>b This is the number of processes blocked and waiting on IO requests to finish.&#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x963B;&#x585E;&#x5E76;&#x7B49;&#x5F85;IO &#x8BF7;&#x6C42;&#x5B8C;&#x6210;&#x7684;&#x6570;&#x76EE;</li>
<li>in This is the number of interrupts being processed.&#x5F53;&#x524D;&#x4E2D;&#x65AD;&#x88AB;&#x5904;&#x7406;&#x7684;&#x6570;&#x76EE;</li>
<li>cs This is the number of context switches currently happening on the system.&#x5F53;&#x524D;kernel system&#x4E2D;,&#x53D1;&#x751F;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x7684;&#x6570;&#x76EE;</li>
<li>us This is the percentage of user CPU utilization.CPU &#x5229;&#x7528;&#x7387;&#x7684;&#x767E;&#x5206;&#x6BD4;</li>
<li>sys This is the percentage of kernel and interrupts utilization.&#x5185;&#x6838;&#x548C;&#x4E2D;&#x65AD;&#x5229;&#x7528;&#x7387;&#x7684;&#x767E;&#x5206;&#x6BD4;</li>
<li>wa This is the percentage of idle processor time due to the fact that ALL runnable threads are blocked waiting on IO.&#x6240;&#x6709;&#x53EF;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x7EBF;&#x7A0B;&#x88AB;&#x963B;&#x585E;&#x5728;&#x7B49;&#x5F85;IO &#x8BF7;&#x6C42;&#x7684;&#x767E;&#x5206;&#x6BD4;</li>
<li>id This is the percentage of time that the CPU is completely idle.CPU &#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x7684;&#x767E;&#x5206;&#x6BD4;</li>
</ul>
<h2 id="42-&#x6848;&#x4F8B;&#x5B66;&#x4E60;&#x6301;&#x7EED;&#x7684;cpu-&#x5229;&#x7528;&#x7387;">4.2 &#x6848;&#x4F8B;&#x5B66;&#x4E60;:&#x6301;&#x7EED;&#x7684;CPU &#x5229;&#x7528;&#x7387;</h2>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;,&#x8FD9;&#x4E2A;&#x7CFB;&#x7EDF;&#x88AB;&#x5145;&#x5206;&#x5229;&#x7528;</p>
<blockquote>
<p># vmstat 1</p>
<p>procs memory swap io system cpu</p>
</blockquote>
<table>
<thead>
<tr>
<th>r</th>
<th>b</th>
<th>swpd</th>
<th>free</th>
<th>buff</th>
<th>cache</th>
<th>si</th>
<th>so</th>
<th>bi</th>
<th>bo</th>
<th>in</th>
<th>cs</th>
<th>us</th>
<th>sy</th>
<th>wa</th>
<th>id</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>0</td>
<td>206564</td>
<td>15092</td>
<td>80336</td>
<td>176080</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>718</td>
<td>26</td>
<td>81</td>
<td>19</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>206564</td>
<td>14772</td>
<td>80336</td>
<td>176120</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>758</td>
<td>23</td>
<td>96</td>
<td>4</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>206564</td>
<td>14208</td>
<td>80336</td>
<td>176136</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>820</td>
<td>20</td>
<td>96</td>
<td>4</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>206956</td>
<td>13884</td>
<td>79180</td>
<td>175964</td>
<td>0</td>
<td>412</td>
<td>0</td>
<td>2680</td>
<td>1008</td>
<td>80</td>
<td>93</td>
<td>7</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>207348</td>
<td>14448</td>
<td>78800</td>
<td>175576</td>
<td>0</td>
<td>412</td>
<td>0</td>
<td>412</td>
<td>763</td>
<td>70</td>
<td>84</td>
<td>16</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>207348</td>
<td>15756</td>
<td>78800</td>
<td>175424</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>874</td>
<td>25</td>
<td>89</td>
<td>11</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>207348</td>
<td>16368</td>
<td>78800</td>
<td>175596</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>940</td>
<td>24</td>
<td>86</td>
<td>14</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>207348</td>
<td>16600</td>
<td>78800</td>
<td>175604</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>929</td>
<td>27</td>
<td>95</td>
<td>3</td>
<td>0</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>207348</td>
<td>16976</td>
<td>78548</td>
<td>175876</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>2508</td>
<td>969</td>
<td>35</td>
<td>93</td>
<td>7</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
<td>207348</td>
<td>16216</td>
<td>78548</td>
<td>175704</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>874</td>
<td>36</td>
<td>93</td>
<td>6</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
<td>207348</td>
<td>16424</td>
<td>78548</td>
<td>175776</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>850</td>
<td>26</td>
<td>77</td>
<td>23</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>207348</td>
<td>17496</td>
<td>78556</td>
<td>175840</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>736</td>
<td>23</td>
<td>83</td>
<td>17</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>207348</td>
<td>17680</td>
<td>78556</td>
<td>175868</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>861</td>
<td>21</td>
<td>91</td>
<td>8</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>&#x6839;&#x636E;&#x89C2;&#x5BDF;&#x503C;,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4EE5;&#x4E0B;&#x7ED3;&#x8BBA;:</p>
<ul>
<li>1,&#x6709;&#x5927;&#x91CF;&#x7684;&#x4E2D;&#x65AD;(in) &#x548C;&#x8F83;&#x5C11;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;(cs).&#x8FD9;&#x610F;&#x5473;&#x7740;&#x4E00;&#x4E2A;&#x5355;&#x4E00;&#x7684;&#x8FDB;&#x7A0B;&#x5728;&#x4EA7;&#x751F;&#x5BF9;&#x786C;&#x4EF6;&#x8BBE;&#x5907;&#x7684;&#x8BF7;&#x6C42;.</li>
<li>2,&#x8FDB;&#x4E00;&#x6B65;&#x663E;&#x793A;&#x67D0;&#x5355;&#x4E2A;&#x5E94;&#x7528;,user time(us) &#x7ECF;&#x5E38;&#x5728;85%&#x6216;&#x8005;&#x66F4;&#x591A;.&#x8003;&#x8651;&#x5230;&#x8F83;&#x5C11;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;,&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x5E94;&#x8BE5;&#x8FD8;&#x5728;&#x5904;&#x7406;&#x5668;&#x4E2D;&#x88AB;&#x5904;&#x7406;.</li>
<li>3,&#x8FD0;&#x884C;&#x961F;&#x5217;&#x8FD8;&#x5728;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x6027;&#x80FD;&#x8303;&#x56F4;&#x5185;,&#x5176;&#x4E2D;&#x6709;2&#x4E2A;&#x5730;&#x65B9;,&#x662F;&#x8D85;&#x51FA;&#x4E86;&#x5141;&#x8BB8;&#x9650;&#x5236;.</li>
</ul>
<h2 id="43-&#x6848;&#x4F8B;&#x5B66;&#x4E60;&#x8D85;&#x8D1F;&#x8377;&#x8C03;&#x5EA6;">4.3 &#x6848;&#x4F8B;&#x5B66;&#x4E60;:&#x8D85;&#x8D1F;&#x8377;&#x8C03;&#x5EA6;</h2>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;,&#x5185;&#x6838;&#x8C03;&#x5EA6;&#x4E2D;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x5904;&#x4E8E;&#x9971;&#x548C;</p>
<p># vmstat 1</p>
<p>procs memory swap io system cpu</p>
<table>
<thead>
<tr>
<th>r</th>
<th>b</th>
<th>swpd</th>
<th>free</th>
<th>buff</th>
<th>cache</th>
<th>si</th>
<th>so</th>
<th>bi</th>
<th>bo</th>
<th>in</th>
<th>cs</th>
<th>us</th>
<th>sy</th>
<th>wa</th>
<th>id</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>1</td>
<td>207740</td>
<td>98476</td>
<td>81344</td>
<td>180972</td>
<td>0</td>
<td>0</td>
<td>2496</td>
<td>0</td>
<td>900</td>
<td>2883</td>
<td>4</td>
<td>12</td>
<td>57</td>
<td>27</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>207740</td>
<td>96448</td>
<td>83304</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>1968</td>
<td>328</td>
<td>810</td>
<td>2559</td>
<td>8</td>
<td>9</td>
<td>83</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>207740</td>
<td>94404</td>
<td>85348</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>2044</td>
<td>0</td>
<td>829</td>
<td>2879</td>
<td>9</td>
<td>6</td>
<td>78</td>
<td>7</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>207740</td>
<td>92576</td>
<td>87176</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>1828</td>
<td>0</td>
<td>689</td>
<td>2088</td>
<td>3</td>
<td>9</td>
<td>78</td>
<td>10</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>207740</td>
<td>91300</td>
<td>88452</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>1276</td>
<td>0</td>
<td>565</td>
<td>2182</td>
<td>7</td>
<td>6</td>
<td>83</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>207740</td>
<td>90124</td>
<td>89628</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>1176</td>
<td>0</td>
<td>551</td>
<td>2219</td>
<td>2</td>
<td>7</td>
<td>91</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>207740</td>
<td>89240</td>
<td>90512</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>880</td>
<td>520</td>
<td>443</td>
<td>907</td>
<td>22</td>
<td>10</td>
<td>67</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>3</td>
<td>207740</td>
<td>88056</td>
<td>91680</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>1168</td>
<td>0</td>
<td>628</td>
<td>1248</td>
<td>12</td>
<td>11</td>
<td>77</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>207740</td>
<td>86852</td>
<td>92880</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>1200</td>
<td>0</td>
<td>654</td>
<td>1505</td>
<td>6</td>
<td>7</td>
<td>87</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>1</td>
<td>207740</td>
<td>85736</td>
<td>93996</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>1116</td>
<td>0</td>
<td>526</td>
<td>1512</td>
<td>5</td>
<td>10</td>
<td>85</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>207740</td>
<td>84844</td>
<td>94888</td>
<td>180984</td>
<td>0</td>
<td>0</td>
<td>892</td>
<td>0</td>
<td>438</td>
<td>1556</td>
<td>6</td>
<td>4</td>
<td>90</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>&#x6839;&#x636E;&#x89C2;&#x5BDF;&#x503C;,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4EE5;&#x4E0B;&#x7ED3;&#x8BBA;:</p>
<ul>
<li>1,&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x6570;&#x76EE;&#x9AD8;&#x4E8E;&#x4E2D;&#x65AD;&#x6570;&#x76EE;,&#x8BF4;&#x660E;kernel&#x4E2D;&#x76F8;&#x5F53;&#x6570;&#x91CF;&#x7684;&#x65F6;&#x95F4;&#x90FD;&#x5F00;&#x9500;&#x5728;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x7EBF;&#x7A0B;.</li>
<li>2,&#x5927;&#x91CF;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x5C06;&#x5BFC;&#x81F4;CPU &#x5229;&#x7528;&#x7387;&#x5206;&#x7C7B;&#x4E0D;&#x5747;&#x8861;.&#x5F88;&#x660E;&#x663E;&#x5B9E;&#x9645;&#x4E0A;&#x7B49;&#x5F85;io &#x8BF7;&#x6C42;&#x7684;&#x767E;&#x5206;&#x6BD4;(wa)&#x975E;&#x5E38;&#x9AD8;,&#x4EE5;&#x53CA;user time&#x767E;&#x5206;&#x6BD4;&#x975E;&#x5E38;&#x4F4E;(us).</li>
<li>3,&#x56E0;&#x4E3A;CPU &#x90FD;&#x963B;&#x585E;&#x5728;IO&#x8BF7;&#x6C42;&#x4E0A;,&#x6240;&#x4EE5;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x91CC;&#x4E5F;&#x6709;&#x76F8;&#x5F53;&#x6570;&#x76EE;&#x7684;&#x53EF;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x7EBF;&#x7A0B;&#x5728;&#x7B49;&#x5F85;&#x6267;&#x884C;.</li>
</ul>
<h2 id="44-mpstat-&#x5DE5;&#x5177;&#x7684;&#x4F7F;&#x7528;">4.4 mpstat &#x5DE5;&#x5177;&#x7684;&#x4F7F;&#x7528;</h2>
<p>&#x5982;&#x679C;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x5728;&#x591A;&#x5904;&#x7406;&#x5668;&#x82AF;&#x7247;&#x4E0A;,&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; mpstat &#x547D;&#x4EE4;&#x6765;&#x76D1;&#x63A7;&#x6BCF;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x82AF;&#x7247;.Linux &#x5185;&#x6838;&#x89C6;&#x53CC;&#x6838;&#x5904;&#x7406;&#x5668;&#x4E3A;2 CPU&apos;s,&#x56E0;&#x6B64;&#x4E00;&#x4E2A;&#x53CC;&#x6838;&#x5904;&#x7406;&#x5668;&#x7684;&#x53CC;&#x5185;&#x6838;&#x5C31;&#x62A5;&#x544A;&#x6709;4 CPU&apos;s &#x53EF;&#x7528;.</p>
<p>mpstat &#x547D;&#x4EE4;&#x7ED9;&#x51FA;&#x7684;CPU &#x5229;&#x7528;&#x7387;&#x7EDF;&#x8BA1;&#x503C;&#x5927;&#x81F4;&#x548C; vmstat &#x4E00;&#x81F4;,&#x4F46;&#x662F; mpstat &#x53EF;&#x4EE5;&#x7ED9;&#x51FA;&#x57FA;&#x4E8E;&#x5355;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x7684;&#x7EDF;&#x8BA1;&#x503C;.</p>
<blockquote>
<p># mpstat -P ALL 1</p>
<p>Linux 2.4.2120.</p>
<p>ELsmp (localhost.localdomain) 05/23/2006</p>
<p>05:17:31 PM CPU %user %nice %system %idle intr/s</p>
<p>05:17:32 PM all 0.00 0.00 3.19 96.53 13.27</p>
<p>05:17:32 PM 0 0.00 0.00 0.00 100.00 0.00</p>
<p>05:17:32 PM 1 1.12 0.00 12.73 86.15 13.27</p>
<p>05:17:32 PM 2 0.00 0.00 0.00 100.00 0.00</p>
<p>05:17:32 PM 3 0.00 0.00 0.00 100.00 0.00</p>
</blockquote>
<h2 id="45-&#x6848;&#x4F8B;&#x5B66;&#x4E60;-&#x672A;&#x5145;&#x5206;&#x4F7F;&#x7528;&#x7684;&#x5904;&#x7406;&#x91CF;">4.5 &#x6848;&#x4F8B;&#x5B66;&#x4E60;: &#x672A;&#x5145;&#x5206;&#x4F7F;&#x7528;&#x7684;&#x5904;&#x7406;&#x91CF;</h2>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;,&#x4E3A;4 CPU&#x6838;&#x5FC3;&#x53EF;&#x7528;.&#x5176;&#x4E2D;2&#x4E2A;CPU &#x4E3B;&#x8981;&#x5904;&#x7406;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;(CPU 0 &#x548C;1).&#x7B2C;3&#x4E2A;&#x6838;&#x5FC3;&#x5904;&#x7406;&#x6240;&#x6709;&#x5185;&#x6838;&#x548C;&#x5176;&#x4ED6;&#x7CFB;&#x7EDF;&#x529F;&#x80FD;(CPU 3).&#x7B2C;4&#x4E2A;&#x6838;&#x5FC3;&#x5904;&#x4E8E;idle(CPU 2).&#x4F7F;&#x7528; top &#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6709;3&#x4E2A;&#x8FDB;&#x7A0B;&#x5DEE;&#x4E0D;&#x591A;&#x5B8C;&#x5168;&#x5360;&#x7528;&#x4E86;&#x6574;&#x4E2A;CPU &#x6838;&#x5FC3;.</p>
<blockquote>
<p>#top d1</p>
<p>top 23:08:53 up 8:34, 3 users, load average: 0.91, 0.37, 0.13</p>
<p>Tasks: 190 total, 4 running, 186 sleeping, 0 stopped, 0 zombie</p>
<p>Cpu(s): 75.2% us, 0.2% sy, 0.0% ni, 24.5% id, 0.0% wa, 0.0% hi, 0.0% si</p>
<p>Mem: 2074736k total, 448684k used, 1626052k free, 73756k buffers</p>
<p>Swap: 4192956k total, 0k used, 4192956k free, 259044k cached</p>
<p>PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND</p>
<p>15957 nobody 25 0 2776 280 224 R 100 20.5 0:25.48 php</p>
<p>15959 mysql 25 0 2256 280 224 R 100 38.2 0:17.78 mysqld</p>
<p>15960 apache 25 0 2416 280 224 R 100 15.7 0:11.20 httpd</p>
<p>15901 root 16 0 2780 1092 800 R 1 0.1 0:01.59 top</p>
<p>1 root 16 0 1780 660 572 S 0 0.0 0:00.64 init</p>
<p>#mpstat &#x2013;P ALL 1</p>
<p>Linux 2.4.2120.</p>
<p>ELsmp (localhost.localdomain) 05/23/2006</p>
<p>05:17:31 PM CPU %user %nice %system %idle intr/s</p>
<p>05:17:32 PM all 81.52 0.00 18.48 21.17 130.58</p>
<p>05:17:32 PM 0 83.67 0.00 17.35 0.00 115.31</p>
<p>05:17:32 PM 1 80.61 0.00 19.39 0.00 13.27</p>
<p>05:17:32 PM 2 0.00 0.00 16.33 84.66 2.01</p>
<p>05:17:32 PM 3 79.59 0.00 21.43 0.00 0.00</p>
<p>05:17:32 PM CPU %user %nice %system %idle intr/s</p>
<p>05:17:33 PM all 85.86 0.00 14.14 25.00 116.49</p>
<p>05:17:33 PM 0 88.66 0.00 12.37 0.00 116.49</p>
<p>05:17:33 PM 1 80.41 0.00 19.59 0.00 0.00</p>
<p>05:17:33 PM 2 0.00 0.00 0.00 100.00 0.00</p>
<p>05:17:33 PM 3 83.51 0.00 16.49 0.00 0.00</p>
<p>05:17:33 PM CPU %user %nice %system %idle intr/s</p>
<p>05:17:34 PM all 82.74 0.00 17.26 25.00 115.31</p>
<p>05:17:34 PM 0 85.71 0.00 13.27 0.00 115.31</p>
<p>05:17:34 PM 1 78.57 0.00 21.43 0.00 0.00</p>
<p>05:17:34 PM 2 0.00 0.00 0.00 100.00 0.00</p>
<p>05:17:34 PM 3 92.86 0.00 9.18 0.00 0.00</p>
<p>05:17:34 PM CPU %user %nice %system %idle intr/s</p>
<p>05:17:35 PM all 87.50 0.00 12.50 25.00 115.31</p>
<p>05:17:35 PM 0 91.84 0.00 8.16 0.00 114.29</p>
<p>05:17:35 PM 1 90.82 0.00 10.20 0.00 1.02</p>
<p>05:17:35 PM 2 0.00 0.00 0.00 100.00 0.00</p>
<p>05:17:35 PM 3 81.63 0.00 15.31 0.00 0.00</p>
</blockquote>
<p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; ps &#x547D;&#x4EE4;&#x901A;&#x8FC7;&#x67E5;&#x770B; PSR &#x8FD9;&#x5217;,&#x68C0;&#x67E5;&#x54EA;&#x4E2A;&#x8FDB;&#x7A0B;&#x5728;&#x5360;&#x7528;&#x4E86;&#x54EA;&#x4E2A;CPU.</p>
<blockquote>
<p># while :; do</p>
<p>ps -eo pid,ni,pri,pcpu,psr,comm | grep &apos;mysqld&apos;;</p>
<p>sleep 1;</p>
<p>done</p>
<p>PID NI PRI %CPU PSR COMMAND</p>
<p>15775 0 15 86.0 3 mysqld</p>
<p>PID NI PRI %CPU PSR COMMAND</p>
<p>15775 0 14 94.0 3 mysqld</p>
<p>PID NI PRI %CPU PSR COMMAND</p>
<p>15775 0 14 96.6 3 mysqld</p>
<p>PID NI PRI %CPU PSR COMMAND</p>
<p>15775 0 14 98.0 3 mysqld</p>
<p>PID NI PRI %CPU PSR COMMAND</p>
<p>15775 0 14 98.8 3 mysqld</p>
<p>PID NI PRI %CPU PSR COMMAND</p>
<p>15775 0 14 99.3 3 mysqld</p>
</blockquote>
<h2 id="46-&#x7ED3;&#x8BBA;">4.6 &#x7ED3;&#x8BBA;</h2>
<p>&#x76D1;&#x63A7; CPU &#x6027;&#x80FD;&#x7531;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x90E8;&#x5206;&#x7EC4;&#x6210;:</p>
<ol>
<li>&#x68C0;&#x67E5;system&#x7684;&#x8FD0;&#x884C;&#x961F;&#x5217;,&#x4EE5;&#x53CA;&#x786E;&#x5B9A;&#x4E0D;&#x8981;&#x8D85;&#x51FA;&#x6BCF;&#x4E2A;&#x5904;&#x7406;&#x5668;3&#x4E2A;&#x53EF;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x7EBF;&#x7A0B;&#x7684;&#x9650;&#x5236;.</li>
<li>&#x786E;&#x5B9A;CPU &#x5229;&#x7528;&#x7387;&#x4E2D;user/system&#x6BD4;&#x4F8B;&#x7EF4;&#x6301;&#x5728;70/30</li>
<li>&#x5F53;CPU &#x5F00;&#x9500;&#x66F4;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x5728;system mode,&#x90A3;&#x5C31;&#x8BF4;&#x660E;&#x5DF2;&#x7ECF;&#x8D85;&#x8D1F;&#x8377;&#x5E76;&#x4E14;&#x5E94;&#x8BE5;&#x5C1D;&#x8BD5;&#x91CD;&#x65B0;&#x8C03;&#x5EA6;&#x4F18;&#x5148;&#x7EA7;</li>
<li>&#x5F53;I/O &#x5904;&#x7406;&#x5F97;&#x5230;&#x589E;&#x957F;,CPU &#x8303;&#x7574;&#x7684;&#x5E94;&#x7528;&#x5904;&#x7406;&#x5C06;&#x53D7;&#x5230;&#x5F71;&#x54CD;</li>
</ol>
<h1 id="50-virtual-memory-&#x4ECB;&#x7ECD;">5.0 Virtual Memory &#x4ECB;&#x7ECD;</h1>
<p>&#x865A;&#x62DF;&#x5185;&#x5B58;&#x5C31;&#x662F;&#x91C7;&#x7528;&#x786C;&#x76D8;&#x5BF9;&#x7269;&#x7406;&#x5185;&#x5B58;&#x8FDB;&#x884C;&#x6269;&#x5C55;,&#x6240;&#x4EE5;&#x5BF9;&#x53EF;&#x7528;&#x5185;&#x5B58;&#x7684;&#x589E;&#x52A0;&#x662F;&#x8981;&#x76F8;&#x5BF9;&#x5728;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x8303;&#x56F4;&#x5185;&#x7684;.&#x5185;&#x6838;&#x4F1A;&#x5199;&#x5F53;&#x524D;&#x672A;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x5757;&#x7684;&#x5185;&#x5BB9;&#x5230;&#x786C;&#x76D8;&#x4E0A;,&#x6B64;&#x65F6;&#x8FD9;&#x90E8;&#x5206;&#x5185;&#x5B58;&#x88AB;&#x7528;&#x4E8E;&#x5176;&#x5B83;&#x7528;&#x9014;.&#x5F53;&#x518D;&#x4E00;&#x6B21;&#x9700;&#x8981;&#x539F;&#x59CB;&#x5185;&#x5BB9;&#x65F6;,&#x6B64;&#x65F6;&#x518D;&#x8BFB;&#x56DE;&#x5230;&#x5185;&#x5B58;&#x4E2D;.&#x8FD9;&#x5BF9;&#x4E8E;&#x7528;&#x6237;&#x6765;&#x8BF4;,&#x662F;&#x5B8C;&#x5168;&#x900F;&#x660E;&#x7684;;&#x5728;Linux &#x4E0B;&#x8FD0;&#x884C;&#x7684;&#x7A0B;&#x5E8F;&#x80FD;&#x591F;&#x770B;&#x5230;,&#x4E5F;&#x4EC5;&#x4EC5;&#x662F;&#x5927;&#x91CF;&#x7684;&#x53EF;&#x7528;&#x5185;&#x5B58;,&#x540C;&#x65F6;&#x4E5F;&#x4E0D;&#x4F1A;&#x7559;&#x610F;&#x5230;,&#x5076;&#x5C14;&#x8FD8;&#x6709;&#x90E8;&#x5206;&#x662F;&#x9A7B;&#x7559;&#x5728;&#x78C1;&#x76D8;&#x4E0A;&#x7684;.&#x5F53;&#x7136;,&#x5728;&#x786C;&#x76D8;&#x4E0A;&#x8FDB;&#x884C;&#x8BFB;&#x548C;&#x5199;,&#x90FD;&#x662F;&#x5F88;&#x6162;&#x7684;(&#x5927;&#x7EA6;&#x4F1A;&#x6162;&#x4E0A;&#x5343;&#x500D;),&#x76F8;&#x5BF9;&#x4E8E;&#x4F7F;&#x7528;&#x771F;&#x5B9E;&#x5185;&#x5B58;&#x7684;&#x8BDD;,&#x56E0;&#x6B64;&#x7A0B;&#x5E8F;&#x65E0;&#x6CD5;&#x8FD0;&#x884C;&#x7684;&#x66F4;&#x5FEB;.&#x7528;&#x786C;&#x76D8;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x4F5C;&#x4E3A;Virtual Memory,&#x8FD9;&#x5C31;&#x88AB;&#x79F0;&#x4E3A;&quot;swap space&quot;(&#x4EA4;&#x6362;&#x7A7A;&#x95F4;).</p>
<h2 id="51-virtual-memory-pages">5.1 Virtual Memory Pages</h2>
<p>&#x865A;&#x62DF;&#x5185;&#x5B58;&#x88AB;&#x5206;&#x4E3A;&#x5F88;&#x591A; pages(&#x9875;),&#x5728;X86&#x67B6;&#x6784;&#x4E2D;,&#x6BCF;&#x4E2A;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x9875;&#x4E3A; 4KB.&#x5F53;&#x5185;&#x6838;&#x5199;&#x5185;&#x5B58;&#x5230;&#x78C1;&#x76D8;&#x6216;&#x8005;&#x8BFB;&#x78C1;&#x76D8;&#x5230;&#x5185;&#x5B58;,&#x8FD9;&#x5C31;&#x662F;&#x4E00;&#x6B21;&#x5199;&#x5185;&#x5B58;&#x5230;&#x9875;&#x7684;&#x8FC7;&#x7A0B;.&#x5185;&#x6838;&#x901A;&#x5E38;&#x662F;&#x5728;swap &#x5206;&#x533A;&#x548C;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x8FD9;&#x6837;&#x7684;&#x64CD;&#x4F5C;.</p>
<h2 id="52-kernel-memory-paging">5.2 Kernel Memory Paging</h2>
<p>&#x5185;&#x5B58;&#x5206;&#x9875;&#x5728;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x603B;&#x662F;&#x6D3B;&#x8DC3;&#x7684;,&#x4E0E;memory swapping(&#x5185;&#x5B58;&#x4EA4;&#x6362;)&#x4E4B;&#x95F4;&#x4E0D;&#x8981;&#x641E;&#x9519;&#x4E86;.&#x5185;&#x5B58;&#x5206;&#x9875;&#x662F;&#x6307;&#x5185;&#x6838;&#x4F1A;&#x5B9A;&#x671F;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5230;&#x786C;&#x76D8;,&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5C31;&#x662F;Memory Paging.&#x65E5;&#x590D;&#x4E00;&#x65E5;,&#x5E94;&#x7528;&#x6700;&#x7EC8;&#x5C06;&#x4F1A;&#x6D88;&#x8017;&#x6389;&#x6240;&#x6709;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;.&#x8003;&#x8651;&#x5230;&#x8FD9;&#x70B9;,&#x5185;&#x6838;&#x5C31;&#x5FC5;&#x987B;&#x7ECF;&#x5E38;&#x626B;&#x63CF;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x5E76;&#x4E14;&#x6536;&#x56DE;&#x5176;&#x4E2D;&#x672A;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x9875;,&#x7136;&#x540E;&#x518D;&#x91CD;&#x65B0;&#x5206;&#x914D;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7ED9;&#x5176;&#x4ED6;&#x5E94;&#x7528;&#x4F7F;&#x7528;.</p>
<h2 id="53-the-page-frame-reclaim-algorithmpfra&#x9875;&#x6846;&#x56DE;&#x6536;&#x7B97;&#x6CD5;">5.3 The Page Frame Reclaim Algorithm(PFRA)(&#x9875;&#x6846;&#x56DE;&#x6536;&#x7B97;&#x6CD5;)</h2>
<p>PFRA &#x5C31;&#x662F;OS &#x5185;&#x6838;&#x7528;&#x6765;&#x56DE;&#x6536;&#x5E76;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7684;&#x7B97;&#x6CD5;.PFRA &#x9009;&#x62E9;&#x54EA;&#x4E2A;&#x5185;&#x5B58;&#x9875;&#x88AB;&#x91CA;&#x653E;&#x662F;&#x57FA;&#x4E8E;&#x5185;&#x5B58;&#x9875;&#x7C7B;&#x578B;&#x7684;.&#x9875;&#x7C7B;&#x578B;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;:</p>
<ul>
<li>Unreclaimable &#x2013;&#x9501;&#x5B9A;&#x7684;&#xFF0C;&#x5185;&#x6838;&#x4FDD;&#x7559;&#x7684;&#x9875;&#x9762;</li>
<li>Swappable &#x2013;&#x533F;&#x540D;&#x7684;&#x5185;&#x5B58;&#x9875;</li>
<li>Syncable &#x2013;&#x901A;&#x8FC7;&#x786C;&#x76D8;&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x7684;&#x5185;&#x5B58;&#x9875;</li>
<li>Discardable &#x2013;&#x9759;&#x6001;&#x9875;&#x548C;&#x88AB;&#x4E22;&#x5F03;&#x7684;&#x9875;</li>
</ul>
<p>&#x9664;&#x4E86;&#x7B2C;&#x4E00;&#x79CD;&#xFF08;Unreclaimable&#xFF09;&#x4E4B;&#x5916;&#x5176;&#x4F59;&#x7684;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;PFRA&#x8FDB;&#x884C;&#x56DE;&#x6536;.&#x4E0E;PFRA &#x76F8;&#x5173;&#x7684;,&#x8FD8;&#x5305;&#x62EC;kswapd &#x5185;&#x6838;&#x7EBF;&#x7A0B;&#x4EE5;&#x53CA;Low On Memory Reclaiming(LMR&#x7B97;&#x6CD5;) &#x8FD9;2&#x79CD;&#x8FDB;&#x7A0B;&#x548C;&#x5B9E;&#x73B0;.</p>
<h2 id="54-kswapd">5.4 kswapd</h2>
<p>kswapd &#x8FDB;&#x7A0B;&#x8D1F;&#x8D23;&#x786E;&#x4FDD;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x603B;&#x662F;&#x5728;&#x88AB;&#x91CA;&#x653E;&#x4E2D;.&#x5B83;&#x76D1;&#x63A7;&#x5185;&#x6838;&#x4E2D;&#x7684;pages_high&#x548C;pages_low&#x9600;&#x503C;.&#x5982;&#x679C;&#x7A7A;&#x95F2;&#x5185;&#x5B58;&#x7684;&#x6570;&#x503C;&#x4F4E;&#x4E8E; pages_low,&#x5219;&#x6BCF;&#x6B21; kswapd &#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x626B;&#x63CF;&#x5E76;&#x5C1D;&#x8BD5;&#x91CA;&#x653E;32&#x4E2A;free pages.&#x5E76;&#x4E00;&#x76F4;&#x91CD;&#x590D;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;,&#x76F4;&#x5230;&#x7A7A;&#x95F2;&#x5185;&#x5B58;&#x7684;&#x6570;&#x503C;&#x9AD8;&#x4E8E; pages_high.kswapd &#x8FDB;&#x7A0B;&#x5B8C;&#x6210;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x64CD;&#x4F5C;:</p>
<ul>
<li>1,&#x5982;&#x679C;&#x8BE5;&#x9875;&#x5904;&#x4E8E;&#x672A;&#x4FEE;&#x6539;&#x72B6;&#x6001;,&#x5219;&#x5C06;&#x8BE5;&#x9875;&#x653E;&#x7F6E;&#x56DE;&#x7A7A;&#x95F2;&#x5217;&#x8868;&#x4E2D;.</li>
<li>2,&#x5982;&#x679C;&#x8BE5;&#x9875;&#x5904;&#x4E8E;&#x5DF2;&#x4FEE;&#x6539;&#x72B6;&#x6001;&#x5E76;&#x53EF;&#x5907;&#x4EFD;&#x56DE;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;,&#x5219;&#x5C06;&#x9875;&#x5185;&#x5BB9;&#x5199;&#x5165;&#x5230;&#x78C1;&#x76D8;.</li>
<li>3,&#x5982;&#x679C;&#x8BE5;&#x9875;&#x5904;&#x4E8E;&#x5DF2;&#x4FEE;&#x6539;&#x72B6;&#x6001;&#x4F46;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x78C1;&#x76D8;&#x5907;&#x4EFD;,&#x5219;&#x5C06;&#x9875;&#x5185;&#x5BB9;&#x5199;&#x5165;&#x5230;swap device.</li>
</ul>
<blockquote>
<p>#ps -ef | grep kswapd</p>
<p>root 30 1 0 23:01 ? 00:00:00 [kswapd0]</p>
</blockquote>
<h2 id="55-kernel-paging-with-pdflush">5.5 Kernel Paging with pdflush</h2>
<p>pdflush &#x8FDB;&#x7A0B;&#x8D1F;&#x8D23;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x548C;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x8FDB;&#x884C;&#x540C;&#x6B65;&#x64CD;&#x4F5C;.&#x4E5F;&#x5C31;&#x662F;&#x8BF4;,&#x5F53;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x540E;,pdflush &#x5C06;&#x8D1F;&#x8D23;&#x5199;&#x56DE;&#x5230;&#x78C1;&#x76D8;&#x4E0A;.</p>
<blockquote>
<p># ps -ef | grep pdflush</p>
<p>root 28 3 0 23:01 ? 00:00:00 [pdflush]</p>
<p>root 29 3 0 23:01 ? 00:00:00 [pdflush]</p>
</blockquote>
<p>&#x5F53;&#x5185;&#x5B58;&#x4E2D;&#x5B58;&#x5728;10% &#x7684;&#x810F;&#x9875;,pdflush &#x5C06;&#x88AB;&#x542F;&#x52A8;&#x540C;&#x6B65;&#x810F;&#x9875;&#x56DE;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x91CC;.&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x503C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;vm.dirty_background_ratio &#x6765;&#x8FDB;&#x884C;&#x8C03;&#x6574;.(Q:&#x4EC0;&#x4E48;&#x662F;&#x810F;&#x9875;?A:&#x7531;&#x4E8E;&#x5185;&#x5B58;&#x4E2D;&#x9875;&#x7F13;&#x5B58;&#x7684;&#x7F13;&#x5B58;&#x4F5C;&#x7528;,&#x5199;&#x64CD;&#x4F5C;&#x5B9E;&#x9645;&#x4E0A;&#x90FD;&#x662F;&#x5EF6;&#x8FDF;&#x7684;.&#x5F53;&#x9875;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6BD4;&#x78C1;&#x76D8;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x8FD8;&#x8981;&#x66F4;&#x65B0;&#x65F6;,&#x90A3;&#x4E48;&#x8BE5;&#x6570;&#x636E;&#x5C31;&#x88AB;&#x79F0;&#x505A;&#x810F;&#x9875;.)</p>
<blockquote>
<p># sysctl n vm.dirty_background_ratio</p>
<p>10</p>
</blockquote>
<p>&#x5728;&#x591A;&#x6570;&#x73AF;&#x5883;&#x4E0B;,Pdflush&#x4E0E;PFRA&#x662F;&#x72EC;&#x7ACB;&#x8FD0;&#x884C;&#x7684;,&#x5F53;&#x5185;&#x6838;&#x8C03;&#x7528;LMR&#x65F6;,LMR &#x5C31;&#x89E6;&#x53D1;pdflush&#x5C06;&#x810F;&#x9875;&#x5199;&#x5165;&#x5230;&#x78C1;&#x76D8;&#x91CC;.</p>
<p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p>
<p>&#x5728;2.4 &#x5185;&#x6838;&#x4E0B;,&#x4E00;&#x4E2A;&#x9AD8;&#x8D1F;&#x8377;&#x7684;&#x5185;&#x5B58;&#x73AF;&#x5883;&#x4E2D;,&#x7CFB;&#x7EDF;&#x5C06;&#x9047;&#x5230;&#x4EA4;&#x6362;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x65AD;&#x7684;&#x5D29;&#x6E83;.&#x8FD9;&#x662F;&#x56E0;&#x4E3A;PFRA &#x4ECE;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x8FDB;&#x7A0B;&#x4E2D;,&#x5077;&#x53D6;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x9875;&#x5E76;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528;.&#x5BFC;&#x81F4;&#x7ED3;&#x679C;&#x5C31;&#x662F;,&#x8FD9;&#x4E2A;&#x8FDB;&#x7A0B;&#x5982;&#x679C;&#x8981;&#x56DE;&#x6536;&#x90A3;&#x4E2A;&#x9875;&#x65F6;,&#x8981;&#x662F;&#x6CA1;&#x6709;&#x5C31;&#x4F1A;&#x5C1D;&#x8BD5;&#x518D;&#x53BB;&#x5077;&#x53D6;&#x8FD9;&#x4E2A;&#x9875;,&#x8FD9;&#x6837;&#x4E00;&#x6765;,&#x5C31;&#x8D8A;&#x6765;&#x8D8A;&#x7CDF;&#x7CD5;&#x4E86;.&#x5728;2.6 &#x5185;&#x6838;&#x4E0B;,&#x4F7F;&#x7528;&quot;Swap token&quot;&#x4FEE;&#x590D;&#x4E86;&#x8FD9;&#x4E2A;BUG,&#x7528;&#x6765;&#x9632;&#x6B62;PFRA &#x4E0D;&#x65AD;&#x4ECE;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x83B7;&#x53D6;&#x540C;&#x4E00;&#x4E2A;&#x9875;.</p>
<p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p>
<h2 id="56-&#x6848;&#x4F8B;&#x5B66;&#x4E60;&#x5927;&#x91CF;&#x7684;&#x5165;&#x53E3;io">5.6 &#x6848;&#x4F8B;&#x5B66;&#x4E60;:&#x5927;&#x91CF;&#x7684;&#x5165;&#x53E3;I/O</h2>
<p>vmstat &#x5DE5;&#x5177;&#x62A5;&#x544A;&#x91CC;&#x9664;&#x4E86;CPU &#x4F7F;&#x7528;&#x60C5;&#x51B5;,&#x8FD8;&#x5305;&#x62EC;&#x4E86;&#x865A;&#x62DF;&#x5185;&#x5B58;.&#x4EE5;&#x4E0B;&#x5C31;&#x662F;vmstat &#x8F93;&#x51FA;&#x4E2D;&#x5173;&#x4E8E;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x7684;&#x90E8;&#x5206;:</p>
<p>Table 2: The vmstat Memory Statistics</p>
<p>Field Description</p>
<ul>
<li>Swapd The amount of virtual memory in KB currently in use. As free memory reaches low thresholds, more data is paged to the swap device.&#x5F53;&#x524D;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x7684;&#x603B;&#x989D;(&#x5355;&#x4F4D;:KB).&#x7A7A;&#x95F2;&#x5185;&#x5B58;&#x8FBE;&#x5230;&#x6700;&#x4F4E;&#x7684;&#x9600;&#x503C;&#x65F6;,&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x88AB;&#x8F6C;&#x6362;&#x6210;&#x9875;&#x5230;&#x4EA4;&#x6362;&#x8BBE;&#x5907;&#x4E2D;.</li>
<li>Free The amount of physical RAM in kilobytes currently available to running applications.&#x5F53;&#x524D;&#x5185;&#x5B58;&#x4E2D;&#x53EF;&#x7528;&#x7A7A;&#x95F4;&#x5B57;&#x8282;&#x6570;.</li>
<li>Buff The amount of physical memory in kilobytes in the buffer cache as a result of read() and write() operations.&#x5F53;&#x524D;&#x5185;&#x5B58;&#x4E2D;&#x7528;&#x4E8E;read()&#x548C;write()&#x64CD;&#x4F5C;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x7F13;&#x5B58;&#x5B57;&#x8282;&#x6570;</li>
<li>Cache The amount of physical memory in kilobytes mapped into process address space.&#x5F53;&#x524D;&#x5185;&#x5B58;&#x4E2D;&#x6620;&#x5C04;&#x5230;&#x8FDB;&#x7A0B;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x5B57;&#x8282;&#x6570;</li>
<li>So The amount of data in kilobytes written to the swap disk.&#x5199;&#x5165;&#x4EA4;&#x6362;&#x7A7A;&#x95F4;&#x7684;&#x5B57;&#x8282;&#x6570;&#x603B;&#x989D;</li>
<li>Si The amount of data in kilobytes written from the swap disk back into RAM.&#x4ECE;&#x4EA4;&#x6362;&#x7A7A;&#x95F4;&#x5199;&#x56DE;&#x5185;&#x5B58;&#x7684;&#x5B57;&#x8282;&#x6570;&#x603B;&#x989D;</li>
<li>Bo The amount of disk blocks paged out from the RAM to the filesystem or swap device.&#x78C1;&#x76D8;&#x5757;&#x9875;&#x9762;&#x4ECE;&#x5185;&#x5B58;&#x5230;&#x6587;&#x4EF6;&#x6216;&#x4EA4;&#x6362;&#x8BBE;&#x5907;&#x7684;&#x603B;&#x989D;</li>
<li>Bi The amount of disk blocks paged into RAM from the filesystem or swap device.&#x78C1;&#x76D8;&#x5757;&#x9875;&#x9762;&#x4ECE;&#x6587;&#x4EF6;&#x6216;&#x4EA4;&#x6362;&#x8BBE;&#x5907;&#x5230;&#x5185;&#x5B58;&#x7684;&#x603B;&#x989D;</li>
</ul>
<p>&#x4EE5;&#x4E0B; vmstat &#x7684;&#x8F93;&#x51FA;&#x7ED3;&#x679C;,&#x5C31;&#x662F;&#x6F14;&#x793A;&#x4E00;&#x4E2A;&#x5728;I/O &#x5E94;&#x7528;&#x4E2D;,&#x865A;&#x62DF;&#x5185;&#x5B58;&#x5728;&#x9AD8;&#x8D1F;&#x8377;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x73AF;&#x5883;</p>
<blockquote>
<p># vmstat 3</p>
<p>procs memory swap io system cpu</p>
<p>r b swpd free buff cache si so bi bo in cs us sy id wa</p>
<p>3 2 809192 261556 79760 886880 416 0 8244 751 426 863 17 3 6 75</p>
<p>0 3 809188 194916 79820 952900 307 0 21745 1005 1189 2590 34 6 12 48</p>
<p>0 3 809188 162212 79840 988920 95 0 12107 0 1801 2633 2 2 3 94</p>
<p>1 3 809268 88756 79924 1061424 260 28 18377 113 1142 1694 3 5 3 88</p>
<p>1 2 826284 17608 71240 1144180 100 6140 25839 16380 1528 1179 19 9 12 61</p>
<p>2 1 854780 17688 34140 1208980 1 9535 25557 30967 1764 2238 43 13 16 28</p>
<p>0 8 867528 17588 32332 1226392 31 4384 16524 27808 1490 1634 41 10 7 43</p>
<p>4 2 877372 17596 32372 1227532 213 3281 10912 3337 678 932 33 7 3 57</p>
<p>1 2 885980 17800 32408 1239160 204 2892 12347 12681 1033 982 40 12 2 46</p>
<p>5 2 900472 17980 32440 1253884 24 4851 17521 4856 934 1730 48 12 13 26</p>
<p>1 1 904404 17620 32492 1258928 15 1316 7647 15804 919 978 49 9 17 25</p>
<p>4 1 911192 17944 32540 1266724 37 2263 12907 3547 834 1421 47 14 20 20</p>
<p>1 1 919292 17876 31824 1275832 1 2745 16327 2747 617 1421 52 11 23 14</p>
<p>5 0 925216 17812 25008 1289320 12 1975 12760 3181 772 1254 50 10 21 19</p>
<p>0 5 932860 17736 21760 1300280 8 2556 15469 3873 825 1258 49 13 24 15</p>
</blockquote>
<p>&#x6839;&#x636E;&#x89C2;&#x5BDF;&#x503C;,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4EE5;&#x4E0B;&#x7ED3;&#x8BBA;:</p>
<ol>
<li>&#x5927;&#x91CF;&#x7684;&#x78C1;&#x76D8;&#x5757;&#x9875;&#x9762;&#x6765;&#x81EA;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;(bi),&#x5F88;&#x660E;&#x663E;&#x5728;&#x8FDB;&#x7A0B;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x91CC;,&#x6570;&#x636E;&#x7F13;&#x5B58;&#x5728;&#x4E0D;&#x65AD;&#x7684;&#x589E;&#x957F;.</li>
<li>&#x5728;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x70B9;&#x4E0A;,&#x7A7A;&#x95F2;&#x5185;&#x5B58;(free) &#x59CB;&#x7EC8;&#x4FDD;&#x6301;&#x5728;17MB,&#x5373;&#x4F7F;&#x6570;&#x636E;&#x662F;&#x4ECE;&#x78C1;&#x76D8;&#x5230;&#x5206;&#x9875;&#x800C;&#x5728;&#x6D88;&#x8017;&#x7A7A;&#x95F2;RAM.</li>
<li>&#x4E3A;&#x4E86;&#x7EF4;&#x62A4;&#x7A7A;&#x95F2;&#x5217;&#x8868;, kswapd &#x4ECE;&#x8BFB;/&#x5199;&#x7F13;&#x5B58;&#x533A;(buff)&#x4E2D;&#x83B7;&#x53D6;&#x5185;&#x5B58;&#x5E76;&#x5206;&#x914D;&#x5230;&#x7A7A;&#x95F2;&#x5217;&#x8868;&#x91CC;.&#x5F88;&#x660E;&#x663E;&#x53EF;&#x4EE5;&#x770B;&#x5230;buffer cache(buff) &#x5728;&#x9010;&#x6E10;&#x7684;&#x51CF;&#x5C11;&#x4E2D;.</li>
<li>kswapd &#x8FDB;&#x7A0B;&#x5F53;&#x5199;&#x810F;&#x9875;&#x5230;&#x4EA4;&#x6362;&#x8BBE;&#x5907;(so)&#x65F6;,&#x5F88;&#x660E;&#x663E;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x7684;&#x5229;&#x7528;&#x7387;&#x662F;&#x9010;&#x6E10;&#x7684;&#x589E;&#x52A0;&#x4E2D;(swpd).</li>
</ol>
<h2 id="57-&#x7ED3;&#x8BBA;">5.7 &#x7ED3;&#x8BBA;</h2>
<p>&#x76D1;&#x63A7;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x6027;&#x80FD;&#x7531;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x90E8;&#x5206;&#x7EC4;&#x6210;:</p>
<ol>
<li>&#x5F53;&#x7CFB;&#x7EDF;&#x4E2D;&#x51FA;&#x73B0;&#x8F83;&#x91CD;&#x5927;&#x7684;&#x9875;&#x9519;&#x8BEF;,&#x8981;&#x83B7;&#x5F97;&#x6700;&#x597D;&#x7684;&#x54CD;&#x5E94;&#x65F6;&#x95F4;,&#x5C31;&#x8981;&#x4F7F;&#x5F97;memory caches(&#x5185;&#x5B58;&#x9AD8;&#x901F;&#x7F13;&#x5B58;)&#x8D85;&#x8FC7;disk caches(&#x78C1;&#x76D8;&#x9AD8;&#x901F;&#x7F13;&#x5B58;).</li>
<li>&#x8F83;&#x5C11;&#x7684;&#x7A7A;&#x95F2;&#x5185;&#x5B58;,&#x662F;&#x4EF6;&#x597D;&#x4E8B;&#x60C5;,&#x90A3;&#x610F;&#x5473;&#x7740;&#x7F13;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x66F4;&#x6709;&#x6548;&#x7387;.&#x9664;&#x975E;&#x5728;&#x4E0D;&#x65AD;&#x7684;&#x5199;&#x5165;swap device(&#x4EA4;&#x6362;&#x8BBE;&#x5907;)&#x548C;disk(&#x786C;&#x76D8;).</li>
<li>&#x5982;&#x679C;&#x7CFB;&#x7EDF;&#x4E0D;&#x65AD;&#x62A5;&#x544A;,swap device&#x603B;&#x662F;&#x7E41;&#x5FD9;&#x4E2D;,&#x90A3;&#x5C31;&#x610F;&#x5473;&#x7740;&#x5185;&#x5B58;&#x5DF2;&#x7ECF;&#x4E0D;&#x8DB3;,&#x9700;&#x8981;&#x5347;&#x7EA7;&#x4E86;.</li>
</ol>
<h1 id="60-io-&#x76D1;&#x63A7;&#x4ECB;&#x7ECD;">6.0 I/O &#x76D1;&#x63A7;&#x4ECB;&#x7ECD;</h1>
<p>&#x78C1;&#x76D8;I/O &#x5B50;&#x7CFB;&#x7EDF;&#x662F;Linux &#x7CFB;&#x7EDF;&#x4E2D;&#x6700;&#x6162;&#x7684;&#x90E8;&#x5206;.&#x8FD9;&#x4E2A;&#x4E3B;&#x8981;&#x662F;&#x5F52;&#x4E8E;CPU&#x5230;&#x7269;&#x7406;&#x64CD;&#x4F5C;&#x78C1;&#x76D8;&#x4E4B;&#x95F4;&#x8DDD;&#x79BB;(&#x76D8;&#x7247;&#x65CB;&#x8F6C;&#x4EE5;&#x53CA;&#x5BFB;&#x9053;).&#x5982;&#x679C;&#x62FF;&#x8BFB;&#x53D6;&#x78C1;&#x76D8;&#x548C;&#x5185;&#x5B58;&#x7684;&#x65F6;&#x95F4;&#x4F5C;&#x6BD4;&#x8F83;&#x5C31;&#x662F;&#x5206;&#x949F;&#x7EA7;&#x5230;&#x79D2;&#x7EA7;,&#x8FD9;&#x5C31;&#x50CF; 7&#x5929;&#x548C;7&#x5206;&#x949F;&#x7684;&#x533A;&#x522B;.&#x56E0;&#x6B64;&#x672C;&#x8D28;&#x4E0A;,Linux &#x5185;&#x6838;&#x5C31;&#x662F;&#x8981;&#x6700;&#x4F4E;&#x7A0B;&#x5EA6;&#x7684;&#x964D;&#x4F4E;I/O &#x6570;.&#x672C;&#x7AE0;&#x5C06;&#x8BC9;&#x8FF0;&#x5185;&#x6838;&#x5728;&#x78C1;&#x76D8;&#x548C;&#x5185;&#x5B58;&#x4E4B;&#x95F4;&#x5904;&#x7406;&#x6570;&#x636E;&#x7684;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;,&#x54EA;&#x4E9B;&#x5730;&#x65B9;&#x4F1A;&#x4EA7;&#x751F;I/O.</p>
<h2 id="61-&#x8BFB;&#x548C;&#x5199;&#x6570;&#x636E;-&#x5185;&#x5B58;&#x9875;">6.1 &#x8BFB;&#x548C;&#x5199;&#x6570;&#x636E; &#x5185;&#x5B58;&#x9875;</h2>
<p>Linux &#x5185;&#x6838;&#x5C06;&#x786C;&#x76D8;I/O &#x8FDB;&#x884C;&#x5206;&#x9875;,&#x591A;&#x6570;Linux &#x7CFB;&#x7EDF;&#x7684;&#x9ED8;&#x8BA4;&#x9875;&#x5927;&#x5C0F;&#x4E3A;4K.&#x8BFB;&#x548C;&#x5199;&#x78C1;&#x76D8;&#x5757;&#x8FDB;&#x51FA;&#x5230;&#x5185;&#x5B58;&#x90FD;&#x4E3A;4K&#x9875;&#x5927;&#x5C0F;.&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;time &#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x52A0;v&#x53C2;&#x6570;,&#x6765;&#x68C0;&#x67E5;&#x4F60;&#x7CFB;&#x7EDF;&#x4E2D;&#x8BBE;&#x7F6E;&#x7684;&#x9875;&#x5927;&#x5C0F;:</p>
<blockquote>
<p># /usr/bin/time -v date</p>
<p>2009&#x5E74; 08&#x6708; 13&#x65E5; &#x661F;&#x671F;&#x56DB; 23:07:59 CST</p>
<p>Command being timed: &quot;date&quot;</p>
<p>User time (seconds): 0.00</p>
<p>System time (seconds): 0.00</p>
<p>Percent of CPU this job got: 200%</p>
<p>Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.00</p>
<p>Average shared text size (kbytes): 0</p>
<p>Average unshared data size (kbytes): 0</p>
<p>Average stack size (kbytes): 0</p>
<p>Average total size (kbytes): 0</p>
<p>Maximum resident set size (kbytes): 0</p>
<p>Average resident set size (kbytes): 0</p>
<p>Major (requiring I/O) page faults: 0</p>
<p>Minor (reclaiming a frame) page faults: 264</p>
<p>Voluntary context switches: 1</p>
<p>Involuntary context switches: 1</p>
<p>Swaps: 0</p>
<p>File system inputs: 0</p>
<p>File system outputs: 0</p>
<p>Socket messages sent: 0</p>
<p>Socket messages received: 0</p>
<p>Signals delivered: 0</p>
<p>Page size (bytes): 4096</p>
<p>Exit status: 0</p>
<p>Page size (bytes): 4096</p>
</blockquote>
<h2 id="62-major-and-minor-page-faults&#x4E3B;&#x8981;&#x9875;&#x9519;&#x8BEF;&#x548C;&#x6B21;&#x8981;&#x9875;&#x9519;&#x8BEF;">6.2 Major and Minor Page Faults(&#x4E3B;&#x8981;&#x9875;&#x9519;&#x8BEF;&#x548C;&#x6B21;&#x8981;&#x9875;&#x9519;&#x8BEF;)</h2>
<p>Linux,&#x7C7B;&#x4F3C;&#x591A;&#x6570;&#x7684;UNIX &#x7CFB;&#x7EDF;,&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x5C42;&#x6765;&#x6620;&#x5C04;&#x786C;&#x4EF6;&#x5730;&#x5740;&#x7A7A;&#x95F4;.&#x5F53;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x88AB;&#x542F;&#x52A8;,&#x5185;&#x6838;&#x5148;&#x626B;&#x63CF;CPU caches&#x548C;&#x7269;&#x7406;&#x5185;&#x5B58;.&#x5982;&#x679C;&#x8FDB;&#x7A0B;&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;&#x5728;&#x8FD9;2&#x4E2A;&#x5730;&#x65B9;&#x90FD;&#x6CA1;&#x627E;&#x5230;,&#x5C31;&#x9700;&#x8981;&#x4ECE;&#x78C1;&#x76D8;&#x4E0A;&#x8BFB;&#x53D6;,&#x6B64;&#x65F6;&#x5185;&#x6838;&#x8FC7;&#x7A0B;&#x5C31;&#x662F;major page fault(MPF).MPF &#x8981;&#x6C42;&#x78C1;&#x76D8;&#x5B50;&#x7CFB;&#x7EDF;&#x68C0;&#x7D22;&#x9875;&#x5E76;&#x7F13;&#x5B58;&#x8FDB;RAM.&#x4E00;&#x65E6;&#x5185;&#x5B58;&#x9875;&#x88AB;&#x6620;&#x5C04;&#x8FDB;&#x5185;&#x5B58;&#x7684;buffer cache(buff)&#x4E2D;,&#x5185;&#x6838;&#x5C06;&#x5C1D;&#x8BD5;&#x4ECE;&#x5185;&#x5B58;&#x4E2D;&#x8BFB;&#x53D6;&#x6216;&#x5199;&#x5165;,&#x6B64;&#x65F6;&#x5185;&#x6838;&#x8FC7;&#x7A0B;&#x5C31;&#x662F;minor page fault(MnPF).&#x4E0E;&#x5728;&#x78C1;&#x76D8;&#x4E0A;&#x64CD;&#x4F5C;&#x76F8;&#x6BD4;,MnPF &#x901A;&#x8FC7;&#x53CD;&#x590D;&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5185;&#x5B58;&#x9875;&#x5C31;&#x5927;&#x5927;&#x7684;&#x7F29;&#x77ED;&#x4E86;&#x5185;&#x6838;&#x65F6;&#x95F4;.</p>
<p>&#x4EE5;&#x4E0B;&#x7684;&#x4F8B;&#x5B50;,&#x4F7F;&#x7528;time &#x547D;&#x4EE4;&#x9A8C;&#x8BC1;&#x4E86;,&#x5F53;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x540E;,MPF &#x548C; MnPF &#x7684;&#x53D8;&#x5316;&#x60C5;&#x51B5;.&#x7B2C;&#x4E00;&#x6B21;&#x8FD0;&#x884C;&#x8FDB;&#x7A0B;,MPF &#x4F1A;&#x66F4;&#x591A;:</p>
<blockquote>
<p># /usr/bin/time -v evolution</p>
<p>Major (requiring I/O) page faults: 163</p>
<p>Minor (reclaiming a frame) page faults: 5918</p>
</blockquote>
<p>&#x7B2C;&#x4E8C;&#x6B21;&#x518D;&#x8FD0;&#x884C;&#x65F6;,&#x5185;&#x6838;&#x5DF2;&#x7ECF;&#x4E0D;&#x9700;&#x8981;&#x8FDB;&#x884C;MPF&#x4E86;,&#x56E0;&#x4E3A;&#x8FDB;&#x7A0B;&#x6240;&#x9700;&#x7684;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x5728;&#x5185;&#x5B58;&#x4E2D;:</p>
<blockquote>
<p># /usr/bin/time -v evolution</p>
<p>Major (requiring I/O) page faults: 0</p>
<p>Minor (reclaiming a frame) page faults: 5581</p>
</blockquote>
<h2 id="63-the-file-buffer-cache&#x6587;&#x4EF6;&#x7F13;&#x5B58;&#x533A;">6.3 The File Buffer Cache(&#x6587;&#x4EF6;&#x7F13;&#x5B58;&#x533A;)</h2>
<p>&#x6587;&#x4EF6;&#x7F13;&#x5B58;&#x533A;&#x5C31;&#x662F;&#x6307;,&#x5185;&#x6838;&#x5C06;MPF &#x8FC7;&#x7A0B;&#x6700;&#x5C0F;&#x5316;,MnPF &#x8FC7;&#x7A0B;&#x6700;&#x5927;&#x5316;.&#x968F;&#x7740;&#x7CFB;&#x7EDF;&#x4E0D;&#x65AD;&#x7684;&#x4EA7;&#x751F;I/O,buffer cache&#x4E5F;&#x5C06;&#x4E0D;&#x65AD;&#x7684;&#x589E;&#x52A0;.&#x76F4;&#x5230;&#x5185;&#x5B58;&#x4E0D;&#x591F;,&#x4EE5;&#x53CA;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x91CA;&#x653E;&#x8001;&#x7684;&#x5185;&#x5B58;&#x9875;&#x53BB;&#x7ED9;&#x5176;&#x4ED6;&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x4F7F;&#x7528;&#x65F6;,&#x7CFB;&#x7EDF;&#x5C31;&#x4F1A;&#x4E22;&#x5F03;&#x8FD9;&#x4E9B;&#x5185;&#x5B58;&#x9875;.&#x7ED3;&#x679C;&#x662F;,&#x5F88;&#x591A;SA(&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;)&#x5BF9;&#x7CFB;&#x7EDF;&#x4E2D;&#x8FC7;&#x5C11;&#x7684;free memory(&#x7A7A;&#x95F2;&#x5185;&#x5B58;)&#x8868;&#x793A;&#x62C5;&#x5FC3;,&#x5B9E;&#x9645;&#x4E0A;&#x8FD9;&#x662F;&#x7CFB;&#x7EDF;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x5728;&#x4F7F;&#x7528;caches.</p>
<p>&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;,&#x662F;&#x67E5;&#x770B;/proc/meminfo &#x6587;&#x4EF6;:</p>
<blockquote>
<p># cat /proc/meminfo</p>
<p>MemTotal: 2075672 kB</p>
<p>MemFree: 52528 kB</p>
<p>Buffers: 24596 kB</p>
<p>Cached: 1766844 kB</p>
</blockquote>
<p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;,&#x8FD9;&#x4E2A;&#x7CFB;&#x7EDF;&#x603B;&#x8BA1;&#x6709;2GB (Memtotal)&#x7684;&#x53EF;&#x7528;&#x5185;&#x5B58;.&#x5F53;&#x524D;&#x7684;&#x7A7A;&#x95F2;&#x5185;&#x5B58;&#x4E3A;52MB (MemFree),&#x6709;24 MB&#x5185;&#x5B58;&#x88AB;&#x5206;&#x914D;&#x78C1;&#x76D8;&#x5199;&#x64CD;&#x4F5C;(Buffers),&#x8FD8;&#x6709;1.7 GB&#x9875;&#x7528;&#x4E8E;&#x8BFB;&#x78C1;&#x76D8;(Cached).&#x5185;&#x6838;&#x8FD9;&#x6837;&#x662F;&#x901A;&#x8FC7;MnPF&#x673A;&#x5236;,&#x800C;&#x4E0D;&#x4EE3;&#x8868;&#x6240;&#x6709;&#x7684;&#x9875;&#x90FD;&#x662F;&#x6765;&#x81EA;&#x78C1;&#x76D8;.&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x90E8;&#x5206;,&#x6211;&#x4EEC;&#x4E0D;&#x53EF;&#x80FD;&#x786E;&#x8BA4;&#x7CFB;&#x7EDF;&#x662F;&#x5426;&#x5904;&#x4E8E;&#x74F6;&#x9888;&#x4E2D;.</p>
<h2 id="64-type-of-memory-pages">6.4 Type of Memory Pages</h2>
<p>&#x5728;Linux &#x5185;&#x6838;&#x4E2D;,memory pages&#x6709;3&#x79CD;,&#x5206;&#x522B;&#x662F;:</p>
<ol>
<li>Read Pages &#x8FD9;&#x4E9B;&#x9875;&#x901A;&#x8FC7;MPF &#x4ECE;&#x78C1;&#x76D8;&#x4E2D;&#x8BFB;&#x5165;,&#x800C;&#x4E14;&#x662F;&#x53EA;&#x8BFB;.&#x8FD9;&#x4E9B;&#x9875;&#x5B58;&#x5728;&#x4E8E;Buffer Cache&#x4E2D;&#x4EE5;&#x53CA;&#x5305;&#x62EC;&#x4E0D;&#x80FD;&#x591F;&#x4FEE;&#x6539;&#x7684;&#x9759;&#x6001;&#x6587;&#x4EF6;,&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;,&#x8FD8;&#x6709;&#x5E93;&#x6587;&#x4EF6;.&#x5F53;&#x5185;&#x6838;&#x9700;&#x8981;&#x5B83;&#x4EEC;&#x65F6;,&#x5C06;&#x8BFB;&#x53D6;&#x5230;&#x5185;&#x5B58;&#x4E2D;.&#x5982;&#x679C;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;,&#x5185;&#x6838;&#x5C06;&#x91CA;&#x653E;&#x5B83;&#x4EEC;&#x56DE;&#x7A7A;&#x95F2;&#x5217;&#x8868;&#x4E2D;.&#x7A0B;&#x5E8F;&#x518D;&#x6B21;&#x8BF7;&#x6C42;&#x65F6;,&#x5219;&#x901A;&#x8FC7;MPF &#x518D;&#x6B21;&#x8BFB;&#x56DE;&#x5185;&#x5B58;.</li>
<li>Dirty Pages &#x8FD9;&#x4E9B;&#x9875;&#x662F;&#x5185;&#x6838;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x5DF2;&#x7ECF;&#x88AB;&#x4FEE;&#x6539;&#x8FC7;&#x7684;&#x6570;&#x636E;&#x9875;.&#x5F53;&#x8FD9;&#x4E9B;&#x9875;&#x9700;&#x8981;&#x540C;&#x6B65;&#x56DE;&#x78C1;&#x76D8;&#x4E0A;,&#x7531;pdflush &#x8D1F;&#x8D23;&#x5199;&#x56DE;&#x78C1;&#x76D8;.&#x5982;&#x679C;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;,kswapd (&#x4E0E;pdflush &#x4E00;&#x8D77;)&#x5C06;&#x8FD9;&#x4E9B;&#x9875;&#x5199;&#x56DE;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#x5E76;&#x91CA;&#x653E;&#x66F4;&#x591A;&#x7684;&#x5185;&#x5B58;.</li>
<li>Anonymous Pages &#x8FD9;&#x4E9B;&#x9875;&#x5C5E;&#x4E8E;&#x67D0;&#x4E2A;&#x8FDB;&#x7A0B;,&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x548C;&#x5B83;&#x4EEC;&#x6709;&#x5173;.&#x4ED6;&#x4EEC;&#x4E0D;&#x80FD;&#x548C;&#x540C;&#x6B65;&#x56DE;&#x78C1;&#x76D8;.&#x5982;&#x679C;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;,kswapd &#x5C06;&#x4ED6;&#x4EEC;&#x5199;&#x5165;swap &#x5206;&#x533A;&#x4E0A;&#x5E76;&#x91CA;&#x653E;&#x66F4;&#x591A;&#x7684;&#x5185;&#x5B58;(&quot;swapping&quot; pages).</li>
</ol>
<h2 id="65-writing-data-pages-back-to-disk">6.5 Writing Data Pages Back to Disk</h2>
<p>&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6709;&#x5F88;&#x591A;&#x9009;&#x62E9;&#x53EF;&#x4EE5;&#x5199;&#x810F;&#x9875;&#x56DE;&#x78C1;&#x76D8;&#x4E0A;,&#x53EF;&#x901A;&#x8FC7;I/O &#x8C03;&#x5EA6;&#x5668;&#x4F7F;&#x7528; fsync() &#x6216; sync() &#x8FD9;&#x6837;&#x7684;&#x7CFB;&#x7EDF;&#x51FD;&#x6570;&#x6765;&#x5B9E;&#x73B0;&#x7ACB;&#x5373;&#x5199;&#x56DE;.&#x5982;&#x679C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6CA1;&#x6709;&#x8C03;&#x7528;&#x4EE5;&#x4E0A;&#x51FD;&#x6570;,pdflush &#x8FDB;&#x7A0B;&#x4F1A;&#x5B9A;&#x671F;&#x4E0E;&#x78C1;&#x76D8;&#x8FDB;&#x884C;&#x540C;&#x6B65;.</p>
<blockquote>
<p># ps -ef | grep pdflush</p>
<p>root 186 6 0 18:04 ? 00:00:00 [pdflush]</p>
</blockquote>
<h1 id="70-&#x76D1;&#x63A7;-io">7.0 &#x76D1;&#x63A7; I/O</h1>
<p>&#x5F53;&#x89C9;&#x5F97;&#x7CFB;&#x7EDF;&#x4E2D;&#x51FA;&#x73B0;&#x4E86;I/O &#x74F6;&#x9888;&#x65F6;,&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x7684;&#x76D1;&#x63A7;&#x8F6F;&#x4EF6;&#x6765;&#x67E5;&#x627E;&#x539F;&#x56E0;.&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x5305;&#x62EC;&#x4E86;</p>
<p>top,vmstat,iostat,sar.&#x5B83;&#x4EEC;&#x7684;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x662F;&#x5F88;&#x76F8;&#x4F3C;,&#x4E0D;&#x8FC7;&#x6BCF;&#x4E2A;&#x4E5F;&#x90FD;&#x63D0;&#x4F9B;&#x4E86;&#x5404;&#x81EA;&#x5BF9;&#x4E8E;&#x6027;&#x80FD;&#x4E0D;&#x540C;&#x65B9;&#x9762;&#x7684;&#x89E3;&#x91CA;.&#x4EE5;&#x4E0B;&#x7AE0;&#x8282;&#x5C31;&#x5C06;&#x8BA8;&#x8BBA;&#x54EA;&#x4E9B;&#x60C5;&#x51B5;&#x4F1A;&#x5BFC;&#x81F4;I/O &#x74F6;&#x9888;&#x7684;&#x51FA;&#x73B0;.</p>
<h2 id="71-calculating-ios-per-secondiops-&#x7684;&#x8BA1;&#x7B97;">7.1 Calculating IO&apos;s Per Second(IOPS &#x7684;&#x8BA1;&#x7B97;)</h2>
<p>&#x6BCF;&#x4E2A;I/O &#x8BF7;&#x6C42;&#x5230;&#x78C1;&#x76D8;&#x90FD;&#x9700;&#x8981;&#x82E5;&#x5E72;&#x65F6;&#x95F4;.&#x4E3B;&#x8981;&#x662F;&#x56E0;&#x4E3A;&#x78C1;&#x76D8;&#x7684;&#x76D8;&#x8FB9;&#x5FC5;&#x987B;&#x65CB;&#x8F6C;,&#x673A;&#x5934;&#x5FC5;&#x987B;&#x5BFB;&#x9053;.&#x78C1;&#x76D8;&#x7684;&#x65CB;&#x8F6C;&#x5E38;&#x5E38;&#x88AB;&#x79F0;&#x4E3A;&quot;rotational delay&quot;(RD),&#x673A;&#x5934;&#x7684;&#x79FB;&#x52A8;&#x79F0;&#x4E3A;&quot;disk seek&quot;(DS).&#x4E00;&#x4E2A;I/O &#x8BF7;&#x6C42;&#x6240;&#x9700;&#x7684;&#x65F6;&#x95F4;&#x8BA1;&#x7B97;&#x5C31;&#x662F;DS&#x52A0;&#x4E0A;RD.&#x78C1;&#x76D8;&#x7684;RD &#x57FA;&#x4E8E;&#x8BBE;&#x5907;&#x81EA;&#x8EAB;RPM &#x5355;&#x4F4D;&#x503C;(RPM &#x662F;Revolutions Perminute&#x7684;&#x7F29;&#x5199;,&#x662F;&#x8F6C;/&#x6BCF;&#x5206;&#x949F;,&#x4EE3;&#x8868;&#x4E86;&#x786C;&#x76D8;&#x7684;&#x8F6C;&#x901F;).&#x4E00;&#x4E2A;RD &#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x76D8;&#x7247;&#x65CB;&#x8F6C;&#x7684;&#x534A;&#x5706;.&#x5982;&#x4F55;&#x8BA1;&#x7B97;&#x4E00;&#x4E2A;10K RPM&#x8BBE;&#x5907;&#x7684;RD &#x503C;&#x5462;:</p>
<ol>
<li>10000 RPM / 60 seconds (10000/60 = 166 RPS)</li>
<li>&#x8F6C;&#x6362;&#x4E3A; 166&#x5206;&#x4E4B;1 &#x7684;&#x503C;(1/166 = 0.006 seconds/Rotation)</li>
<li>&#x5355;&#x4F4D;&#x8F6C;&#x6362;&#x4E3A;&#x6BEB;&#x79D2;(6 MS/Rotation)</li>
<li>&#x65CB;&#x8F6C;&#x534A;&#x5706;&#x7684;&#x65F6;&#x95F4;(6/2 = 3MS) &#x4E5F;&#x5C31;&#x662F; RD</li>
<li>&#x52A0;&#x4E0A;&#x5E73;&#x5747;3 MS &#x7684;&#x5BFB;&#x9053;&#x65F6;&#x95F4; (3MS + 3MS = 6MS)</li>
<li>&#x52A0;&#x4E0A;2MS &#x7684;&#x5EF6;&#x8FDF;(6MS + 2MS = 8MS)</li>
<li>1000 MS / 8 MS (1000/8 = 125 IOPS)</li>
</ol>
<p>&#x6BCF;&#x6B21;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;I/O,&#x5728;10K RPM&#x78C1;&#x76D8;&#x4E0A;&#x90FD;&#x8981;&#x82B1;&#x8D39;&#x5E73;&#x5747; 8MS.&#x5728;&#x8FD9;&#x4E2A;&#x56FA;&#x5B9A;&#x65F6;&#x95F4;&#x91CC;,&#x78C1;&#x76D8;&#x5C06;&#x5C3D;&#x53EF;&#x80FD;&#x4E14;&#x6709;&#x6548;&#x7387;&#x5728;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x78C1;&#x76D8;.IOPS &#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x51FA;&#x5927;&#x81F4;&#x7684;I/O &#x8BF7;&#x6C42;&#x6570;,10K RPM &#x78C1;&#x76D8;&#x6709;&#x80FD;&#x529B;&#x63D0;&#x4F9B;120-150&#x6B21;IOPS.&#x8BC4;&#x4F30;IOPS &#x7684;&#x6548;&#x80FD;,&#x53EF;&#x7528;&#x6BCF;&#x79D2;&#x8BFB;&#x5199;I/O &#x5B57;&#x8282;&#x6570;&#x9664;&#x4EE5;&#x6BCF;&#x79D2;&#x8BFB;&#x5199;IOPS &#x6570;&#x5F97;&#x51FA;.</p>
<h2 id="72-random-vs-sequential-io&#x968F;&#x673A;&#x987A;&#x5E8F;-io">7.2 Random vs Sequential I/O(&#x968F;&#x673A;/&#x987A;&#x5E8F; I/O)</h2>
<p>per I/O&#x4EA7;&#x751F;&#x7684;KB &#x5B57;&#x8282;&#x6570;&#x662F;&#x4E0E;&#x7CFB;&#x7EDF;&#x672C;&#x8EAB;workload&#x76F8;&#x5173;&#x7684;,&#x6709;2&#x79CD;&#x4E0D;&#x540C;workload&#x7684;&#x7C7B;&#x578B;,&#x5B83;&#x4EEC;&#x662F;sequential&#x548C;random.</p>
<h3 id="721-sequential-io&#x987A;&#x5E8F;io">7.2.1 Sequential I/O(&#x987A;&#x5E8F;IO)</h3>
<p>iostat &#x547D;&#x4EE4;&#x63D0;&#x4F9B;&#x4FE1;&#x606F;&#x5305;&#x62EC;IOPS &#x548C;&#x6BCF;&#x4E2A;I/O &#x6570;&#x636E;&#x5904;&#x7406;&#x7684;&#x603B;&#x989D;.&#x53EF;&#x4F7F;&#x7528;iostat x&#x67E5;&#x770B;.&#x987A;&#x5E8F;&#x7684;workload&#x662F;&#x540C;&#x65F6;&#x8BFB;&#x987A;&#x5E8F;&#x8BF7;&#x6C42;&#x5927;&#x91CF;&#x7684;&#x6570;&#x636E;.&#x8FD9;&#x5305;&#x62EC;&#x7684;&#x5E94;&#x7528;,&#x6BD4;&#x5982;&#x6709;&#x5546;&#x4E1A;&#x6570;&#x636E;&#x5E93;(database)&#x5728;&#x6267;&#x884C;&#x5927;&#x91CF;&#x7684;&#x67E5;&#x8BE2;&#x548C;&#x6D41;&#x5A92;&#x4F53;&#x670D;&#x52A1;.&#x5728;&#x8FD9;&#x4E2A; workload &#x4E2D;,KB per I/O &#x7684;&#x6BD4;&#x7387;&#x5E94;&#x8BE5;&#x662F;&#x5F88;&#x9AD8;&#x7684;.Sequential workload &#x662F;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5F88;&#x5FEB;&#x7684;&#x79FB;&#x52A8;&#x5927;&#x91CF;&#x6570;&#x636E;.&#x5982;&#x679C;&#x6BCF;&#x4E2A;I/O &#x90FD;&#x8282;&#x7701;&#x4E86;&#x65F6;&#x95F4;,&#x90A3;&#x5C31;&#x610F;&#x5473;&#x4E86;&#x80FD;&#x5E26;&#x6765;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x5904;&#x7406;.</p>
<p># iostat -x 1</p>
<p>avgcpu:</p>
<p>%user %nice %sys %idle</p>
<p>0.00 0.00 57.1 4 42.86</p>
<p>Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrqsz avgqusz await svctm %util</p>
<p>/dev/sda 0.00 12891.43 0.00 105.71 0.00 1 06080.00 0.00 53040.00 1003.46 1099.43 3442.43 26.49 280.00</p>
<p>/dev/sda1 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00</p>
<p>/dev/sda2 0.00 12857.14 0.00 5.71 0.00 105782.86 0.00 52891.43 18512.00 559.14 780.00 490.00 280.00</p>
<p>/dev/sda3 0.00 34.29 0.00 100.00 0.00 297.14 0.00 148.57 2.97 540.29 594.57 24.00 240.00</p>
<p>avgcpu:</p>
<p>%user %nice %sys %idle</p>
<p>0.00 0.00 23.53 76.47</p>
<p>Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrqsz avgqusz await svctm %util</p>
<p>/dev/sda 0.00 17320.59 0.00 102.94 0.00 142305.88 0.00 71152.94 1382.40 6975.29 952.29 28.57 294.12</p>
<p>/dev/sda1 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00</p>
<p>/dev/sda2 0.00 16844.12 0.00 102.94 0.00 138352.94 0.00 69176.47 1344.00 6809.71 952.29 28.57 294.12</p>
<p>/dev/sda3 0.00 476.47 0.00 0.00 0.00 952.94 0.00 1976.47 0.00 165.59 0.00 0.00 276.47</p>
<p>&#x8BC4;&#x4F30;IOPS &#x7684;&#x6548;&#x80FD;,&#x53EF;&#x7528;&#x6BCF;&#x79D2;&#x8BFB;&#x5199;I/O &#x5B57;&#x8282;&#x6570;&#x9664;&#x4EE5;&#x6BCF;&#x79D2;&#x8BFB;&#x5199;IOPS &#x6570;&#x5F97;&#x51FA;,&#x6BD4;&#x5982;</p>
<p>rkB/s &#x9664;&#x4EE5; r/s</p>
<p>wkB/s &#x9664;&#x4EE5; w/s</p>
<p>53040/105 = 505KB per I/O</p>
<p>71152/102 = 697KB per I/O</p>
<p>&#x5728;&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x53EF;&#x770B;&#x51FA;,&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x4E0B;,/dev/sda &#x7684;per I/O &#x90FD;&#x5728;&#x589E;&#x52A0;.</p>
<h3 id="722-random-io&#x968F;&#x673A;io">7.2.2 Random I/O(&#x968F;&#x673A;IO)</h3>
<p>Random&#x7684;worklaod&#x73AF;&#x5883;&#x4E0B;,&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;&#x6570;&#x636E;&#x5927;&#x5C0F;&#x7684;&#x591A;&#x5C11;,&#x66F4;&#x591A;&#x4F9D;&#x8D56;&#x7684;&#x662F;&#x78C1;&#x76D8;&#x7684;IOPS &#x6570;.Web&#x548C;Mail &#x670D;&#x52A1;&#x5C31;&#x662F;&#x5178;&#x578B;&#x7684;Random workload.I/O &#x8BF7;&#x6C42;&#x5185;&#x5BB9;&#x90FD;&#x5F88;&#x5C0F;.Random workload&#x662F;&#x540C;&#x65F6;&#x6BCF;&#x79D2;&#x4F1A;&#x6709;&#x66F4;&#x591A;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#x4EA7;&#x751F;.&#x6240;&#x4EE5;,&#x78C1;&#x76D8;&#x7684;IOPS &#x6570;&#x662F;&#x5173;&#x952E;.</p>
<p># iostat x 1</p>
<p>avgcpu:</p>
<p>%user %nice %sys %idle</p>
<p>2.04 0.00 97.96 0.00</p>
<p>Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrqsz</p>
<p>Avgqusz await svctm %util</p>
<p>/dev/sda 0.00 633.67 3.06 102.31 24.49 5281.63 12.24 2640.82 288.89 73.67 113.89 27.22 50.00</p>
<p>/dev/sda1 0.00 5.10 0.00 2.04 0.00 57.14 0.00 28.57 28.00 1.12 55.00 55.00 11.22</p>
<p>/dev/sda2 0.00 628.57 3.06 100.27 24.49 5224.49 12.24 2612.24 321.50 72.55 121.25 30.63 50.00</p>
<p>/dev/sda3 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00</p>
<p>avgcpu:</p>
<p>%user %nice %sys %idle</p>
<p>2.15 0.00 97.85 0.00</p>
<p>Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrqsz</p>
<p>Avgqusz await svctm %util</p>
<p>/dev/sda 0.00 41.94 6.45 130.98 51.61 352.69 25.81 3176.34 19.79 2.90 286.32 7.37 15.05</p>
<p>/dev/sda1 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00</p>
<p>/dev/sda2 0.00 41.94 4.30 130.98 34.41 352.69 17.20 3176.34 21.18 2.90 320.00 8.24 15.05</p>
<p>/dev/sda3 0.00 0.00 2.15 0.00 17.20 0.00 8.60 0.00 8.00 0.00 0.00 0.00 0.00</p>
<p>&#x8BA1;&#x7B97;&#x65B9;&#x5F0F;&#x548C;&#x4E4B;&#x524D;&#x7684;&#x516C;&#x5F0F;&#x4E00;&#x81F4;:</p>
<p>2640/102 = 23KB per I/O</p>
<p>3176/130 = 24KB per I/O</p>
<p>(&#x5BF9;&#x4E8E;&#x987A;&#x5E8F;I/O&#x6765;&#x8BF4;,&#x4E3B;&#x8981;&#x662F;&#x8003;&#x8651;&#x8BFB;&#x53D6;&#x5927;&#x91CF;&#x6570;&#x636E;&#x7684;&#x80FD;&#x529B;&#x5373;KB per request.&#x5BF9;&#x4E8E;&#x968F;&#x673A;I/O&#x7CFB;&#x7EDF;,&#x66F4;&#x9700;&#x8981;&#x8003;&#x8651;&#x7684;&#x662F;IOPS&#x503C;)</p>
<h2 id="73-when-virtual-memory-kills-io">7.3 When Virtual Memory Kills I/O</h2>
<p>&#x5982;&#x679C;&#x7CFB;&#x7EDF;&#x6CA1;&#x6709;&#x8DB3;&#x591F;&#x7684;RAM &#x54CD;&#x5E94;&#x6240;&#x6709;&#x7684;&#x8BF7;&#x6C42;,&#x5C31;&#x4F1A;&#x4F7F;&#x7528;&#x5230;SWAP device.&#x5C31;&#x50CF;&#x4F7F;&#x7528;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;I/O,&#x4F7F;&#x7528;SWAP device &#x4EE3;&#x4EF7;&#x4E5F;&#x5F88;&#x5927;.&#x5982;&#x679C;&#x7CFB;&#x7EDF;&#x5DF2;&#x7ECF;&#x6CA1;&#x6709;&#x7269;&#x7406;&#x5185;&#x5B58;&#x53EF;&#x7528;,&#x90A3;&#x5C31;&#x90FD;&#x5728;SWAP disk&#x4E0A;&#x521B;&#x5EFA;&#x5F88;&#x591A;&#x5F88;&#x591A;&#x7684;&#x5185;&#x5B58;&#x5206;&#x9875;,&#x5982;&#x679C;&#x540C;&#x4E00;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5728;&#x5C1D;&#x8BD5;&#x8BBF;&#x95EE;SWAP device,&#x90A3;&#x7CFB;&#x7EDF;&#x5C06;&#x9047;&#x5230;I/O &#x74F6;&#x9888;.&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x7684;&#x5168;&#x9762;&#x5D29;&#x6E83;.&#x5982;&#x679C;&#x5185;&#x5B58;&#x9875;&#x4E0D;&#x80FD;&#x591F;&#x53CA;&#x65F6;&#x8BFB;&#x6216;&#x5199;&#x78C1;&#x76D8;,&#x5B83;&#x4EEC;&#x5C31;&#x4E00;&#x76F4;&#x4FDD;&#x7559;&#x5728;RAM&#x4E2D;.&#x5982;&#x679C;&#x4FDD;&#x7559;&#x65F6;&#x95F4;&#x592A;&#x4E45;,&#x5185;&#x6838;&#x53C8;&#x5FC5;&#x987B;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x7A7A;&#x95F4;.&#x95EE;&#x9898;&#x6765;&#x4E86;,I/O &#x64CD;&#x4F5C;&#x90FD;&#x88AB;&#x963B;&#x585E;&#x4F4F;&#x4E86;,&#x4EC0;&#x4E48;&#x90FD;&#x6CA1;&#x505A;&#x5C31;&#x88AB;&#x7ED3;&#x675F;&#x4E86;,&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x5730;&#x5C31;&#x51FA;&#x73B0;kernel panic&#x548C;system crash.</p>
<p>&#x4E0B;&#x9762;&#x7684;vmstat &#x793A;&#x8303;&#x4E86;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x7CFB;&#x7EDF;:</p>
<blockquote>
<p>procs memoryswapiosystemcpur</p>
<p>b swpd free buff cache si so bi bo in cs us sy id wa</p>
<p>17 0 1250 3248 45820 1488472 30 132 992 0 2437 7657 23 50 0 23</p>
<p>11 0 1376 3256 45820 1488888 57 245 416 0 2391 7173 10 90 0 0</p>
<p>12 0 1582 1688 45828 1490228 63 131 1348 76 2432 7315 10 90 0 10</p>
<p>12 2 3981 1848 45468 1489824 185 56 2300 68 2478 9149 15 12 0 73</p>
<p>14 2 10385 2400 44484 1489732 0 87 1112 20 2515 11620 0 12 0 88</p>
<p>14 2 12671 2280 43644 1488816 76 51 1812 204 2546 11407 20 45 0 35</p>
</blockquote>
<p>&#x8FD9;&#x4E2A;&#x7ED3;&#x679C;&#x53EF;&#x770B;&#x51FA;,&#x5927;&#x91CF;&#x7684;&#x8BFB;&#x8BF7;&#x6C42;&#x56DE;&#x5185;&#x5B58;(bi),&#x5BFC;&#x81F4;&#x4E86;&#x7A7A;&#x95F2;&#x5185;&#x5B58;&#x5728;&#x4E0D;&#x65AD;&#x7684;&#x51CF;&#x5C11;(free).&#x8FD9;&#x5C31;&#x4F7F;&#x5F97;&#x7CFB;&#x7EDF;&#x5199;&#x5165;swap device&#x7684;&#x5757;&#x6570;&#x76EE;(so)&#x548C;swap &#x7A7A;&#x95F4;(swpd)&#x5728;&#x4E0D;&#x65AD;&#x589E;&#x52A0;.&#x540C;&#x65F6;&#x770B;&#x5230;CPU WIO time(wa)&#x767E;&#x5206;&#x6BD4;&#x5F88;&#x5927;.&#x8FD9;&#x8868;&#x660E;I/O &#x8BF7;&#x6C42;&#x5DF2;&#x7ECF;&#x5BFC;&#x81F4;CPU &#x5F00;&#x59CB;&#x6548;&#x7387;&#x4F4E;&#x4E0B;.&#x8981;&#x770B;swaping &#x5BF9;&#x78C1;&#x76D8;&#x7684;&#x5F71;&#x54CD;,&#x53EF;&#x4F7F;&#x7528;iostat &#x68C0;&#x67E5;swap &#x5206;&#x533A;</p>
<p># iostat x 1</p>
<p>avgcpu:</p>
<p>%user %nice %sys %idle</p>
<p>0.00 0.00 100.00 0.00</p>
<p>Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrqsz</p>
<p>Avgqusz await svctm %util</p>
<p>/dev/sda 0.00 1766.67 4866.67 1700.00 38933.33 31200.00 19466.67 15600.00 10.68 6526.67</p>
<p>100.56 5.08 3333.33</p>
<p>/dev/sda1 0.00 933.33 0.00 0.00 0.00 7733.33 0.00 3866.67 0.00 20.00 2145.07 7.37 200.00</p>
<p>/dev/sda2 0.00 0.00 4833.33 0.00 38666.67 533.33 19333.33 266.67 8.11 373.33 8.07 6.90 87.00</p>
<p>/dev/sda3 0.00 833.33 33.33 1700.00 266.67 22933.33 133.33 11466.67 13.38 6133.33 358.46 11.35 1966.67</p>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;,swap device(/dev/sda1) &#x548C; file system device(/dev/sda3)&#x5728;&#x4E92;&#x76F8;&#x4F5C;&#x7528;&#x4E8E;I/O. &#x5176;&#x4E2D;&#x4EFB;&#x4E00;&#x4E2A;&#x4F1A;&#x6709;&#x5F88;&#x9AD8;&#x5199;&#x8BF7;&#x6C42;(w/s),&#x4E5F;&#x4F1A;&#x6709;&#x5F88;&#x9AD8;wait time(await),&#x6216;&#x8005;&#x8F83;&#x4F4E;&#x7684;&#x670D;&#x52A1;&#x65F6;&#x95F4;&#x6BD4;&#x7387;(svctm).&#x8FD9;&#x8868;&#x660E;2&#x4E2A;&#x5206;&#x533A;&#x4E4B;&#x95F4;&#x4E92;&#x6709;&#x8054;&#x7CFB;,&#x4E92;&#x6709;&#x5F71;&#x54CD;.</p>
<h2 id="74-&#x7ED3;&#x8BBA;">7.4 &#x7ED3;&#x8BBA;</h2>
<p>I/O &#x6027;&#x80FD;&#x76D1;&#x63A7;&#x5305;&#x542B;&#x4E86;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;:</p>
<ol>
<li>&#x5F53;CPU &#x6709;&#x7B49;&#x5F85;I/O &#x60C5;&#x51B5;&#x65F6;,&#x90A3;&#x8BF4;&#x660E;&#x78C1;&#x76D8;&#x5904;&#x4E8E;&#x8D85;&#x8D1F;&#x8377;&#x72B6;&#x6001;.</li>
<li>&#x8BA1;&#x7B97;&#x4F60;&#x7684;&#x78C1;&#x76D8;&#x80FD;&#x591F;&#x627F;&#x53D7;&#x591A;&#x5927;&#x7684;IOPS &#x6570;.</li>
<li>&#x786E;&#x5B9A;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x662F;&#x5C5E;&#x4E8E;&#x968F;&#x673A;&#x6216;&#x8005;&#x987A;&#x5E8F;&#x8BFB;&#x53D6;&#x78C1;&#x76D8;.</li>
<li>&#x76D1;&#x63A7;&#x78C1;&#x76D8;&#x6162;&#x9700;&#x8981;&#x6BD4;&#x8F83;wait time(await) &#x548C; service time(svctm).</li>
<li>&#x76D1;&#x63A7;swap &#x548C;&#x7CFB;&#x7EDF;&#x5206;&#x533A;,&#x8981;&#x786E;&#x4FDD;virtual memory&#x4E0D;&#x662F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;I/O &#x7684;&#x74F6;&#x9888;.</li>
</ol>
<h1 id="80-network-&#x76D1;&#x63A7;&#x4ECB;&#x7ECD;">8.0 Network &#x76D1;&#x63A7;&#x4ECB;&#x7ECD;</h1>
<p>&#x5728;&#x6240;&#x6709;&#x7684;&#x5B50;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x4E2D;,&#x7F51;&#x7EDC;&#x662F;&#x6700;&#x56F0;&#x96BE;&#x7684;.&#x8FD9;&#x4E3B;&#x8981;&#x662F;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x6982;&#x5FF5;&#x5F88;&#x62BD;&#x8C61;.&#x5F53;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x4E0A;&#x7684;&#x7F51;&#x7EDC;&#x6027;&#x80FD;,&#x8FD9;&#x6709;&#x592A;&#x591A;&#x56E0;&#x7D20;.&#x8FD9;&#x4E9B;&#x56E0;&#x7D20;&#x5305;&#x62EC;&#x4E86;&#x5EF6;&#x8FDF;,&#x51B2;&#x7A81;,&#x62E5;&#x6324;&#x548C;&#x6570;&#x636E;&#x5305;&#x4E22;&#x5931;.&#x8FD9;&#x4E2A;&#x7AE0;&#x8282;&#x8BA8;&#x8BBA;&#x600E;&#x4E48;&#x6837;&#x68C0;&#x67E5;Ethernet(&#x7F51;&#x5361;),IP,TCP&#x7684;&#x6027;&#x80FD;.</p>
<h2 id="81-ethernet-configuration-settings&#x7F51;&#x5361;&#x914D;&#x7F6E;&#x7684;&#x8BBE;&#x7F6E;">8.1 Ethernet Configuration Settings(&#x7F51;&#x5361;&#x914D;&#x7F6E;&#x7684;&#x8BBE;&#x7F6E;)</h2>
<p>&#x9664;&#x975E;&#x5F88;&#x660E;&#x786E;&#x7684;&#x6307;&#x5B9A;,&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;&#x7F51;&#x5361;&#x90FD;&#x662F;&#x81EA;&#x9002;&#x5E94;&#x7F51;&#x7EDC;&#x901F;&#x5EA6;.&#x5F53;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x4E2D;&#x6709;&#x5F88;&#x591A;&#x4E0D;&#x540C;&#x7684;&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x65F6;,&#x4F1A;&#x5404;&#x81EA;&#x91C7;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x901F;&#x7387;&#x548C;&#x5DE5;&#x4F5C;&#x6A21;&#x5F0F;.&#x591A;&#x6570;&#x5546;&#x4E1A;&#x7F51;&#x7EDC;&#x90FD;&#x8FD0;&#x884C;&#x5728;100 &#x6216; 1000BaseTX.&#x4F7F;&#x7528;ethtool &#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x8FD9;&#x4E2A;&#x7CFB;&#x7EDF;&#x662F;&#x5904;&#x4E8E;&#x90A3;&#x79CD;&#x901F;&#x7387;.&#x4EE5;&#x4E0B;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;,&#x662F;&#x4E00;&#x4E2A;&#x6709;100BaseTX &#x7F51;&#x5361;&#x7684;&#x7CFB;&#x7EDF;,&#x81EA;&#x52A8;&#x534F;&#x5546;&#x9002;&#x5E94;&#x81F3;10BaseTX &#x7684;&#x60C5;&#x51B5;.</p>
<p># ethtool eth0</p>
<p>Settings for eth0:</p>
<p>Supported ports: [ TP MII ]</p>
<p>Supported link modes: 10baseT/Half 10baseT/Full</p>
<p>100baseT/Half 100baseT/Full</p>
<p>Supports autonegotiation:Yes</p>
<p>Advertised link modes: 10baseT/Half 10baseT/Full</p>
<p>100baseT/Half 100baseT/Full</p>
<p>Advertised autonegotiation:Yes</p>
<p>Speed: 10Mb/s</p>
<p>Duplex: Half</p>
<p>Port: MII</p>
<p>PHYAD: 32</p>
<p>Transceiver: internal</p>
<p>Autonegotiation:on</p>
<p>Supports Wakeon:</p>
<p>pumbg</p>
<p>Wakeon:d</p>
<p>Current message level: 0x00000007 (7)</p>
<p>Link detected: yes</p>
<p>&#x4EE5;&#x4E0B;&#x793A;&#x8303;&#x4F8B;&#x5B50;&#x4E2D;,&#x5982;&#x4F55;&#x5F3A;&#x5236;&#x7F51;&#x5361;&#x901F;&#x7387;&#x8C03;&#x6574;&#x81F3;100BaseTX:</p>
<p># ethtool s</p>
<p>eth0 speed 100 duplex full autoneg off</p>
<p># ethtool eth0</p>
<p>Settings for eth0:</p>
<p>Supported ports: [ TP MII ]</p>
<p>Supported link modes: 10baseT/Half 10baseT/Full</p>
<p>100baseT/Half 100baseT/Full</p>
<p>Supports autonegotiation:Yes</p>
<p>Advertised link modes: 10baseT/Half 10baseT/Full</p>
<p>100baseT/Half 100baseT/Full</p>
<p>Advertised autonegotiation:No</p>
<p>Speed: 100Mb/s</p>
<p>Duplex: Full</p>
<p>Port: MII</p>
<p>PHYAD: 32</p>
<p>Transceiver: internal</p>
<p>Autonegotiation:off</p>
<p>Supports Wakeon:pumbg</p>
<p>Wakeon:d</p>
<p>Current message level: 0x00000007 (7)</p>
<p>Link detected: yes</p>
<h2 id="82-monitoring-network-throughput&#x7F51;&#x7EDC;&#x541E;&#x5410;&#x91CF;&#x76D1;&#x63A7;">8.2 Monitoring Network Throughput(&#x7F51;&#x7EDC;&#x541E;&#x5410;&#x91CF;&#x76D1;&#x63A7;)</h2>
<p>&#x63A5;&#x53E3;&#x4E4B;&#x95F4;&#x7684;&#x540C;&#x6B65;&#x5E76;&#x4E0D;&#x610F;&#x5473;&#x7740;&#x4EC5;&#x4EC5;&#x6709;&#x5E26;&#x5BBD;&#x95EE;&#x9898;.&#x91CD;&#x8981;&#x7684;&#x662F;,&#x5982;&#x4F55;&#x7BA1;&#x7406;&#x5E76;&#x4F18;&#x5316;,&#x8FD9;2&#x53F0;&#x4E3B;&#x673A;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x6362;&#x673A;,&#x7F51;&#x7EBF;,&#x6216;&#x8005;&#x8DEF;&#x7531;&#x5668;.&#x6D4B;&#x8BD5;&#x7F51;&#x7EDC;&#x541E;&#x5410;&#x91CF;&#x6700;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#x5C31;&#x662F;,&#x5728;&#x8FD9;2&#x4E2A;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x4E92;&#x76F8;&#x53D1;&#x9001;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x5E76;&#x7EDF;&#x8BA1;&#x4E0B;&#x6765;,&#x6BD4;&#x5982;&#x5EF6;&#x8FDF;&#x548C;&#x901F;&#x5EA6;.</p>
<p>8.2.0 &#x4F7F;&#x7528;iptraf &#x67E5;&#x770B;&#x672C;&#x5730;&#x541E;&#x5410;&#x91CF;</p>
<p>iptraf &#x5DE5;&#x5177;(<a href="http://iptraf.seul.xn--org" target="_blank">http://iptraf.seul.org),&#x63D0;&#x4F9B;&#x4E86;&#x6BCF;&#x4E2A;&#x7F51;&#x5361;&#x541E;&#x5410;&#x91CF;&#x7684;&#x4EEA;&#x8868;&#x76D8;</a>%2C-3k6nt5al8ax6dq3v9ocngs34w2c4ads6bbnbi15g313bxg7b/).</p>
<p>#iptraf d</p>
<p>eth0</p>
<p>&#x4ECE;&#x8F93;&#x51FA;&#x4E2D;&#x53EF;&#x770B;&#x5230;,&#x8BE5;&#x7CFB;&#x7EDF;&#x53D1;&#x9001;&#x4F20;&#x8F93;&#x7387;(Outgoing rates)&#x4E3A; 61 mbps,&#x8FD9;&#x5BF9;&#x4E8E;100 mbps&#x7F51;&#x7EDC;&#x6765;&#x8BF4;,&#x6709;&#x70B9;&#x6162;.</p>
<h3 id="821-&#x4F7F;&#x7528;netperf-&#x67E5;&#x770B;&#x7EC8;&#x7AEF;&#x541E;&#x5410;&#x91CF;">8.2.1 &#x4F7F;&#x7528;netperf &#x67E5;&#x770B;&#x7EC8;&#x7AEF;&#x541E;&#x5410;&#x91CF;</h3>
<p>&#x4E0D;&#x540C;&#x4E8E;iptraf &#x88AB;&#x52A8;&#x7684;&#x5728;&#x672C;&#x5730;&#x76D1;&#x63A7;&#x6D41;&#x91CF;,netperf &#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x8BA9;&#x7BA1;&#x7406;&#x5458;,&#x6267;&#x884C;&#x66F4;&#x52A0;&#x53EF;&#x63A7;&#x7684;&#x541E;&#x5410;&#x91CF;&#x76D1;&#x63A7;.&#x5BF9;&#x4E8E;&#x786E;&#x5B9A;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x4F5C;&#x7AD9;&#x5230;&#x4E00;&#x4E2A;&#x9AD8;&#x8D1F;&#x8377;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;(&#x6BD4;&#x5982;file &#x6216;web server),&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x6709;&#x591A;&#x5C11;&#x541E;&#x5410;&#x91CF;&#x662F;&#x975E;&#x5E38;&#x6709;&#x5E2E;&#x52A9;&#x7684;.netperf &#x5DE5;&#x5177;&#x8FD0;&#x884C;&#x7684;&#x662F;client/server &#x6A21;&#x5F0F;.</p>
<p>&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x53EF;&#x63A7;&#x541E;&#x5410;&#x91CF;&#x6D4B;&#x8BD5;,&#x9996;&#x5148;netperf server &#x5FC5;&#x987B;&#x8FD0;&#x884C;&#x5728;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7CFB;&#x7EDF;&#x4E0A;:</p>
<p>server# netserver</p>
<p>Starting netserver at port 12865</p>
<p>Starting netserver at hostname 0.0.0.0 port 12865 and family AF_UNSPEC</p>
<p>netperf &#x5DE5;&#x5177;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x591A;&#x91CD;&#x91C7;&#x6837;.&#x591A;&#x6570;&#x57FA;&#x672C;&#x6D4B;&#x8BD5;&#x5C31;&#x662F;&#x4E00;&#x6B21;&#x6807;&#x51C6;&#x7684;&#x541E;&#x5410;&#x91CF;&#x6D4B;&#x8BD5;.&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x5C31;&#x662F;,&#x4E00;&#x4E2A;LAN(&#x5C40;&#x57DF;&#x7F51;) &#x73AF;&#x5883;&#x4E0B;,&#x4ECE;client &#x4E0A;&#x6267;&#x884C;&#x4E00;&#x6B21;30&#x79D2;&#x7684;TCP &#x541E;&#x5410;&#x91CF;&#x91C7;&#x6837;:</p>
<p>&#x4ECE;&#x8F93;&#x51FA;&#x53EF;&#x770B;&#x51FA;,&#x8BE5;&#x7F51;&#x7EDC;&#x7684;&#x541E;&#x5410;&#x91CF;&#x5927;&#x81F4;&#x5728;89 mbps &#x5DE6;&#x53F3;.server(192.168.1.215) &#x4E0E;client &#x5728;&#x540C;&#x4E00;LAN &#x4E2D;.&#x8FD9;&#x5BF9;&#x4E8E;100 mbps&#x7F51;&#x7EDC;&#x6765;&#x8BF4;,&#x6027;&#x80FD;&#x975E;&#x5E38;&#x597D;.</p>
<p>client# netperf H</p>
<p>192.168.1.215 l 30</p>
<p>TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to</p>
<p>192.168.1.230 (192.168.1.230) port 0 AF_INET</p>
<p>Recv Send Send</p>
<p>Socket Socket Message Elapsed</p>
<p>Size Size Size Time Throughput</p>
<p>bytes bytes bytes secs. 10\^6bits/sec</p>
<p>87380 16384 16384 30.02 89.46</p>
<p>&#x4ECE;LAN &#x5207;&#x6362;&#x5230;&#x5177;&#x5907;54G(WirelessG&#x662F;&#x672A;&#x6765;54Mbps&#x65E0;&#x7EBF;&#x7F51;&#x8054;&#x7F51;&#x6807;&#x51C6;)&#x65E0;&#x7EBF;&#x7F51;&#x7EDC;&#x8DEF;&#x7531;&#x5668;&#x4E2D;,&#x5E76;&#x5728;10 &#x82F1;&#x5C3A;&#x8303;&#x56F4;&#x5185;&#x6D4B;&#x8BD5;&#x65F6;.&#x8BE5;&#x541E;&#x5410;&#x91CF;&#x5C31;&#x6025;&#x5267;&#x7684;&#x4E0B;&#x964D;.&#x5728;&#x6700;&#x5927;&#x5C31;&#x4E3A;54 MBits&#x7684;&#x53EF;&#x80FD;&#x4E0B;,&#x7B14;&#x8BB0;&#x672C;&#x7535;&#x8111;&#x53EF;&#x5B9E;&#x73B0;&#x603B;&#x541E;&#x5410;&#x91CF;&#x5C31;&#x4E3A;14MBits.</p>
<p>client# netperf H 192.168.1.215 l30</p>
<p>TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to</p>
<p>192.168.1.215 (192.168.1.215) port 0 AF_INET</p>
<p>Recv Send Send</p>
<p>Socket Socket Message Elapsed</p>
<p>Size Size Size Time Throughput</p>
<p>bytes bytes bytes secs. 10\^6bits/sec</p>
<p>87380 16384 16384 30.10 14.09</p>
<p>&#x5982;&#x679C;&#x5728;50&#x82F1;&#x5C3A;&#x8303;&#x56F4;&#x5185;&#x5462;,&#x5219;&#x8FDB;&#x4E00;&#x6B65;&#x4F1A;&#x4E0B;&#x964D;&#x81F3;5 MBits.</p>
<p># netperf H</p>
<p>192.168.1.215 l30</p>
<p>TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to</p>
<p>192.168.1.215 (192.168.1.215) port 0 AF_INET</p>
<p>Recv Send Send</p>
<p>Socket Socket Message Elapsed</p>
<p>Size Size Size Time Throughput</p>
<p>bytes bytes bytes secs. 10\^6bits/sec</p>
<p>87380 16384 16384 30.64 5.05</p>
<p>&#x5982;&#x679C;&#x4ECE;LAN &#x5207;&#x6362;&#x5230;&#x4E92;&#x8054;&#x7F51;&#x4E0A;,&#x5219;&#x541E;&#x5410;&#x91CF;&#x8DCC;&#x81F3;1 Mbits&#x4E0B;&#x4E86;.</p>
<p># netperf Hlitemail.org p1500 l30</p>
<p>TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to</p>
<p>litemail.org (72.249.104.148) port 0 AF_INET</p>
<p>Recv Send Send</p>
<p>Socket Socket Message Elapsed</p>
<p>Size Size Size Time Throughput</p>
<p>bytes bytes bytes secs. 10\^6bits/sec</p>
<p>87380 16384 16384 31.58 0.93</p>
<p>&#x6700;&#x540E;&#x662F;&#x4E00;&#x4E2A;VPN &#x8FDE;&#x63A5;&#x73AF;&#x5883;,&#x8FD9;&#x662F;&#x6240;&#x6709;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E2D;&#x6700;&#x69FD;&#x7CD5;&#x7684;&#x541E;&#x5410;&#x91CF;&#x4E86;.</p>
<p># netperf H10.0.1.129 l30</p>
<p>TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to</p>
<p>10.0.1.129 (10.0.1.129) port 0 AF_INET</p>
<p>Recv Send Send</p>
<p>Socket Socket Message Elapsed</p>
<p>Size Size Size Time Throughput</p>
<p>bytes bytes bytes secs. 10\^6bits/sec</p>
<p>87380 16384 16384 31.99 0.51</p>
<p>&#x53E6;&#x5916;,netperf &#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6D4B;&#x8BD5;&#x6BCF;&#x79D2;&#x603B;&#x8BA1;&#x6709;&#x591A;&#x5C11;&#x7684;TCP &#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x6570;.&#x901A;&#x8FC7;&#x5EFA;&#x7ACB;&#x5355;&#x4E00;TCP &#x8FDE;&#x63A5;&#x5E76;&#x987A;&#x5E8F;&#x5730;&#x53D1;&#x9001;&#x591A;&#x4E2A;&#x8BF7;&#x6C42;/&#x54CD;&#x5E94;(ack &#x5305;&#x6765;&#x56DE;&#x5728;1&#x4E2A;byte &#x5927;&#x5C0F;).&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#x4E8E;RDBMS &#x7A0B;&#x5E8F;&#x5728;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x4EA4;&#x6613;&#x6216;&#x8005;&#x90AE;&#x4EF6;&#x670D;&#x52A1;&#x5668;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x7BA1;&#x9053;&#x4E2D;&#x53D1;&#x9001;&#x90AE;&#x4EF6;.</p>
<p>&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x5728;30 &#x79D2;&#x7684;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x5185;,&#x6A21;&#x62DF;TCP &#x8BF7;&#x6C42;/&#x54CD;&#x5E94;:</p>
<p>client# netperf tTCP_RR H192.168.1.230 l30</p>
<p>TCP REQUEST/RESPONSE TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET</p>
<p>to 192.168.1.230 (192.168.1.230) port 0 AF_INET</p>
<p>Local /Remote</p>
<p>Socket Size Request Resp. Elapsed Trans.Send Recv Size Size Time Rate bytes Bytes bytes bytes secs. per sec</p>
<p>16384 87380 1 1 30.00 4453.80 16384 87380</p>
<p>&#x5728;&#x8F93;&#x51FA;&#x4E2D;&#x770B;&#x51FA;,&#x8FD9;&#x4E2A;&#x7F51;&#x7EDC;&#x652F;&#x6301;&#x7684;&#x5904;&#x7406;&#x901F;&#x7387;&#x4E3A;&#x6BCF;&#x79D2;4453 psh/ack(&#x5305;&#x5927;&#x5C0F;&#x4E3A;1 byte).&#x8FD9;&#x5176;&#x5B9E;&#x662F;&#x7406;&#x60F3;&#x72B6;&#x6001;&#x4E0B;,&#x56E0;&#x4E3A;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x65F6;,&#x591A;&#x6570;requests(&#x8BF7;&#x6C42;),&#x7279;&#x522B;&#x662F;responses(&#x54CD;&#x5E94;),&#x90FD;&#x5927;&#x4E8E;1 byte.</p>
<p>&#x73B0;&#x5B9E;&#x60C5;&#x51B5;&#x4E0B;,netperf &#x4E00;&#x822C;requests &#x9ED8;&#x8BA4;&#x4F7F;&#x7528;2K&#x5927;&#x5C0F;,responses &#x9ED8;&#x8BA4;&#x4F7F;&#x7528;32K&#x5927;&#x5C0F;:</p>
<p>client# netperf tTCP_RR H192.168.1.230 l30 r2048,32768</p>
<p>TCP REQUEST/RESPONSE TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.1.230 (192.168.1.230) port 0 AF_INET Local /Remote</p>
<p>Socket Size Request Resp. Elapsed Trans.</p>
<p>Send Recv Size Size Time Rate</p>
<p>bytes Bytes bytes bytes secs. per sec</p>
<p>16384 87380 2048 32768 30.00 222.37 16384 87380</p>
<p>&#x8FD9;&#x4E2A;&#x5904;&#x7406;&#x901F;&#x7387;&#x51CF;&#x5C11;&#x5230;&#x4E86;&#x6BCF;&#x79D2;222.</p>
<h3 id="822-&#x4F7F;&#x7528;iperf-&#x8BC4;&#x4F30;&#x7F51;&#x7EDC;&#x6548;&#x7387;">8.2.2 &#x4F7F;&#x7528;iperf &#x8BC4;&#x4F30;&#x7F51;&#x7EDC;&#x6548;&#x7387;</h3>
<p>&#x57FA;&#x4E8E;&#x90FD;&#x662F;&#x9700;&#x8981;&#x5728;2&#x7AEF;&#x68C0;&#x67E5;&#x8FDE;&#x63A5;&#x60C5;&#x51B5;&#x4E0B;,iperf &#x548C;netperf &#x5F88;&#x76F8;&#x4F3C;.&#x4E0D;&#x540C;&#x7684;&#x662F;,iperf &#x66F4;&#x6DF1;&#x5165;&#x7684;&#x901A;&#x8FC7;windows size&#x548C;QOS &#x8BBE;&#x5907;&#x6765;&#x68C0;&#x67E5;TCP/UDP &#x7684;&#x6548;&#x7387;&#x60C5;&#x51B5;.&#x8FD9;&#x4E2A;&#x5DE5;&#x5177;,&#x662F;&#x7ED9;&#x9700;&#x8981;&#x4F18;&#x5316;TCP/IP stacks&#x4EE5;&#x53CA;&#x6D4B;&#x8BD5;&#x8FD9;&#x4E9B;stacks&#x6548;&#x7387;&#x7684;&#x7BA1;&#x7406;&#x5458;&#x4EEC;&#x91CF;&#x8EAB;&#x5B9A;&#x505A;&#x7684;.</p>
<p>iperf &#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x7A0B;&#x5E8F;,&#x53EF;&#x8FD0;&#x884C;&#x5728;server &#x6216;&#x8005;client &#x4EFB;&#x4E00;&#x6A21;&#x5F0F;&#x4E0B;.&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;50001 &#x7AEF;&#x53E3;.</p>
<p>&#x9996;&#x5148;&#x542F;&#x52A8;server &#x7AEF;(192.168.1.215):</p>
<p>server# iperf s</p>
<p>D</p>
<p>Running Iperf Server as a daemon</p>
<p>The Iperf daemon process ID : 3655</p>
<p>Server</p>
<p>listening on TCP port 5001</p>
<p>TCP window size: 85.3 KByte (default)</p>
<p>&#x5728;&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x91CC;,&#x4E00;&#x4E2A;&#x65E0;&#x7EBF;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0B;,&#x5176;&#x4E2D;client &#x7AEF;&#x91CD;&#x590D;&#x8FD0;&#x884C;iperf,&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;&#x7F51;&#x7EDC;&#x7684;&#x541E;&#x5410;&#x91CF;&#x60C5;&#x51B5;.&#x8FD9;&#x4E2A;&#x73AF;&#x5883;&#x5047;&#x5B9A;&#x5904;&#x4E8E;&#x88AB;&#x5145;&#x5206;&#x5229;&#x7528;&#x72B6;&#x6001;,&#x5F88;&#x591A;&#x4E3B;&#x673A;&#x90FD;&#x5728;&#x4E0B;&#x8F7D;ISO images&#x6587;&#x4EF6;.</p>
<p>&#x9996;&#x5148;client &#x7AEF;&#x8FDE;&#x63A5;&#x5230;server &#x7AEF;(192.168.1.215),&#x5E76;&#x5728;&#x603B;&#x8BA1;60&#x79D2;&#x65F6;&#x95F4;&#x5185;,&#x6BCF;5&#x79D2;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x5E26;&#x5BBD;&#x6D4B;&#x8BD5;&#x7684;&#x91C7;&#x6837;.</p>
<p>client# iperf c192.168.1.215 t60 i5</p>
<p>Client connecting to 192.168.1.215, TCP port 5001</p>
<p>TCP window size: 25.6 KByte (default)</p>
<p>[3] local 192.168.224.150 port 51978 connected with</p>
<p>192.168.1.215 port 5001</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 0.05.0</p>
<p>sec 6.22 MBytes 10.4 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 5.010.0</p>
<p>sec 6.05 MBytes 10.1 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 10.015.0</p>
<p>sec 5.55 MBytes 9.32 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 15.020.0</p>
<p>sec 5.19 MBytes 8.70 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 20.025.0</p>
<p>sec 4.95 MBytes 8.30 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 25.030.0</p>
<p>sec 5.21 MBytes 8.74 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 30.035.0</p>
<p>sec 2.55 MBytes 4.29 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 35.040.0</p>
<p>sec 5.87 MBytes 9.84 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 40.045.0</p>
<p>sec 5.69 MBytes 9.54 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 45.050.0</p>
<p>sec 5.64 MBytes 9.46 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 50.055.0</p>
<p>sec 4.55 MBytes 7.64 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 55.060.0</p>
<p>sec 4.47 MBytes 7.50 Mbits/sec</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 0.060.0</p>
<p>sec 61.9 MBytes 8.66 Mbits/sec</p>
<p>&#x8FD9;&#x53F0;&#x4E3B;&#x673A;&#x7684;&#x5176;&#x4ED6;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;,&#x4E5F;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x8FD9;&#x90E8;&#x5206;&#x7684;&#x5E26;&#x5BBD;&#x91C7;&#x6837;.&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x603B;&#x8BA1;60&#x79D2;&#x65F6;&#x95F4;&#x5185;,&#x90FD;&#x5728;4 10MBits &#x4E0A;&#x4E0B;&#x8D77;&#x4F0F;.</p>
<p>&#x9664;&#x4E86;TCP &#x6D4B;&#x8BD5;&#x4E4B;&#x5916;,iperf &#x7684;UDP &#x6D4B;&#x8BD5;&#x4E3B;&#x8981;&#x662F;&#x8BC4;&#x4F30;&#x5305;&#x4E22;&#x5931;&#x548C;&#x6296;&#x52A8;.&#x63A5;&#x4E0B;&#x6765;&#x7684;iperf &#x6D4B;&#x8BD5;,&#x662F;&#x5728;&#x540C;&#x6837;&#x7684;54Mbit G&#x6807;&#x51C6;&#x65E0;&#x7EBF;&#x7F51;&#x7EDC;&#x4E2D;.&#x5728;&#x65E9;&#x671F;&#x7684;&#x793A;&#x8303;&#x4F8B;&#x5B50;&#x4E2D;,&#x76EE;&#x524D;&#x7684;&#x541E;&#x5410;&#x91CF;&#x53EA;&#x6709;9Mbits.</p>
<p># iperf c192.168.1.215 b10M</p>
<p>WARNING: option bimplies udp testing Client connecting to 192.168.1.215, UDP port 5001</p>
<p>Sending 1470 byte datagrams UDP buffer size: 107 KByte (default)</p>
<p>[3] local 192.168.224.150 port 33589 connected with 192.168.1.215 port 5001</p>
<p>[ ID] Interval Transfer Bandwidth</p>
<p>[ 3] 0.010.0</p>
<p>sec 11.8 MBytes 9.90 Mbits/sec</p>
<p>[ 3] Sent 8420 datagrams</p>
<p>[ 3] Server Report:</p>
<p>[ ID] Interval Transfer Bandwidth Jitter Lost/Total Datagrams</p>
<p>[ 3] 0.010.0</p>
<p>sec 6.50 MBytes 5.45 Mbits/sec 0.480 ms 3784/ 8419 (45%)</p>
<p>[ 3] 0.010.0</p>
<p>sec 1 datagrams received outoforder</p>
<p>&#x4ECE;&#x8F93;&#x51FA;&#x4E2D;&#x53EF;&#x770B;&#x51FA;,&#x5728;&#x5C1D;&#x8BD5;&#x4F20;&#x8F93;10M &#x7684;&#x6570;&#x636E;&#x65F6;,&#x5B9E;&#x9645;&#x4E0A;&#x53EA;&#x4EA7;&#x751F;&#x4E86;5.45M.&#x5374;&#x6709;45% &#x7684;&#x5305;&#x4E22;&#x5931;.</p>
<h2 id="83-individual-connections-with-tcptrace">8.3 Individual Connections with tcptrace</h2>
<p>tcptrace &#x5DE5;&#x5177;&#x63D0;&#x4F9B;&#x4E86;&#x5BF9;&#x4E8E;&#x67D0;&#x4E00;&#x5177;&#x4F53;&#x8FDE;&#x63A5;&#x91CC;,&#x8BE6;&#x7EC6;&#x7684;TCP &#x76F8;&#x5173;&#x4FE1;&#x606F;.&#x8BE5;&#x5DE5;&#x5177;&#x4F7F;&#x7528;libcap &#x6765;&#x5206;&#x6790;&#x67D0;&#x4E00;&#x5177;&#x4F53;TCP sessions.&#x8BE5;&#x5DE5;&#x5177;&#x6C47;&#x62A5;&#x7684;&#x4FE1;&#x606F;,&#x6709;&#x65F6;&#x5F88;&#x96BE;&#x5728;&#x67D0;&#x4E00;TCP stream&#x88AB;&#x53D1;&#x73B0;.&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5305;&#x62EC;&#x4E86;&#x6709;:</p>
<ol>
<li>TCP Retransmissions(IP &#x8F6C;&#x64AD;) &#x6240;&#x6709;&#x6570;&#x636E;&#x5927;&#x5C0F;&#x88AB;&#x53D1;&#x9001;&#x6240;&#x9700;&#x7684;&#x5305;&#x603B;&#x989D;</li>
<li>TCP Windows Sizes &#x8FDE;&#x63A5;&#x901F;&#x5EA6;&#x6162;&#x4E0E;&#x5C0F;&#x7684;windows sizes &#x6709;&#x5173;</li>
<li>Total throughput of the connection &#x8FDE;&#x63A5;&#x7684;&#x541E;&#x5410;&#x91CF;</li>
<li>Connection duration &#x8FDE;&#x63A5;&#x7684;&#x6301;&#x7EED;&#x65F6;&#x95F4;</li>
</ol>
<h3 id="831-&#x6848;&#x4F8B;&#x5B66;&#x4E60;-&#x4F7F;&#x7528;tcptrace">8.3.1 &#x6848;&#x4F8B;&#x5B66;&#x4E60; &#x4F7F;&#x7528;tcptrace</h3>
<p>tcptrace &#x5DE5;&#x5177;&#x53EF;&#x80FD;&#x5DF2;&#x7ECF;&#x5728;&#x90E8;&#x5206;Linux &#x53D1;&#x5E03;&#x7248;&#x4E2D;&#x6709;&#x5B89;&#x88C5;&#x5305;&#x4E86;,&#x8BE5;&#x6587;&#x4F5C;&#x8005;&#x901A;&#x8FC7;&#x7F51;&#x7AD9;,&#x4E0B;&#x8F7D;&#x7684;&#x662F;&#x6E90;&#x7801;&#x5B89;&#x88C5;&#x5305;:<a href="http://dag.wieers.com/rpm/packages" target="_blank">http://dag.wieers.com/rpm/packages</a> /tcptrace.tcptrace &#x9700;&#x8981;libcap &#x57FA;&#x4E8E;&#x6587;&#x4EF6;&#x8F93;&#x5165;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;.&#x5728;tcptrace &#x6CA1;&#x6709;&#x9009;&#x9879;&#x7684;&#x60C5;&#x51B5;&#x4E0B;,&#x9ED8;&#x8BA4;&#x6BCF;&#x4E2A;&#x552F;&#x4E00;&#x7684;&#x8FDE;&#x63A5;&#x8FC7;&#x7A0B;&#x90FD;&#x5C06;&#x88AB;&#x6355;&#x83B7;.&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x662F;,&#x4F7F;&#x7528;libcap &#x57FA;&#x4E8E;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x4E3A;bigstuff:</p>
<p># tcptrace bigstuff</p>
<p>1 arg remaining, starting with &apos;bigstuff&apos; Ostermann&apos;s tcptrace version 6.6.7 Thu Nov 4, 2004</p>
<p>146108 packets seen, 145992 TCP packets traced elapsed wallclock time: 0:00:01.634065, 89413 pkts/sec analyzed trace file elapsed time: 0:09:20.358860</p>
<p>TCP connection info:</p>
<p>1: 192.168.1.60:pcanywherestat 192.168.1.102:</p>
<p>2571 (a2b) 404&gt; 450\&lt;\2: 192.168.1.60:3356 ftp.</p>
<p>strongmail.net:21 (c2d) 35&gt; 21\&lt;\3: 192.168.1.60:3825 ftp.</p>
<p>strongmail.net:65023 (e2f) 5&gt; 4\&lt;(complete)</p>
<p>4: 192.168.1.102:1339 205.188.8.194:</p>
<p>5190 (g2h) 6&gt; 6\&lt;\5: 192.168.1.102:1490 cs127.</p>
<p>msg.mud.yahoo.com:5050 (i2j) 5&gt; 5\&lt;\6: pyinf111.</p>
<p>google.com:993 192.168.1.102:</p>
<p>3785 (k2l) 13&gt; 14\&lt;\&#x4E0A;&#x9762;&#x7684;&#x8F93;&#x51FA;&#x4E2D;,&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x90FD;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x6E90;&#x4E3B;&#x673A;&#x548C;&#x76EE;&#x7684;&#x4E3B;&#x673A;.tcptrace &#x4F7F;&#x7528;l&#x548C;o&#x9009;&#x9879;&#x53EF;&#x67E5;&#x770B;&#x67D0;&#x4E00;&#x8FDE;&#x63A5;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x6570;&#x636E;.</p>
<p>&#x4EE5;&#x4E0B;&#x7684;&#x7ED3;&#x679C;,&#x5C31;&#x662F;&#x5728;bigstuff &#x6587;&#x4EF6;&#x4E2D;,#16 &#x8FDE;&#x63A5;&#x7684;&#x76F8;&#x5173;&#x7EDF;&#x8BA1;&#x6570;&#x636E;:</p>
<p># tcptrace lo1 bigstuff 1 arg remaining, starting with &apos;bigstuff&apos;</p>
<p>Ostermann&apos;s tcptrace version</p>
<p>6.6.7 Thu Nov 4, 2004</p>
<p>146108 packets seen, 145992 TCP packets traced</p>
<p>elapsed wallclock time: 0:00:00.529361, 276008 pkts/sec analyzed</p>
<p>trace file elapsed time: 0:09:20.358860</p>
<p>TCP connection info:</p>
<p>32 TCP connections traced:</p>
<p>TCP connection 1:</p>
<p>host a: 192.168.1.60:pcanywherestat</p>
<p>host b: 192.168.1.102:2571</p>
<p>complete conn: no (SYNs: 0) (FINs: 0)</p>
<p>first packet: Sun Jul 20 15:58:05.472983 2008</p>
<p>last packet: Sun Jul 20 16:00:04.564716 2008</p>
<p>elapsed time: 0:01:59.091733</p>
<p>total packets: 854</p>
<p>filename: bigstuff</p>
<p>a&gt;b: b&gt;a:</p>
<p>total packets: 404 total packets: 450</p>
<p>ack pkts sent: 404 ack pkts sent: 450</p>
<p>pure acks sent: 13 pure acks sent: 320</p>
<p>sack pkts sent: 0 sack pkts sent: 0</p>
<p>dsack pkts sent: 0 dsack pkts sent: 0</p>
<p>max sack blks/ack: 0 max sack blks/ack: 0</p>
<p>unique bytes sent: 52608 unique bytes sent: 10624</p>
<p>actual data pkts: 391 actual data pkts: 130</p>
<p>actual data bytes: 52608 actual data bytes: 10624</p>
<p>rexmt data pkts: 0 rexmt data pkts: 0</p>
<p>rexmt data bytes: 0 rexmt data bytes: 0</p>
<p>zwnd probe pkts: 0 zwnd probe pkts: 0</p>
<p>zwnd probe bytes: 0 zwnd probe bytes: 0</p>
<p>outoforder pkts: 0 outoforder pkts: 0</p>
<p>pushed data pkts: 391 pushed data pkts: 130</p>
<p>SYN/FIN pkts sent: 0/0 SYN/FIN pkts sent: 0/0</p>
<p>urgent data pkts: 0 pkts urgent data pkts: 0 pkts</p>
<p>urgent data bytes: 0 bytes urgent data bytes: 0 bytes</p>
<p>mss requested: 0 bytes mss requested: 0 bytes</p>
<p>max segm size: 560 bytes max segm size: 176 bytes</p>
<p>min segm size: 48 bytes min segm size: 80 bytes</p>
<p>avg segm size: 134 bytes avg segm size: 81 bytes</p>
<p>max win adv: 19584 bytes max win adv: 65535 bytes</p>
<p>min win adv: 19584 bytes min win adv: 64287 bytes</p>
<p>zero win adv: 0 times zero win adv: 0 times</p>
<p>avg win adv: 19584 bytes avg win adv: 64949 bytes</p>
<p>initial window: 160 bytes initial window: 0 bytes</p>
<p>initial window: 2 pkts initial window: 0 pkts</p>
<p>ttl stream length: NA ttl stream length: NA</p>
<p>missed data: NA missed data: NA</p>
<p>truncated data: 36186 bytes truncated data: 5164 bytes</p>
<p>truncated packets: 391 pkts truncated packets: 130 pkts</p>
<p>data xmit time: 119.092 secs data xmit time: 116.954 secs</p>
<p>idletime max: 441267.1 ms idletime max: 441506.3 ms</p>
<p>throughput: 442 Bps throughput: 89 Bps</p>
<h3 id="832-&#x6848;&#x4F8B;&#x5B66;&#x4E60;-&#x8BA1;&#x7B97;&#x8F6C;&#x64AD;&#x7387;">8.3.2 &#x6848;&#x4F8B;&#x5B66;&#x4E60; &#x8BA1;&#x7B97;&#x8F6C;&#x64AD;&#x7387;</h3>
<p>&#x51E0;&#x4E4E;&#x4E0D;&#x53EF;&#x80FD;&#x786E;&#x5B9A;&#x8BF4;&#x54EA;&#x4E2A;&#x8FDE;&#x63A5;&#x4F1A;&#x6709;&#x4E25;&#x91CD;&#x4E0D;&#x8DB3;&#x7684;&#x8F6C;&#x64AD;&#x95EE;&#x9898;,&#x53EA;&#x662F;&#x9700;&#x8981;&#x5206;&#x6790;,&#x4F7F;&#x7528;tcptrace &#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FC7;&#x6EE4;&#x673A;&#x5236;&#x548C;&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#x627E;&#x51FA;&#x51FA;&#x95EE;&#x9898;&#x7684;&#x8FDE;&#x63A5;.&#x4E00;&#x4E2A;&#x5F88;&#x7E41;&#x5FD9;&#x7684;&#x7F51;&#x7EDC;&#x4E2D;,&#x4F1A;&#x6709;&#x5F88;&#x591A;&#x7684;&#x8FDE;&#x63A5;,&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;&#x8FDE;&#x63A5;&#x90FD;&#x4F1A;&#x6709;&#x8F6C;&#x64AD;.&#x627E;&#x51FA;&#x5176;&#x4E2D;&#x6700;&#x591A;&#x7684;&#x4E00;&#x4E2A;,&#x8FD9;&#x5C31;&#x662F;&#x95EE;&#x9898;&#x7684;&#x5173;&#x952E;.</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x91CC;,tcptrace &#x5C06;&#x627E;&#x51FA;&#x90A3;&#x4E9B;&#x8F6C;&#x64AD;&#x5927;&#x4E8E;100 segments(&#x5206;&#x6BB5;&#x6570;)&#x7684;&#x8FDE;&#x63A5;:</p>
<p># tcptrace f&apos;rexmit_segs&gt;100&apos; bigstuff</p>
<p>Output filter: ((c_rexmit_segs&gt;100)OR(s_rexmit_segs&gt;100))</p>
<p>1 arg remaining, starting with &apos;bigstuff&apos;</p>
<p>Ostermann&apos;s tcptrace version6.6.7 Thu Nov 4, 2004</p>
<p>146108 packets seen, 145992 TCP packets traced</p>
<p>elapsed wallclock time: 0:00:00.687788, 212431 pkts/sec analyzed</p>
<p>trace file elapsed time: 0:09:20.358860</p>
<p>TCP connection info:</p>
<p>16: ftp.strongmail.net:65014 192.168.1.60:</p>
<p>2158 (ae2af) 18695&gt; 9817\&lt;\&#x5728;&#x8FD9;&#x4E2A;&#x8F93;&#x51FA;&#x4E2D;,&#x662F;#16 &#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x91CC;,&#x8D85;&#x8FC7;&#x4E86;100 &#x8F6C;&#x64AD;.&#x73B0;&#x5728;,&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x5173;&#x4E8E;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x5176;&#x4ED6;&#x4FE1;&#x606F;:</p>
<p># tcptrace l</p>
<p>o16</p>
<p>bigstuff</p>
<p>arg remaining, starting with &apos;bigstuff&apos;</p>
<p>Ostermann&apos;s tcptrace version 6.6.7 ThuNov 4, 2004</p>
<p>146108 packets seen, 145992 TCP packets traced</p>
<p>elapsed wallclock time: 0:00:01.355964, 107752 pkts/sec analyzed</p>
<p>trace file elapsed time: 0:09:20.358860</p>
<p>TCP connection info:</p>
<p>32 TCP connections traced:</p>
<p>================================</p>
<p>TCP connection 16:</p>
<p>host ae: ftp.strongmail.net:65014</p>
<p>host af: 192.168.1.60:2158</p>
<p>complete conn: no (SYNs: 0) (FINs: 1)</p>
<p>first packet: Sun Jul 20 16:04:33.257606 2008</p>
<p>last packet: Sun Jul 20 16:07:22.317987 2008</p>
<p>elapsed time: 0:02:49.060381</p>
<p>total packets: 28512</p>
<p>filename: bigstuff</p>
<p>ae&gt;</p>
<p>af: af&gt;</p>
<p>ae:</p>
<p>unique bytes sent: 25534744 unique bytes sent: 0</p>
<p>actual data pkts: 18695 actual data pkts: 0</p>
<p>actual data bytes: 25556632 actual data bytes: 0</p>
<p>rexmt data pkts: 1605 rexmt data pkts: 0</p>
<p>rexmt data bytes: 2188780 rexmt data bytes: 0</p>
<p>&#x8BA1;&#x7B97;&#x8F6C;&#x64AD;&#x7387;:</p>
<p>rexmt/actual * 100 = Retransmission rate</p>
<p>1605/18695* 100 = 8.5%</p>
<p>&#x8FD9;&#x4E2A;&#x6162;&#x8FDE;&#x63A5;&#x7684;&#x539F;&#x56E0;,&#x5C31;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x6709;8.5% &#x7684;&#x8F6C;&#x64AD;&#x7387;.</p>
<h3 id="833-&#x6848;&#x4F8B;&#x5B66;&#x4E60;-&#x8BA1;&#x7B97;&#x8F6C;&#x64AD;&#x65F6;&#x95F4;">8.3.3 &#x6848;&#x4F8B;&#x5B66;&#x4E60; &#x8BA1;&#x7B97;&#x8F6C;&#x64AD;&#x65F6;&#x95F4;</h3>
<p>tcptrace &#x5DE5;&#x5177;&#x6709;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x6A21;&#x5757;&#x5C55;&#x793A;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;,&#x6309;&#x7167;&#x5C5E;&#x6027;,&#x5176;&#x4E2D;&#x5C31;&#x6709;protocol(&#x534F;&#x8BAE;),port(&#x7AEF;&#x53E3;),time&#x7B49;&#x7B49;.Slice module&#x4F7F;&#x5F97;&#x4F60;&#x53EF;&#x89C2;&#x5BDF;&#x5728;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x7684;TCP &#x6027;&#x80FD;.&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x8F6C;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;,&#x67E5;&#x770B;&#x5176;&#x4ED6;&#x6027;&#x80FD;&#x6570;&#x636E;,&#x4EE5;&#x786E;&#x5B9A;&#x627E;&#x51FA;&#x74F6;&#x9888;.</p>
<p>&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x793A;&#x8303;&#x4E86;,tcptrace &#x662F;&#x600E;&#x6837;&#x4F7F;&#x7528;slice &#x6A21;&#x5F0F;&#x7684;:</p>
<blockquote>
<p># tcptrace &#x2013;xslice bigfile</p>
</blockquote>
<p>&#x4EE5;&#x4E0A;&#x547D;&#x4EE4;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;slice.dat &#x6587;&#x4EF6;&#x5728;&#x73B0;&#x5728;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E2D;.&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5185;&#x5BB9;,&#x5305;&#x542B;&#x662F;&#x6BCF;15&#x79D2;&#x95F4;&#x9694;&#x5185;&#x8F6C;&#x64AD;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;:</p>
<p># ls l</p>
<p>slice.dat</p>
<p>rwrr1</p>
<p>root root 3430 Jul 10 22:50 slice.dat</p>
<p># more slice.dat</p>
<p>date segs bytes rexsegs rexbytes new active</p>
<p>22:</p>
<p>19:41.913288 46 5672 0 0 1 1</p>
<p>22:19:56.913288 131 25688 0 0 0 1</p>
<p>22:20:11.913288 0 0 0 0 0 0</p>
<p>22:20:26.913288 5975 4871128 0 0 0 1</p>
<p>22:20:41.913288 31049 25307256 0 0 0 1</p>
<p>22:20:56.913288 23077 19123956 40 59452 0 1</p>
<p>22:21:11.913288 26357 21624373 5 7500 0 1</p>
<p>22:21:26.913288 20975 17248491 3 4500 12 13</p>
<p>22:21:41.913288 24234 19849503 10 15000 3 5</p>
<p>22:21:56.913288 27090 22269230 36 53999 0 2</p>
<p>22:22:11.913288 22295 18315923 9 12856 0 2</p>
<p>22:22:26.913288 8858 7304603 3 4500 0 1</p>
<h2 id="84-&#x7ED3;&#x8BBA;">8.4 &#x7ED3;&#x8BBA;</h2>
<p>&#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x6027;&#x80FD;&#x7531;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x90E8;&#x5206;&#x7EC4;&#x6210;:</p>
<p>1,&#x68C0;&#x67E5;&#x5E76;&#x786E;&#x5B9A;&#x6240;&#x6709;&#x7F51;&#x5361;&#x90FD;&#x5DE5;&#x4F5C;&#x5728;&#x6B63;&#x786E;&#x7684;&#x901F;&#x7387;.</p>
<p>2,&#x68C0;&#x67E5;&#x6BCF;&#x5757;&#x7F51;&#x5361;&#x7684;&#x541E;&#x5410;&#x91CF;,&#x5E76;&#x786E;&#x8BA4;&#x5176;&#x5904;&#x4E8E;&#x670D;&#x52A1;&#x65F6;&#x7684;&#x7F51;&#x7EDC;&#x901F;&#x5EA6;.</p>
<p>3,&#x76D1;&#x63A7;&#x7F51;&#x7EDC;&#x6D41;&#x91CF;&#x7684;&#x7C7B;&#x578B;,&#x5E76;&#x786E;&#x5B9A;&#x9002;&#x5F53;&#x7684;&#x6D41;&#x91CF;&#x4F18;&#x5148;&#x7EA7;&#x7B56;&#x7565;.</p>
<p>&#x7ED3;&#x675F;&#x8BED;: &#x8FD9;&#x662F;&#x8BE5;&#x8BD1;&#x6587;&#x7684;&#x6700;&#x540E;&#x4E00;&#x7BC7;,&#x5728;&#x8FD9;&#x7BC7;&#x4E2D;,&#x4F5C;&#x8005;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x6848;&#x4F8B;&#x73AF;&#x5883;,&#x7528;&#x4E4B;&#x524D;&#x51E0;&#x7BC7;&#x6240;&#x9610;&#x8FF0;&#x7684;&#x7406;&#x8BBA;&#x4EE5;&#x53CA;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x5DE5;&#x5177;,&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x7684;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x68C0;&#x67E5;.&#x5BF9;&#x5927;&#x5BB6;&#x66F4;&#x597D;&#x7406;&#x89E3;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x76D1;&#x63A7;,&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x5B9E;&#x6218;&#x6F14;&#x4E60;.BTW:&#x5728;&#x4E2D;&#x6587;&#x6280;&#x672F;&#x7F51;&#x7AD9;&#x4E0A;,&#x7C7B;&#x4F3C;&#x5185;&#x5BB9;&#x7684;&#x6587;&#x7AE0;,&#x5927;&#x4F53;&#x662F;&#x6765;&#x81EA;&#x8BE5;&#x4F5C;&#x8005;0607&#x5E74;&#x6240;&#x8457;&#x8BBA;&#x6587;,&#x6B64;&#x8BD1;&#x6587;&#x662F;&#x5EFA;&#x7ACB;&#x5728;&#x4F5C;&#x8005;&#x4E3A;OSCON 2009&#x91CD;&#x5199;&#x57FA;&#x7840;&#x4E0A;&#x7684;.&#x6240;&#x4EE5;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x53EF;&#x80FD;&#x4F1A;&#x5B58;&#x5728;&#x91CD;&#x590D;&#x96F7;&#x540C;,&#x7279;&#x6B64;&#x8BF4;&#x660E;&#x4E0B;.&#x9644;&#x5F55; A: &#x6848;&#x4F8B;&#x5B66;&#x4E60; &#x6027;&#x80FD;&#x76D1;&#x63A7;&#x4E4B;&#x5FAA;&#x5E8F;&#x6E10;&#x8FDB; &#x67D0;&#x4E00;&#x5929;,&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x6253;&#x7535;&#x8BDD;&#x6765;&#x9700;&#x8981;&#x6280;&#x672F;&#x5E2E;&#x52A9;,&#x5E76;&#x62B1;&#x6028;&#x5E73;&#x5E38;15&#x79D2;&#x5C31;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x7684;&#x7F51;&#x9875;&#x73B0;&#x5728;&#x9700;&#x8981;20&#x5206;&#x949F;&#x624D;&#x53EF;&#x4EE5;&#x6253;&#x5F00;.</p>
<p>&#x5177;&#x4F53;&#x7CFB;&#x7EDF;&#x914D;&#x7F6E;&#x5982;&#x4E0B;:</p>
<p>RedHat Enterprise Linux 3 update 7</p>
<p>Dell 1850 Dual Core Xenon Processors, 2 GB RAM, 75GB 15K Drives</p>
<p>Custom LAMP software stack(Llinux+apache+mysql+php &#x73AF;&#x5883;)</p>
<p>&#x6027;&#x80FD;&#x5206;&#x6790;&#x4E4B;&#x6B65;&#x9AA4;</p>
<h3 id="1-&#x9996;&#x5148;&#x4F7F;&#x7528;vmstat-&#x67E5;&#x770B;&#x5927;&#x81F4;&#x7684;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x60C5;&#x51B5;">1. &#x9996;&#x5148;&#x4F7F;&#x7528;vmstat &#x67E5;&#x770B;&#x5927;&#x81F4;&#x7684;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x60C5;&#x51B5;:</h3>
<p># vmstat 1 10</p>
<table>
<thead>
<tr>
<th>r</th>
<th>b</th>
<th>swpd</th>
<th>free</th>
<th>buff</th>
<th>cache</th>
<th>si</th>
<th>so</th>
<th>bi</th>
<th>bo</th>
<th>in</th>
<th>cs</th>
<th>us</th>
<th>sy</th>
<th>id</th>
<th>wa</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>249844</td>
<td>19144</td>
<td>18532</td>
<td>1221212</td>
<td>0</td>
<td>0</td>
<td>7</td>
<td>3</td>
<td>22</td>
<td>17</td>
<td>25</td>
<td>8</td>
<td>17</td>
<td>18</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>249844</td>
<td>17828</td>
<td>18528</td>
<td>1222696</td>
<td>0</td>
<td>0</td>
<td>40448</td>
<td>8</td>
<td>1384</td>
<td>1138</td>
<td>13</td>
<td>7</td>
<td>65</td>
<td>14</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>249844</td>
<td>18004</td>
<td>18528</td>
<td>1222756</td>
<td>0</td>
<td>0</td>
<td>13568</td>
<td>4</td>
<td>623</td>
<td>534</td>
<td>3</td>
<td>4</td>
<td>56</td>
<td>37</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>249844</td>
<td>17840</td>
<td>18528</td>
<td>1223200</td>
<td>0</td>
<td>0</td>
<td>35200</td>
<td>0</td>
<td>1285</td>
<td>1017</td>
<td>17</td>
<td>7</td>
<td>56</td>
<td>20</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>249844</td>
<td>22488</td>
<td>18528</td>
<td>1218608</td>
<td>0</td>
<td>0</td>
<td>38656</td>
<td>0</td>
<td>1294</td>
<td>1034</td>
<td>17</td>
<td>7</td>
<td>58</td>
<td>18</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>249844</td>
<td>21228</td>
<td>18544</td>
<td>1219908</td>
<td>0</td>
<td>0</td>
<td>13696</td>
<td>484</td>
<td>609</td>
<td>559</td>
<td>5</td>
<td>3</td>
<td>54</td>
<td>38</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>249844</td>
<td>17752</td>
<td>18544</td>
<td>1223376</td>
<td>0</td>
<td>0</td>
<td>36224</td>
<td>4</td>
<td>1469</td>
<td>1035</td>
<td>10</td>
<td>6</td>
<td>67</td>
<td>17</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>249844</td>
<td>17856</td>
<td>18544</td>
<td>1208520</td>
<td>0</td>
<td>0</td>
<td>28724</td>
<td>0</td>
<td>950</td>
<td>941</td>
<td>33</td>
<td>12</td>
<td>49</td>
<td>7</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>249844</td>
<td>17748</td>
<td>18544</td>
<td>1222468</td>
<td>0</td>
<td>0</td>
<td>40968</td>
<td>8</td>
<td>1266</td>
<td>1164</td>
<td>17</td>
<td>9</td>
<td>59</td>
<td>16</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>249844</td>
<td>17912</td>
<td>18544</td>
<td>1222572</td>
<td>0</td>
<td>0</td>
<td>41344</td>
<td>12</td>
<td>1237</td>
<td>1080</td>
<td>13</td>
<td>8</td>
<td>65</td>
<td>13</td>
</tr>
</tbody>
</table>
<p>&#x5206;&#x6790;:</p>
<ol>
<li>&#x4E0D;&#x4F1A;&#x662F;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x5BFC;&#x81F4;,&#x56E0;&#x4E3A;swapping &#x59CB;&#x7EC8;&#x6CA1;&#x53D8;&#x5316;(si &#x548C; so).&#x5C3D;&#x7BA1;&#x7A7A;&#x95F2;&#x5185;&#x5B58;&#x4E0D;&#x591A;(free),&#x4F46;swpd &#x4E5F;&#x6CA1;&#x6709;&#x53D8;&#x5316;.</li>
<li>CPU &#x65B9;&#x9762;&#x4E5F;&#x6CA1;&#x6709;&#x592A;&#x5927;&#x95EE;&#x9898;,&#x5C3D;&#x7BA1;&#x6709;&#x4E00;&#x4E9B;&#x8FD0;&#x884C;&#x961F;&#x5217;(procs r),&#x4F46;&#x5904;&#x7406;&#x5668;&#x8FD8;&#x59CB;&#x7EC8;&#x6709;50% &#x591A;&#x7684;idle(CPU id).</li>
<li>&#x6709;&#x592A;&#x591A;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;(cs)&#x4EE5;&#x53CA;disk block&#x4ECE;RAM&#x4E2D;&#x88AB;&#x8BFB;&#x5165;(bo).</li>
<li>CPU &#x8FD8;&#x6709;&#x5E73;&#x5747;20% &#x7684;I/O &#x7B49;&#x5F85;&#x60C5;&#x51B5;.</li>
</ol>
<p>&#x7ED3;&#x8BBA;:</p>
<p>&#x4ECE;&#x4EE5;&#x4E0A;&#x603B;&#x7ED3;&#x51FA;,&#x8FD9;&#x662F;&#x4E00;&#x4E2A;I/O &#x74F6;&#x9888;.</p>
<h3 id="2-&#x7136;&#x540E;&#x4F7F;&#x7528;iostat-&#x68C0;&#x67E5;&#x662F;&#x8C01;&#x5728;&#x53D1;&#x51FA;io-&#x8BF7;&#x6C42;">2. &#x7136;&#x540E;&#x4F7F;&#x7528;iostat &#x68C0;&#x67E5;&#x662F;&#x8C01;&#x5728;&#x53D1;&#x51FA;IO &#x8BF7;&#x6C42;:</h3>
<p># iostat x 1</p>
<p>Linux 2.4.2140.</p>
<p>ELsmp (mail.example.com) 03/26/2007</p>
<p>avgcpu:</p>
<p>%user %nice %sys %idle</p>
<p>30.00 0.00 9.33 60.67</p>
<p>Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrqsz avgqusz await svctm %util</p>
<p>/dev/sda 7929.01 30.34 1180.91 14.23 7929.01 357.84 3964.50 178.92 6.93 0.39 0.03 0.06 6.69</p>
<p>/dev/sda1 2.67 5.46 0.40 1.76 24.62 57.77 12.31 28.88 38.11 0.06 2.78 1.77 0.38</p>
<p>/dev/sda2 0.00 0.30 0.07 0.02 0.57 2.57 0.29 1.28 32.86 0.00 3.81 2.64 0.03</p>
<p>/dev/sda3 7929.01 24.58 1180.44 12.45 7929.01 297.50 3964.50 148.75 6.90 0.32 0.03 0.06 6.68</p>
<p>avgcpu:</p>
<p>%user %nice %sys %idle</p>
<p>9.50 0.00 10.68 79.82</p>
<p>Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrqsz avgqusz await svctm %util</p>
<p>/dev/sda 0.00 0.00 1195.24 0.00 0.00 0.00 0.00 0.00 0.00 43.69 3.60 0.99 117.86</p>
<p>/dev/sda1 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00</p>
<p>/dev/sda2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00</p>
<p>/dev/sda3 0.00 0.00 1195.24 0.00 0.00 0.00 0.00 0.00 0.00 43.69 3.60 0.99 117.86</p>
<p>avgcpu:</p>
<p>%user %nice %sys %idle</p>
<p>9.23 0.00 10.55 79.22</p>
<p>Device: rrqm/s wrqm/s r/s w/s rsec/s wsec/s rkB/s wkB/s avgrqsz avgqusz await svctm %util</p>
<p>/dev/sda 0.00 0.00 1200.37 0.00 0.00 0.00 0.00 0.00 0.00 41.65 2.12 0.99 112.51</p>
<p>/dev/sda1 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00</p>
<p>/dev/sda2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00</p>
<p>/dev/sda3 0.00 0.00 1200.37 0.00 0.00 0.00 0.00 0.00 0.00 41.65 2.12 0.99 112.51</p>
<p>&#x5206;&#x6790;:</p>
<p>1,&#x770B;&#x4E0A;&#x53BB;&#x53EA;&#x6709;/dev/sda3 &#x5206;&#x533A;&#x5F88;&#x6D3B;&#x8DC3;,&#x5176;&#x4ED6;&#x5206;&#x533A;&#x90FD;&#x5F88;&#x7A7A;&#x95F2;.</p>
<p>2,&#x5DEE;&#x4E0D;&#x591A;&#x6709;1200 &#x8BFB;IOPS,&#x78C1;&#x76D8;&#x672C;&#x8EAB;&#x662F;&#x652F;&#x6301;200 IOPS&#x5DE6;&#x53F3;(&#x53C2;&#x8003;&#x4E4B;&#x524D;&#x7684;IOPS &#x8BA1;&#x7B97;&#x516C;&#x5F0F;).</p>
<p>3,&#x6709;&#x8D85;&#x8FC7;2&#x79D2;,&#x5B9E;&#x9645;&#x4E0A;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x8BFB;&#x78C1;&#x76D8;(rkb/s).&#x8FD9;&#x548C;&#x5728;vmstat &#x770B;&#x5230;&#x6709;&#x5927;&#x91CF;I/O wait&#x662F;&#x6709;&#x5173;&#x7CFB;&#x7684;.</p>
<p>4,&#x5927;&#x91CF;&#x7684;read IOPS(r/s)&#x548C;&#x5728;vmstat &#x4E2D;&#x5927;&#x91CF;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x662F;&#x5339;&#x914D;&#x7684;.&#x8FD9;&#x8BF4;&#x660E;&#x5F88;&#x591A;&#x8BFB;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x5931;&#x8D25;&#x7684;.</p>
<p>&#x7ED3;&#x8BBA;:</p>
<p>&#x4ECE;&#x4EE5;&#x4E0A;&#x603B;&#x7ED3;&#x51FA;,&#x90E8;&#x5206;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E26;&#x6765;&#x7684;&#x8BFB;&#x8BF7;&#x6C42;,&#x5DF2;&#x7ECF;&#x8D85;&#x51FA;&#x4E86;I/O &#x5B50;&#x7CFB;&#x7EDF;&#x53EF;&#x5904;&#x7406;&#x7684;&#x8303;&#x56F4;.</p>
<h3 id="3-&#x4F7F;&#x7528;top-&#x6765;&#x67E5;&#x627E;&#x7CFB;&#x7EDF;&#x6700;&#x6D3B;&#x8DC3;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;">3. &#x4F7F;&#x7528;top &#x6765;&#x67E5;&#x627E;&#x7CFB;&#x7EDF;&#x6700;&#x6D3B;&#x8DC3;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;</h3>
<p># top d</p>
<p>1</p>
<p>11:46:11 up 3 days, 19:13, 1 user, load average: 1.72, 1.87, 1.80</p>
<p>176 processes: 174 sleeping, 2 running, 0 zombie, 0 stopped</p>
<p>CPU states: cpu user nice system irq softirq iowait idle</p>
<p>total 12.8% 0.0% 4.6% 0.2% 0.2% 18.7% 63.2%</p>
<p>cpu00 23.3% 0.0% 7.7% 0.0% 0.0% 36.8% 32.0%</p>
<p>cpu01 28.4% 0.0% 10.7% 0.0% 0.0% 38.2% 22.5%</p>
<p>cpu02 0.0% 0.0% 0.0% 0.9% 0.9% 0.0% 98.0%</p>
<p>cpu03 0.0% 0.0% 0.0% 0.0% 0.0% 0.0% 100.0%</p>
<p>Mem: 2055244k av, 2032692k used, 22552k free, 0k shrd, 18256k buff 1216212k actv, 513216k in_d, 25520k in_c</p>
<p>Swap: 4192956k av, 249844k used, 3943112k free 1218304k cached</p>
<p>PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND</p>
<p>14939 mysql 25 0 379M 224M 1117 R 38.2 25.7% 15:17.78 mysqld</p>
<p>4023 root 15 0 2120 972 784 R 2.0 0.3 0:00.06 top</p>
<p>1 root 15 0 2008 688 592 S 0.0 0.2 0:01.30 init</p>
<p>2 root 34 19 0 0 0 S 0.0 0.0 0:22.59 ksoftirqd/0</p>
<p>3 root RT 0 0 0 0 S 0.0 0.0 0:00.00 watchdog/0</p>
<p>4 root 10 5</p>
<p>0 0 0 S 0.0 0.0 0:00.05 events/0</p>
<p>&#x5206;&#x6790;:</p>
<p>1,&#x5360;&#x7528;&#x8D44;&#x6E90;&#x6700;&#x591A;&#x7684;&#x597D;&#x50CF;&#x5C31;&#x662F;mysql &#x8FDB;&#x7A0B;,&#x5176;&#x4ED6;&#x90FD;&#x5904;&#x4E8E;&#x5B8C;&#x5168;idle &#x72B6;&#x6001;.</p>
<p>2,&#x5728;top(wa) &#x770B;&#x5230;&#x7684;&#x6570;&#x503C;,&#x548C;&#x5728;vmstat &#x770B;&#x5230;&#x7684;wio &#x6570;&#x503C;&#x662F;&#x6709;&#x5173;&#x8054;&#x7684;.</p>
<p>&#x7ED3;&#x8BBA;:</p>
<p>&#x4ECE;&#x4EE5;&#x4E0A;&#x603B;&#x7ED3;&#x51FA;,&#x4F3C;&#x4E4E;&#x5C31;&#x53EA;&#x6709;mysql &#x8FDB;&#x7A0B;&#x5728;&#x8BF7;&#x6C42;&#x8D44;&#x6E90;,&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x63A8;&#x8BBA;&#x5B83;&#x5C31;&#x662F;&#x5BFC;&#x81F4;&#x95EE;&#x9898;&#x7684;&#x5173;&#x952E;.</p>
<h3 id="4-&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x786E;&#x5B9A;&#x662F;mysql-&#x5728;&#x53D1;&#x51FA;&#x8BFB;&#x8BF7;&#x6C42;&#x4F7F;&#x7528;strace-&#x6765;&#x68C0;&#x67E5;&#x5B83;&#x5728;&#x8BFB;&#x8BF7;&#x6C42;&#x4EC0;&#x4E48;">4. &#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x786E;&#x5B9A;&#x662F;mysql &#x5728;&#x53D1;&#x51FA;&#x8BFB;&#x8BF7;&#x6C42;,&#x4F7F;&#x7528;strace &#x6765;&#x68C0;&#x67E5;&#x5B83;&#x5728;&#x8BFB;&#x8BF7;&#x6C42;&#x4EC0;&#x4E48;.</h3>
<p># strace -p 14939</p>
<p>Process 14939 attached interrupt</p>
<p>to quit</p>
<p>read(29, &quot;\3\1\237\1\366\337\1\222%\4\2\0\0\0\0\0012P/d&quot;, 20) = 20</p>
<p>read(29, &quot;ata1/strongmail/log/strongmaild&quot;...,</p>
<p>\399) = 399</p>
<p>_llseek(29, 2877621036, [2877621036], SEEK_SET) = 0</p>
<p>read(29, &quot;\1\1\241\366\337\1\223%\4\2\0\0\0\0\0012P/da&quot;, 20) = 20</p>
<p>read(29, &quot;ta1/strongmail/log/strongmailde&quot;...,</p>
<p>\400) = 400</p>
<p>_llseek(29, 2877621456, [2877621456], SEEK_SET) = 0</p>
<p>read(29, &quot;\1\1\235\366\337\1\224%\4\2\0\0\0\0\0012P/da&quot;, 20) = 20</p>
<p>read(29, &quot;ta1/strongmail/log/strongmailde&quot;...,</p>
<p>\396) = 396</p>
<p>_llseek(29, 2877621872, [2877621872], SEEK_SET) = 0</p>
<p>read(29, &quot;\1\1\245\366\337\1\225%\4\2\0\0\0\0\0012P/da&quot;, 20) = 20</p>
<p>read(29, &quot;ta1/strongmail/log/strongmailde&quot;...,</p>
<p>\404) = 404</p>
<p>_llseek(29, 2877622296, [2877622296], SEEK_SET) = 0</p>
<p>read(29, &quot;\3\1\236\2\366\337\1\226%\4\2\0\0\0\0\0012P/d&quot;, 20) = 20</p>
<p>&#x5206;&#x6790;:</p>
<p>1,&#x5927;&#x91CF;&#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#x90FD;&#x5728;&#x4E0D;&#x65AD;&#x5BFB;&#x9053;&#x4E2D;,&#x8BF4;&#x660E;mysql &#x8FDB;&#x7A0B;&#x4EA7;&#x751F;&#x7684;&#x662F;&#x968F;&#x673A;IO.</p>
<p>2,&#x770B;&#x4E0A;&#x53BB;&#x4F3C;&#x4E4E;&#x662F;,&#x67D0;&#x4E00;sql &#x67E5;&#x8BE2;&#x5BFC;&#x81F4;&#x8BFB;&#x64CD;&#x4F5C;.</p>
<p>&#x7ED3;&#x8BBA;:</p>
<p>&#x4ECE;&#x4EE5;&#x4E0A;&#x603B;&#x7ED3;&#x51FA;,&#x6240;&#x6709;&#x7684;&#x8BFB;IOPS &#x90FD;&#x662F;mysql &#x8FDB;&#x7A0B;&#x5728;&#x6267;&#x884C;&#x67D0;&#x4E9B;&#x8BFB;&#x67E5;&#x8BE2;&#x65F6;&#x4EA7;&#x751F;&#x7684;.</p>
<h3 id="5-&#x4F7F;&#x7528;mysqladmin-&#x547D;&#x4EE4;&#x6765;&#x67E5;&#x627E;&#x662F;&#x54EA;&#x4E2A;&#x6162;&#x67E5;&#x8BE2;&#x5BFC;&#x81F4;&#x7684;">5. &#x4F7F;&#x7528;mysqladmin &#x547D;&#x4EE4;,&#x6765;&#x67E5;&#x627E;&#x662F;&#x54EA;&#x4E2A;&#x6162;&#x67E5;&#x8BE2;&#x5BFC;&#x81F4;&#x7684;.</h3>
<p># ./mysqladmin pstrongmail</p>
<p>processlist</p>
<p>Id | User | Host | db | Command | Time | State | Info</p>
<p>1 | root | localhost | strongmail | Sleep | 10 | |</p>
<p>| 2 | root | localhost | strongmail | Sleep | 8 | |</p>
<p>| 3 | root | localhost | root | Query | 94 | Updating | update <code>failures</code> set <code>update_datasource</code>=&apos;Y&apos; where database_id=&apos;32&apos; and update_datasource=&apos;N&apos; and |</p>
<p>| 14 | root | localhost | | Query | 0 | | show processlist</p>
<p>&#x5206;&#x6790;:</p>
<p>1,MySQL &#x6570;&#x636E;&#x5E93;&#x91CC;,&#x4F3C;&#x4E4E;&#x5728;&#x4E0D;&#x65AD;&#x7684;&#x8FD0;&#x884C;table update&#x67E5;&#x8BE2;.</p>
<p>2,&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;update &#x67E5;&#x8BE2;,&#x6570;&#x636E;&#x5E93;&#x662F;&#x5BF9;&#x6240;&#x6709;&#x7684;table &#x8FDB;&#x884C;&#x7D22;&#x5F15;.</p>
<p>&#x7ED3;&#x8BBA;:&#x4ECE;&#x4EE5;&#x4E0A;&#x603B;&#x7ED3;&#x51FA;,MySQL&#x91CC;&#x8FD9;&#x4E9B;update &#x67E5;&#x8BE2;&#x95EE;&#x9898;,&#x90FD;&#x662F;&#x5728;&#x5C1D;&#x8BD5;&#x5BF9;&#x6240;&#x6709;table &#x8FDB;&#x884C;&#x7D22;&#x5F15;.&#x8FD9;&#x4E9B;&#x4EA7;&#x751F;&#x7684;&#x8BFB;&#x8BF7;&#x6C42;&#x6B63;&#x662F;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x4E0B;&#x964D;&#x7684;&#x539F;&#x56E0;.&#x540E;&#x7EED;&#x628A;&#x4EE5;&#x4E0A;&#x8FD9;&#x4E9B;&#x6027;&#x80FD;&#x4FE1;&#x606F;&#x79FB;&#x4EA4;&#x7ED9;&#x4E86;&#x76F8;&#x5173;&#x5F00;&#x53D1;&#x4EBA;&#x5458;,&#x7528;&#x4E8E;&#x5206;&#x6790;&#x4ED6;&#x4EEC;&#x7684;PHP &#x4EE3;&#x7801;.&#x4E00;&#x4E2A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5BF9;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x4E86;&#x4E34;&#x65F6;&#x6027;&#x4F18;&#x5316;.&#x67D0;&#x4E2A;&#x67E5;&#x8BE2;&#x5982;&#x679C;&#x51FA;&#x9519;&#x4E86;,&#x4E5F;&#x6700;&#x591A;&#x5230;100K&#x8BB0;&#x5F55;.&#x6570;&#x636E;&#x5E93;&#x672C;&#x8EAB;&#x8003;&#x8651;&#x6700;&#x591A;&#x5B58;&#x5728;4&#x767E;&#x4E07;&#x8BB0;&#x5F55;.&#x6700;&#x540E;,&#x8FD9;&#x4E2A;&#x67E5;&#x8BE2;&#x4E0D;</p>
<p>&#x4F1A;&#x518D;&#x7ED9;&#x6570;&#x636E;&#x5E93;&#x5E26;&#x6765;&#x8D1F;&#x62C5;&#x4E86;.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="微服务与RPC.html" class="navigation navigation-prev " aria-label="Previous page: 微服务与RPC">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="服务器高可用.html" class="navigation navigation-next " aria-label="Next page: 服务器高可用">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"服务器性能瓶颈","level":"1.9.2.15","depth":3,"next":{"title":"服务器高可用","level":"1.9.2.16","depth":3,"path":"游戏服务器/技术/服务器高可用.md","ref":"游戏服务器/技术/服务器高可用.md","articles":[]},"previous":{"title":"微服务与RPC","level":"1.9.2.14","depth":3,"path":"游戏服务器/技术/微服务与RPC.md","ref":"游戏服务器/技术/微服务与RPC.md","articles":[]},"dir":"ltr"},"config":{"plugins":["expandable-chapters"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"expandable-chapters":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Jin","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Run","language":"zh-hans","gitbook":"*","description":"知识树"},"file":{"path":"游戏服务器/技术/服务器性能瓶颈.md","mtime":"2021-11-24T06:54:20.391Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-12-05T14:32:41.617Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

