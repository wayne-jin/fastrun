# 右值引用

### **左值引用**

引用类型又称之为”左值引用“，顾名思义，引用只能引用一个左值，而不能是右值

```c++
string& s = string("hello");//error,这里引用了右值
```

**但常量引用可以引用一个右值**

```c++
const string& s = string("hello");
```

```C++
void foo(string& s){};
foo("hello"); //error 一个右值无法转换成左值引用
void foo1(const string& s){};
foo1("hello"); //一个右值可以转换成常量引用
```

```C++
int a = 10;
const int b = 20;

const int& c = a;//引用非常量右值
const int& d = b;//引用常量左值
const int& e = 10+20 //引用右值（正常来说，10+20这一右值会在表示结束时被销毁，但是常量引用演唱了其生命周期）
```

  


### 右值引用

右值引用是C++11的新特性，主要解决”移动语义“，以及”完美转发“，右值引用的标志是&&，顾名思义，右值引用专门为右值而生，可以指向右值，不能指向左值

```C++
int &&a = 5;
int b = 5;
int &&aa = b;//error，右值引用不可以指向左值

a = 6;//右值引用的用途，可以修改右值
```

**右值引用本身是一个左值**，这句话听起来有点难理解，但是右值引用是一个变量，而变量一般都是左值

```c++
int && s = 1;
int && q = s; //error 此时s为左值
```

右值引用由于引用的是右值，而右值又是临时的，随时可能被销毁的对象。因此在使用右值引用的地方，我们可以随意接管所引用对象的资源，而不用担心内存泄漏，数据被更改等情况

右值引用可实现移动语义和完美转发这两特性，它的主要目的有两方面：

* 消除两个对象交互时不必要的对象拷贝，节省运算存储资源，提高效率
* 能够更简洁明确的定义泛型函数
  
