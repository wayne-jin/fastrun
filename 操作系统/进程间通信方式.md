# 进程间通信方式

### 简述进程间通信的方法

每个进程各自有不同的用户地址空间，任何一个进程的全局变量在另一个进程中都看不到，**所以进程间要交换数据必须要通过内核**在内核中开辟一块缓冲区，进程A把数据从用户空间拷到内核缓冲区，进程B再从内核缓冲区中把数据读走，内核提供这种机制称为进程间通信

不同进程间通信的本质：进程之间可以看到一份公共资源，而提供这份资源的形式或者提供者不同造成了通信方式不同

进程间通信主要包括管道，系统IPC(包括消息队列，信号量，信号，共享内存等)以及套接字socket  


#### 管道

* **无名管道**
  他是半双工的，具有固定的读端和写端；它只能用于具有亲缘关系的进程间通信(父子进程或者兄弟进程)；它可以看成一种特殊的文件，对于它的读写也可以使用普通的read,write等函数，但是它不是普通的文件，并不属于其他任何文件系统，并且只存于内存中
  * 优点：简单方便
  * 缺点：局限于单向通信，只能创建在它的进程以及其有亲缘关系的进程之间，缓冲区有限
* **FIFO，也成为命名管道**
  FIFO可以在无关的进程之间交换数据，与无名管道不同，FIFO有路径名与之相关联，它以一种特殊设备文件形式存在于文件系统中
  * 优点：可以实现任意关系的进程间通信
  * 缺点：长期存于系统中，使用不当容易出错；缓冲区有限

#### 系统IPC

* **消息队列**
  是消息的链接表，存放于内核中，一个消息队列由一个标识符（队列ID）来标识，具有写权限的进程可以按照一定的规则向消息队列中添加新信息，对消息队列有读权限的可以从消息队列中读取信息

  * 优点：可以实现任意进程间的通信，并通过系统调用函数来实现消息发送和接收之间的同步，无需考虑同步问题，方便
  * 缺点：信息的复制需要额外消耗 CPU 的时间，不适宜于信息量大或操作频繁的场合

* **信号量**

  与之前介绍的IPC结构不同，他是一个计数器，可以用来控制多个线程对共享资源的访问。**信号量用于实现进程间的互斥和同步，而不是用于存储进程间通信数据**

  * 优点：可以同步进程
  * 缺点：信号量有限

* **信号**

  一种比较复杂的通信方式，用于通知接收进程某个事件已经发生

* **套接字**

  socket也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同主机之间的进程通信

  * 优点：
    * 传输数据为字节级，传输数据可自定义，数据量小效率高
    * 传输数据时间短，性能高
    * 适合于客户端和服务器端之间信息实时交互
    * 可以加密,数据安全性强
  * 缺点：需对传输的数据进行解析，转化成应用级的数据

* **共享内存**

  它使得多个进程可以访问同一块内存空间（这段共享内存由一个进程创建），不同进程可以及时看到对方进程中对共享内存中数据得更新。这种方式需要**依靠某种同步操作，如互斥锁和信号量等** 特点

  * 优点：无须复制，快捷，信息量大
  * 缺点：
    * 通信是通过**将共享空间缓冲区直接附加到进程的虚拟地址空间**中来实现的，因此进程间的读写操作的同步问题
    * 利用内存缓冲区直接交换信息，内存的实体存在于计算机中，只能同一个计算机系统中的诸多进程共享，不方便网络通信
