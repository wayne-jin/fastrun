### 全区全服架构

* 通过一组相同的游戏逻辑进程提供对外服务
* 客户端通过负载均衡接入任一游戏逻辑进程
* 玩家不关心自己在哪个服务器

**特点**

* 承载能力强，资源利用率比较高

  因为通过负载均衡，所有的游戏逻辑进程可以均匀的分担整个游戏的压力

* 扩容方便

  只要简单的增加游戏逻辑进程的数量就可以达到扩容的目的，甚至可以进行不停机的在线扩容

* 容灾能力强

  容灾能力比较强，有少量的游戏进程出现问题的话，通过客户端的重连机制，玩家可以无感知的切换到正常的进程继续游戏

* 运营维护方便

  进程比较少  
  



### pk匹配系统设计

**常规方案**

* 独立的PK服务器进程，异步过程多且复杂
* 需要考虑负载分担，容灾和备份
* 独立进程下对角色PK数据的管理复杂，需要考虑CHCHE机制
* 部署和开发比较复杂   



**分布式PK系统的特点总结**

* 匹配算法的二级分层设计。将主要的负载控制在游戏逻辑进程内
* 充分利用游戏逻辑进程的天然分布式，达到负载均衡的目的
* 通过报名数据的智能分级和筛选，达到匹配效果的最大化
* PK服务器进程的无状态设计，对故障不敏感，对其它进程无依赖
* PK服务器进程的主动式服务设计，采用了逆向的思维方式。换个角度去想问题，达到了意想不到的效果。